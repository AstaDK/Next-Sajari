"use strict";var e=require("@sajari/react-hooks"),r=require("@sajari/react-sdk-utils");exports.search=function(t){var n;if(!t)throw new Error("search function requires a `search` config");var i=t.pipeline,s=t.filters,u=t.variables,l=void 0===u?new e.Variables:u,o=e.combineFilters(null!=s?s:[]),a=null!=(n=l.get().filter)?n:"";return l.set({filter:function(){var e=o.filter();return[a,r.isEmpty(e)?'_id != ""':e].filter(Boolean).join(" AND ")},countFilters:function(){return o.countFilters()},buckets:function(){return o.buckets()},count:function(){return o.count()}}),new Promise((function(r){var t=i.listen(e.EVENT_RESPONSE_UPDATED,(function(e){var n,i,s;if(t(),e&&!e.isError()){var u=JSON.stringify({queryValues:Object.fromEntries(null!=(n=e.getQueryValues())?n:[]),response:Object.fromEntries(null!=(i=e.getResponse())?i:[]),values:Object.fromEntries(null!=(s=e.getValues())?s:[])});r(u)}else r(null)}));i.search(l.get())}))};
//# sourceMappingURL=server.cjs.production.min.js.map
