{"version":3,"file":"Listener.esm.js","sources":["../../../src/ContextProvider/controllers/Listener.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any, no-console */\nexport type CallbackFn = (...args: any[]) => void;\nexport type UnlistenFn = () => void;\n\nexport class Listener {\n  private listeners: CallbackFn[];\n\n  /**\n   * Constructs a listener object.\n   */\n  constructor() {\n    this.listeners = [];\n  }\n\n  /**\n   * Adds a callback to the listener.\n   * Returns a function that will unregister the callback from the listener when called.\n   * @param callback The callback to be registered.\n   * @return The unregister function to remove the callback from the listener.\n   */\n  public listen(callback: CallbackFn): UnlistenFn {\n    this.listeners.push(callback);\n    return () => this.unlisten(callback);\n  }\n\n  /**\n   * Removes a callback from the listener.\n   */\n  public unlisten(callback: CallbackFn): void {\n    const index = this.listeners.indexOf(callback);\n    if (index >= 0) {\n      this.listeners.splice(index, 1);\n    }\n  }\n\n  /**\n   * Notify takes a function and calls it for every listener.\n   * The listener is supplied as the first argument to the function.\n   * @param {function(callback: Function)} fn Function to call each of the callbacks in the listener with.\n   */\n  public notify(fn: (callback: CallbackFn) => void): void {\n    this.listeners.forEach((l) => {\n      try {\n        fn(l);\n      } catch (e) {\n        if (console && console.error) {\n          console.error(e);\n        }\n      }\n    });\n  }\n}\n\nexport type ListenerMap = Map<string, Listener>;\n"],"names":["Listener","listeners","listen","callback","push","unlisten","index","indexOf","splice","notify","fn","forEach","l","e","console","error"],"mappings":"IAIaA,QAAb;AAME;AACE,SAAKC,SAAL,GAAiB,EAAjB;AACD;;AARH;;AAAA,SAgBSC,MAhBT,GAgBS,gBAAOC,QAAP;;;AACL,SAAKF,SAAL,CAAeG,IAAf,CAAoBD,QAApB;AACA,WAAO;AAAA,aAAM,KAAI,CAACE,QAAL,CAAcF,QAAd,CAAN;AAAA,KAAP;AACD,GAnBH;;AAAA,SAwBSE,QAxBT,GAwBS,kBAASF,QAAT;AACL,QAAMG,KAAK,GAAG,KAAKL,SAAL,CAAeM,OAAf,CAAuBJ,QAAvB,CAAd;;AACA,QAAIG,KAAK,IAAI,CAAb,EAAgB;AACd,WAAKL,SAAL,CAAeO,MAAf,CAAsBF,KAAtB,EAA6B,CAA7B;AACD;AACF,GA7BH;;AAAA,SAoCSG,MApCT,GAoCS,gBAAOC,EAAP;AACL,SAAKT,SAAL,CAAeU,OAAf,CAAuB,UAACC,CAAD;AACrB,UAAI;AACFF,QAAAA,EAAE,CAACE,CAAD,CAAF;AACD,OAFD,CAEE,OAAOC,CAAP,EAAU;AACV,YAAIC,OAAO,IAAIA,OAAO,CAACC,KAAvB,EAA8B;AAC5BD,UAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACD;AACF;AACF,KARD;AASD,GA9CH;;AAAA;AAAA;;;;"}