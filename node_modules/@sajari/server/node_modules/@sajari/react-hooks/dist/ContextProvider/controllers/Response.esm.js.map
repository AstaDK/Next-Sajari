{"version":3,"file":"Response.esm.js","sources":["../../../src/ContextProvider/controllers/Response.ts"],"sourcesContent":["import { Aggregates, RequestError, Result } from '@sajari/sdk-js';\n\nexport type ResponseMap = Map<string, number | Aggregates | Result[]>;\n\nexport class Response {\n  private error: RequestError | null;\n\n  private queryValues?: Map<string, string>;\n\n  private response?: ResponseMap;\n\n  private values?: Map<string, string>;\n\n  /**\n   * Constructs a Response object.\n   * @param error\n   * @param queryValues\n   * @param response\n   * @param values\n   */\n  constructor(\n    error: RequestError | null,\n    queryValues?: Map<string, string>,\n    response?: ResponseMap,\n    values?: Map<string, string>,\n  ) {\n    this.error = error;\n    this.queryValues = queryValues;\n    this.response = response;\n    this.values = values;\n  }\n\n  /**\n   * Is this response empty?\n   */\n  public isEmpty(): boolean {\n    return (\n      this.error === null && this.response === undefined && this.values === undefined && this.queryValues === undefined\n    );\n  }\n\n  /**\n   * Is this response an error?\n   */\n  public isError(): boolean {\n    return this.error !== null;\n  }\n\n  /**\n   * The error associated with this response.\n   */\n  public getError(): RequestError | null {\n    return this.error;\n  }\n\n  /**\n   * Return the query values used in the search which created this response.\n   */\n  public getQueryValues(): Map<string, string> | undefined {\n    return this.queryValues;\n  }\n\n  /**\n   * Returns the response, which includes results and aggregates etc.\n   */\n  public getResponse(): ResponseMap | undefined {\n    return this.response;\n  }\n\n  /**\n   * Return the pipeline values returned by the search.\n   */\n  public getValues(): Map<string, string> | undefined {\n    return this.values;\n  }\n\n  /**\n   * Return results from the response.\n   */\n  public getResults(): Result[] | undefined {\n    return this.response !== undefined ? (this.response.get('results') as Result[]) : undefined;\n  }\n\n  /**\n   * Return the total number of results.\n   */\n  public getTotalResults(): number | undefined {\n    return this.response !== undefined ? (this.response.get('totalResults') as number) : undefined;\n  }\n\n  /**\n   * Return time from the response.\n   */\n  public getTime(): number | undefined {\n    return this.response !== undefined ? (this.response.get('time') as number) : undefined;\n  }\n\n  /**\n   * Return the aggregates in the response.\n   */\n  public getAggregates(): Aggregates | undefined {\n    if (this.response === undefined) {\n      return undefined;\n    }\n\n    const aggregates = this.response.get('aggregates');\n    if (aggregates === undefined) {\n      return undefined;\n    }\n    return aggregates as Aggregates;\n  }\n\n  /**\n   * Return the aggregateFilters in the response.\n   */\n  public getAggregateFilters(): Aggregates | undefined {\n    if (this.response === undefined) {\n      return undefined;\n    }\n\n    const aggregates = this.response.get('aggregateFilters');\n    if (aggregates === undefined) {\n      return undefined;\n    }\n    return aggregates as Aggregates;\n  }\n}\n"],"names":["Response","error","queryValues","response","values","isEmpty","undefined","isError","getError","getQueryValues","getResponse","getValues","getResults","get","getTotalResults","getTime","getAggregates","aggregates","getAggregateFilters"],"mappings":"IAIaA,QAAb;AAgBE,oBACEC,KADF,EAEEC,WAFF,EAGEC,QAHF,EAIEC,MAJF;AAME,SAAKH,KAAL,GAAaA,KAAb;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACD;;AA1BH;;AAAA,SA+BSC,OA/BT,GA+BS;AACL,WACE,KAAKJ,KAAL,KAAe,IAAf,IAAuB,KAAKE,QAAL,KAAkBG,SAAzC,IAAsD,KAAKF,MAAL,KAAgBE,SAAtE,IAAmF,KAAKJ,WAAL,KAAqBI,SAD1G;AAGD,GAnCH;;AAAA,SAwCSC,OAxCT,GAwCS;AACL,WAAO,KAAKN,KAAL,KAAe,IAAtB;AACD,GA1CH;;AAAA,SA+CSO,QA/CT,GA+CS;AACL,WAAO,KAAKP,KAAZ;AACD,GAjDH;;AAAA,SAsDSQ,cAtDT,GAsDS;AACL,WAAO,KAAKP,WAAZ;AACD,GAxDH;;AAAA,SA6DSQ,WA7DT,GA6DS;AACL,WAAO,KAAKP,QAAZ;AACD,GA/DH;;AAAA,SAoESQ,SApET,GAoES;AACL,WAAO,KAAKP,MAAZ;AACD,GAtEH;;AAAA,SA2ESQ,UA3ET,GA2ES;AACL,WAAO,KAAKT,QAAL,KAAkBG,SAAlB,GAA+B,KAAKH,QAAL,CAAcU,GAAd,CAAkB,SAAlB,CAA/B,GAA2EP,SAAlF;AACD,GA7EH;;AAAA,SAkFSQ,eAlFT,GAkFS;AACL,WAAO,KAAKX,QAAL,KAAkBG,SAAlB,GAA+B,KAAKH,QAAL,CAAcU,GAAd,CAAkB,cAAlB,CAA/B,GAA8EP,SAArF;AACD,GApFH;;AAAA,SAyFSS,OAzFT,GAyFS;AACL,WAAO,KAAKZ,QAAL,KAAkBG,SAAlB,GAA+B,KAAKH,QAAL,CAAcU,GAAd,CAAkB,MAAlB,CAA/B,GAAsEP,SAA7E;AACD,GA3FH;;AAAA,SAgGSU,aAhGT,GAgGS;AACL,QAAI,KAAKb,QAAL,KAAkBG,SAAtB,EAAiC;AAC/B,aAAOA,SAAP;AACD;;AAED,QAAMW,UAAU,GAAG,KAAKd,QAAL,CAAcU,GAAd,CAAkB,YAAlB,CAAnB;;AACA,QAAII,UAAU,KAAKX,SAAnB,EAA8B;AAC5B,aAAOA,SAAP;AACD;;AACD,WAAOW,UAAP;AACD,GA1GH;;AAAA,SA+GSC,mBA/GT,GA+GS;AACL,QAAI,KAAKf,QAAL,KAAkBG,SAAtB,EAAiC;AAC/B,aAAOA,SAAP;AACD;;AAED,QAAMW,UAAU,GAAG,KAAKd,QAAL,CAAcU,GAAd,CAAkB,kBAAlB,CAAnB;;AACA,QAAII,UAAU,KAAKX,SAAnB,EAA8B;AAC5B,aAAOA,SAAP;AACD;;AACD,WAAOW,UAAP;AACD,GAzHH;;AAAA;AAAA;;;;"}