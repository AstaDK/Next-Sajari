import { noop, isEmpty, isValidURL, isFunction, isString } from '@sajari/react-sdk-utils';

function useClickTracking(params) {
  var onClick = params.onClick,
      token = params.token,
      tracking = params.tracking,
      values = params.values;
  var url = values.url;

  if (!tracking) {
    return {
      href: url,
      onClick: noop
    };
  }

  var clickToken = token && 'click' in token ? token.click : undefined;
  var useToken = !isEmpty(clickToken) && Object.keys(values).includes(tracking.field) && isValidURL(values[tracking.field]);
  var href = useToken ? clickToken : url;

  var onClickHandler = function onClickHandler() {
    var _navigator;

    if (isFunction(onClick)) {
      onClick(url);
    }

    if (!useToken && isString(clickToken) && isFunction((_navigator = navigator) == null ? void 0 : _navigator.sendBeacon)) {
      navigator.sendBeacon(clickToken);
    }
  };

  return {
    href: href,
    onClick: onClickHandler
  };
}

export default useClickTracking;
//# sourceMappingURL=useClickTracking.esm.js.map
