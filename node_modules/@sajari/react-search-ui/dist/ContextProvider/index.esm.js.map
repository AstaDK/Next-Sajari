{"version":3,"file":"index.esm.js","sources":["../../src/ContextProvider/index.tsx"],"sourcesContent":["import { SearchProvider } from '@sajari/react-hooks';\nimport { createContext, ThemeProvider } from '@sajari/react-sdk-utils';\nimport React, { useEffect, useState } from 'react';\nimport { LiveAnnouncer } from 'react-aria-live';\nimport { I18nextProvider } from 'react-i18next';\n\nimport i18n from '../i18n';\nimport { ContextProviderValues, ResultViewType, SearchUIContextProviderValues } from './types';\n\nconst [Provider, useSearchUIContext] = createContext<Required<SearchUIContextProviderValues> & { language?: string }>({\n  strict: true,\n  name: 'PipelineContext',\n});\n\nconst ContextProvider: React.FC<ContextProviderValues> = ({\n  children,\n  search,\n  autocomplete,\n  defaultFilter,\n  searchOnLoad,\n  initialResponse,\n  ratingMax = 5,\n  currency = 'USD',\n  theme,\n  importantStyles,\n  disableDefaultStyles = false,\n  customClassNames = {},\n  viewType: viewTypeProp = 'list',\n}) => {\n  const [language, setLanguage] = useState(i18n.language);\n  const [viewType, setViewType] = useState<ResultViewType>(viewTypeProp);\n\n  useEffect(() => {\n    const event = 'languageChanged';\n    i18n.on(event, setLanguage);\n\n    return () => {\n      i18n.off(event);\n    };\n  }, []);\n\n  useEffect(() => {\n    setViewType(viewTypeProp);\n  }, [viewTypeProp]);\n\n  return (\n    <Provider\n      value={{\n        tracking: search.pipeline.getTracking(),\n        disableDefaultStyles,\n        currency,\n        customClassNames,\n        language,\n        ratingMax,\n        viewType,\n        setViewType,\n      }}\n    >\n      <SearchProvider\n        search={search}\n        autocomplete={autocomplete}\n        defaultFilter={defaultFilter}\n        searchOnLoad={searchOnLoad}\n        initialResponse={initialResponse}\n      >\n        <LiveAnnouncer>\n          <I18nextProvider i18n={i18n}>\n            <ThemeProvider theme={theme} importantStyles={importantStyles}>\n              {children}\n            </ThemeProvider>\n          </I18nextProvider>\n        </LiveAnnouncer>\n      </SearchProvider>\n    </Provider>\n  );\n};\n\nexport default ContextProvider;\nexport { useSearchUIContext };\nexport type { ContextProviderValues, ResultViewType };\n"],"names":["createContext","strict","name","Provider","useSearchUIContext","ContextProvider","children","search","autocomplete","defaultFilter","searchOnLoad","initialResponse","ratingMax","currency","theme","importantStyles","disableDefaultStyles","customClassNames","viewType","viewTypeProp","useState","i18n","language","setLanguage","setViewType","useEffect","event","on","off","_jsx","tracking","pipeline","getTracking"],"mappings":";;;;;;;;kCASuCA,aAAa,CAAkE;AACpHC,EAAAA,MAAM,EAAE,IAD4G;AAEpHC,EAAAA,IAAI,EAAE;AAF8G,CAAlE;IAA7CC;IAAUC;;AAKjB,IAAMC,eAAe,GAAoC,SAAnDA,eAAmD;MACvDC,gBAAAA;MACAC,cAAAA;MACAC,oBAAAA;MACAC,qBAAAA;MACAC,oBAAAA;MACAC,uBAAAA;4BACAC;MAAAA,wCAAY;2BACZC;MAAAA,sCAAW;MACXC,aAAAA;MACAC,uBAAAA;mCACAC;MAAAA,0DAAuB;mCACvBC;MAAAA,sDAAmB;2BACnBC;MAAUC,0CAAe;;kBAEOC,QAAQ,CAACC,IAAI,CAACC,QAAN;MAAjCA;MAAUC;;mBACeH,QAAQ,CAAiBD,YAAjB;MAAjCD;MAAUM;;AAEjBC,EAAAA,SAAS,CAAC;AACR,QAAMC,KAAK,GAAG,iBAAd;AACAL,IAAAA,IAAI,CAACM,EAAL,CAAQD,KAAR,EAAeH,WAAf;AAEA,WAAO;AACLF,MAAAA,IAAI,CAACO,GAAL,CAASF,KAAT;AACD,KAFD;AAGD,GAPQ,EAON,EAPM,CAAT;AASAD,EAAAA,SAAS,CAAC;AACRD,IAAAA,WAAW,CAACL,YAAD,CAAX;AACD,GAFQ,EAEN,CAACA,YAAD,CAFM,CAAT;AAIA,SACEU,IAAC,QAAD;AACE,IAAA,KAAK,EAAE;AACLC,MAAAA,QAAQ,EAAEvB,MAAM,CAACwB,QAAP,CAAgBC,WAAhB,EADL;AAELhB,MAAAA,oBAAoB,EAApBA,oBAFK;AAGLH,MAAAA,QAAQ,EAARA,QAHK;AAILI,MAAAA,gBAAgB,EAAhBA,gBAJK;AAKLK,MAAAA,QAAQ,EAARA,QALK;AAMLV,MAAAA,SAAS,EAATA,SANK;AAOLM,MAAAA,QAAQ,EAARA,QAPK;AAQLM,MAAAA,WAAW,EAAXA;AARK,KADT;AAAA,cAYEK,IAAC,cAAD;AACE,MAAA,MAAM,EAAEtB,MADV;AAEE,MAAA,YAAY,EAAEC,YAFhB;AAGE,MAAA,aAAa,EAAEC,aAHjB;AAIE,MAAA,YAAY,EAAEC,YAJhB;AAKE,MAAA,eAAe,EAAEC,eALnB;AAAA,gBAOEkB,IAAC,aAAD;AAAA,kBACEA,IAAC,eAAD;AAAiB,UAAA,IAAI,EAAER,IAAvB;AAAA,oBACEQ,IAAC,aAAD;AAAe,YAAA,KAAK,EAAEf,KAAtB;AAA6B,YAAA,eAAe,EAAEC,eAA9C;AAAA,sBACGT;AADH;AADF;AADF;AAPF;AAZF,IADF;AA8BD,CA7DD;;;;;"}