'use strict';

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var reactHooks = require('@sajari/react-hooks');
var reactSdkUtils = require('@sajari/react-sdk-utils');
var React = require('react');
var React__default = _interopDefault(React);
var reactAriaLive = require('react-aria-live');
var reactI18next = require('react-i18next');
var i18n = _interopDefault(require('i18next'));
var LanguageDetector = _interopDefault(require('i18next-browser-languagedetector'));
var jsxRuntime = require('@emotion/core/jsx-runtime');
var reactComponents = require('@sajari/react-components');
var _css = _interopDefault(require('@emotion/css'));
var utils = require('@react-aria/utils');

var en = {
  common: {
    result: 'Result',
    results: 'Results',
    items: 'Items',
    item: 'Item',
    loading: 'Loading',
    error: 'Error'
  },
  errors: {
    authorization: 'Authorization for this request failed. Please try again.',
    connection: 'Please check your network connection and try again.',
    generic: 'Something went wrong. Please try again.'
  },
  filter: {
    all: 'All',
    rangeOver: 'Over {{value}}',
    rangeUnder: 'Under {{value}}',
    reset: 'Reset',
    select: 'Select a filter',
    selected: '{{count}} filters selected',
    showLess: 'Show less',
    showMore: 'Show more'
  },
  input: {
    placeholder: 'Search'
  },
  resultsPerPage: {
    label: 'Show'
  },
  pagination: {
    label: 'Pagination',
    previous: 'Previous',
    next: 'Next',
    page: 'Page {{page}}',
    current: 'Page {{page}}, current page'
  },
  results: {
    empty: {
      title: 'No results',
      body: 'No matches were found for "{{query}}".'
    }
  },
  sorting: {
    label: 'Sort'
  },
  summary: {
    results: '{{count}} {{object}} for "{{query}}"',
    noQueryResults: '{{count}} {{object}}',
    latency: '({{time}} secs)',
    alternative: 'Search instead for'
  },
  viewType: {
    label: 'View',
    grid: 'Grid',
    list: 'List'
  }
};

i18n.use(LanguageDetector).init({
  resources: {
    en: en
  },
  fallbackLng: 'en',
  interpolation: {
    escapeValue: false
  },
  react: {
    wait: true
  }
});

var _createContext = /*#__PURE__*/reactSdkUtils.createContext({
  strict: true,
  name: 'PipelineContext'
}),
    Provider = _createContext[0],
    useSearchUIContext = _createContext[1];

var ContextProvider = function ContextProvider(_ref) {
  var children = _ref.children,
      search = _ref.search,
      autocomplete = _ref.autocomplete,
      defaultFilter = _ref.defaultFilter,
      searchOnLoad = _ref.searchOnLoad,
      initialResponse = _ref.initialResponse,
      _ref$ratingMax = _ref.ratingMax,
      ratingMax = _ref$ratingMax === void 0 ? 5 : _ref$ratingMax,
      _ref$currency = _ref.currency,
      currency = _ref$currency === void 0 ? 'USD' : _ref$currency,
      theme = _ref.theme,
      importantStyles = _ref.importantStyles,
      _ref$disableDefaultSt = _ref.disableDefaultStyles,
      disableDefaultStyles = _ref$disableDefaultSt === void 0 ? false : _ref$disableDefaultSt,
      _ref$customClassNames = _ref.customClassNames,
      customClassNames = _ref$customClassNames === void 0 ? {} : _ref$customClassNames,
      _ref$viewType = _ref.viewType,
      viewTypeProp = _ref$viewType === void 0 ? 'list' : _ref$viewType;

  var _useState = React.useState(i18n.language),
      language = _useState[0],
      setLanguage = _useState[1];

  var _useState2 = React.useState(viewTypeProp),
      viewType = _useState2[0],
      setViewType = _useState2[1];

  React.useEffect(function () {
    var event = 'languageChanged';
    i18n.on(event, setLanguage);
    return function () {
      i18n.off(event);
    };
  }, []);
  React.useEffect(function () {
    setViewType(viewTypeProp);
  }, [viewTypeProp]);
  return jsxRuntime.jsx(Provider, {
    value: {
      tracking: search.pipeline.getTracking(),
      disableDefaultStyles: disableDefaultStyles,
      currency: currency,
      customClassNames: customClassNames,
      language: language,
      ratingMax: ratingMax,
      viewType: viewType,
      setViewType: setViewType
    },
    children: jsxRuntime.jsx(reactHooks.SearchProvider, {
      search: search,
      autocomplete: autocomplete,
      defaultFilter: defaultFilter,
      searchOnLoad: searchOnLoad,
      initialResponse: initialResponse,
      children: jsxRuntime.jsx(reactAriaLive.LiveAnnouncer, {
        children: jsxRuntime.jsx(reactI18next.I18nextProvider, {
          i18n: i18n,
          children: jsxRuntime.jsx(reactSdkUtils.ThemeProvider, {
            theme: theme,
            importantStyles: importantStyles,
            children: children
          })
        })
      })
    })
  });
};

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

function pinItems(list, pinned, prop) {
  if (pinned === void 0) {
    pinned = [];
  }

  return [].concat(list).sort(function (a, b) {
    return pinned.indexOf(b[prop]) - pinned.indexOf(a[prop]);
  });
}
function getHeaderId(name) {
  return "filter-" + name + "-label";
}
function formatLabel(input, params) {
  var _params$format = params.format,
      format = _params$format === void 0 ? 'default' : _params$format,
      _params$currency = params.currency,
      currency = _params$currency === void 0 ? 'USD' : _params$currency,
      t = params.t;

  var formatPrice = function formatPrice(v) {
    return reactSdkUtils.formatNumber(v, {
      style: 'currency',
      currency: currency
    }).replace('.00', '');
  };

  switch (format) {
    case 'price':
      switch (true) {
        case /\d+\s-\s\d+/gm.test(input):
          {
            var _input$split$map$map = input.split(' - ').map(Number).map(formatPrice),
                min = _input$split$map$map[0],
                max = _input$split$map$map[1];

            return min + " - " + max;
          }

        case input.startsWith('>'):
          return t('rangeOver', {
            value: formatPrice(Number(input.substring(2)))
          });

        case input.startsWith('<'):
          return t('rangeUnder', {
            value: formatPrice(Number(input.substring(2)))
          });

        default:
          return input;
      }

    case 'default':
    default:
      return input;
  }
}

function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }

var _ref2 =  {
  name: "1u21r5g-Header",
  styles: "text-transform:uppercase;;label:Header;",
  map: "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkhlYWRlci50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBbUJ5RiIsImZpbGUiOiJIZWFkZXIudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm94LCBCdXR0b24sIEhlYWRpbmcgfSBmcm9tICdAc2FqYXJpL3JlYWN0LWNvbXBvbmVudHMnO1xyXG5pbXBvcnQgeyBnZXRTdHlsZXNPYmplY3QsIGlzU3RyaW5nIH0gZnJvbSAnQHNhamFyaS9yZWFjdC1zZGstdXRpbHMnO1xyXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCc7XHJcbmltcG9ydCB0dyBmcm9tICd0d2luLm1hY3JvJztcclxuaW1wb3J0IHsgdXNlU2VhcmNoVUlDb250ZXh0IH0gZnJvbSAnLi4vQ29udGV4dFByb3ZpZGVyJztcclxuaW1wb3J0IHsgZ2V0SGVhZGVySWQgfSBmcm9tICcuL3V0aWxzJztcclxuY29uc3QgSGVhZGVyID0gKHsgdGl0bGUsIG5hbWUsIG9uUmVzZXQsIHNob3dSZXNldCB9KSA9PiB7XHJcbiAgICBjb25zdCB7IHQgfSA9IHVzZVRyYW5zbGF0aW9uKCdmaWx0ZXInKTtcclxuICAgIGNvbnN0IHsgZGlzYWJsZURlZmF1bHRTdHlsZXMgPSBmYWxzZSwgY3VzdG9tQ2xhc3NOYW1lcyB9ID0gdXNlU2VhcmNoVUlDb250ZXh0KCk7XHJcbiAgICBjb25zdCBzdHlsZXMgPSBnZXRTdHlsZXNPYmplY3Qoe1xyXG4gICAgICAgIGNvbnRhaW5lcjogW3R3IGBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItMiBsZWFkaW5nLW5vbmVgXSxcclxuICAgICAgICBoZWFkaW5nOiBbdHcgYGxlYWRpbmctc251Z2BdLFxyXG4gICAgfSwgZGlzYWJsZURlZmF1bHRTdHlsZXMpO1xyXG4gICAgcmV0dXJuICg8Qm94IGNzcz17c3R5bGVzLmNvbnRhaW5lcn0gY2xhc3NOYW1lPXtjdXN0b21DbGFzc05hbWVzLmZpbHRlcj8uaGVhZGVyfT5cbiAgICAgIDxIZWFkaW5nIGFzPVwiaDJcIiBzaXplPVwieHNcIiBjc3M9e3N0eWxlcy5oZWFkaW5nfSBkaXNhYmxlRGVmYXVsdFN0eWxlcz17ZGlzYWJsZURlZmF1bHRTdHlsZXN9IGNsYXNzTmFtZT17Y3VzdG9tQ2xhc3NOYW1lcy5maWx0ZXI/LnRpdGxlfSBpZD17aXNTdHJpbmcobmFtZSkgPyBnZXRIZWFkZXJJZChuYW1lKSA6IHVuZGVmaW5lZH0+XG4gICAgICAgIHt0aXRsZX1cbiAgICAgIDwvSGVhZGluZz5cblxuICAgICAge3Nob3dSZXNldCA/ICg8QnV0dG9uIGFwcGVhcmFuY2U9XCJsaW5rXCIgc2l6ZT1cInhzXCIgc3BhY2luZz1cIm5vbmVcIiBvbkNsaWNrPXtvblJlc2V0fSBjc3M9e3R3IGB1cHBlcmNhc2VgfSBkaXNhYmxlRGVmYXVsdFN0eWxlcz17ZGlzYWJsZURlZmF1bHRTdHlsZXN9IGNsYXNzTmFtZT17Y3VzdG9tQ2xhc3NOYW1lcy5maWx0ZXI/LnJlc2V0QnV0dG9ufT5cbiAgICAgICAgICB7dCgncmVzZXQnKX1cbiAgICAgICAgPC9CdXR0b24+KSA6IG51bGx9XG4gICAgPC9Cb3g+KTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgSGVhZGVyO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1IZWFkZXIuanN4Lm1hcCJdfQ== */",
  toString: _EMOTION_STRINGIFIED_CSS_ERROR__
};

var Header = function Header(_ref) {
  var _customClassNames$fil, _customClassNames$fil2, _customClassNames$fil3;

  var title = _ref.title,
      name = _ref.name,
      onReset = _ref.onReset,
      showReset = _ref.showReset;

  var _useTranslation = reactI18next.useTranslation('filter'),
      t = _useTranslation.t;

  var _useSearchUIContext = useSearchUIContext(),
      _useSearchUIContext$d = _useSearchUIContext.disableDefaultStyles,
      disableDefaultStyles = _useSearchUIContext$d === void 0 ? false : _useSearchUIContext$d,
      customClassNames = _useSearchUIContext.customClassNames;

  var styles = reactSdkUtils.getStylesObject({
    container: [{
      "display": "flex",
      "alignItems": "center",
      "justifyContent": "space-between",
      "marginBottom": "0.5rem",
      "lineHeight": "1"
    }],
    heading: [{
      "lineHeight": "1.375"
    }]
  }, disableDefaultStyles);
  return jsxRuntime.jsxs(reactComponents.Box, {
    css: styles.container,
    className: (_customClassNames$fil = customClassNames.filter) == null ? void 0 : _customClassNames$fil.header,
    children: [jsxRuntime.jsx(reactComponents.Heading, {
      as: "h2",
      size: "xs",
      css: styles.heading,
      disableDefaultStyles: disableDefaultStyles,
      className: (_customClassNames$fil2 = customClassNames.filter) == null ? void 0 : _customClassNames$fil2.title,
      id: reactSdkUtils.isString(name) ? getHeaderId(name) : undefined,
      children: title
    }), showReset ? jsxRuntime.jsx(reactComponents.Button, {
      appearance: "link",
      size: "xs",
      spacing: "none",
      onClick: onReset,
      css: _ref2,
      disableDefaultStyles: disableDefaultStyles,
      className: (_customClassNames$fil3 = customClassNames.filter) == null ? void 0 : _customClassNames$fil3.resetButton,
      children: t('reset')
    }) : null]
  });
};

var Box = /*#__PURE__*/React.forwardRef(function (_ref, ref) {
  var _customClassNames$fil;

  var children = _ref.children,
      headerProps = _objectWithoutPropertiesLoose(_ref, ["children"]);

  var _useSearchUIContext = useSearchUIContext(),
      customClassNames = _useSearchUIContext.customClassNames;

  return jsxRuntime.jsxs(reactComponents.Box, {
    ref: ref,
    className: (_customClassNames$fil = customClassNames.filter) == null ? void 0 : _customClassNames$fil.box,
    children: [jsxRuntime.jsx(Header, _extends({}, headerProps)), children]
  });
});

var colorKeys = reactComponents.Swatch.colorKeys;

var ColorFilter = function ColorFilter(_ref) {
  var _customClassNames$fil, _customClassNames$fil2, _customClassNames$fil3, _customClassNames$fil4, _customClassNames$fil5, _customClassNames$fil6;

  var name = _ref.name,
      title = _ref.title;

  var _useFilter = reactHooks.useFilter(name),
      options = _useFilter.options,
      selected = _useFilter.selected,
      setSelected = _useFilter.setSelected,
      reset = _useFilter.reset;

  var _useSearchUIContext = useSearchUIContext(),
      customClassNames = _useSearchUIContext.customClassNames,
      _useSearchUIContext$d = _useSearchUIContext.disableDefaultStyles,
      disableDefaultStyles = _useSearchUIContext$d === void 0 ? false : _useSearchUIContext$d;

  var optionKeys = React.useMemo(function () {
    return options.map(function (o) {
      return o.label;
    });
  }, [JSON.stringify(options)]);
  var filtered = React.useMemo(function () {
    return colorKeys.filter(function (c) {
      return optionKeys.some(function (o) {
        return c.toLowerCase() === o.toLowerCase();
      });
    });
  }, [JSON.stringify(optionKeys)]);
  var children = React.useMemo(function () {
    return filtered.map(function (color) {
      var Component = reactComponents.Swatch.Color[color];
      return jsxRuntime.jsx(Component, {}, color);
    });
  }, [JSON.stringify(filtered)]);

  if (reactSdkUtils.isEmpty(filtered) && reactSdkUtils.isEmpty(selected)) {
    return null;
  }

  return jsxRuntime.jsx(Box, {
    title: title,
    showReset: selected.length > 0,
    onReset: reset,
    children: jsxRuntime.jsx(reactComponents.Swatch, {
      checkedColors: selected,
      onChange: setSelected,
      className: (_customClassNames$fil = customClassNames.filter) == null ? void 0 : (_customClassNames$fil2 = _customClassNames$fil.color) == null ? void 0 : _customClassNames$fil2.container,
      colorClassName: (_customClassNames$fil3 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil4 = _customClassNames$fil3.color) == null ? void 0 : _customClassNames$fil4.item,
      colorCheckedClassName: (_customClassNames$fil5 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil6 = _customClassNames$fil5.color) == null ? void 0 : _customClassNames$fil6.itemChecked,
      disableDefaultStyles: disableDefaultStyles,
      children: children
    })
  });
};

function _extends$1() { _extends$1 = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$1.apply(this, arguments); }

var _ref = /*#__PURE__*/React.createElement("path", {
  d: "M10.293 3.293L6 7.586 1.707 3.293A1 1 0 00.293 4.707l5 5a1 1 0 001.414 0l5-5a1 1 0 10-1.414-1.414z"
});

function SvgSmallChevronDown(props) {
  return /*#__PURE__*/React.createElement("svg", _extends$1({
    height: 12,
    width: 12,
    viewBox: "0 0 12 12",
    fill: "currentColor"
  }, props), _ref);
}

function _extends$2() { _extends$2 = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$2.apply(this, arguments); }

var _ref$1 = /*#__PURE__*/React.createElement("path", {
  d: "M6.707 2.293a1 1 0 00-1.414 0l-5 5a1 1 0 001.414 1.414L6 4.414l4.293 4.293a1 1 0 001.414-1.414z"
});

function SvgSmallChevronUp(props) {
  return /*#__PURE__*/React.createElement("svg", _extends$2({
    height: 12,
    width: 12,
    viewBox: "0 0 12 12",
    fill: "currentColor"
  }, props), _ref$1);
}

function _extends$3() { _extends$3 = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$3.apply(this, arguments); }

var _ref$2 = /*#__PURE__*/React.createElement("path", {
  d: "M7 7h4v4H7zM1 7h4v4H1zm0-6h4v4H1zm6 0h4v4H7z"
});

function SvgSmallGrid(props) {
  return /*#__PURE__*/React.createElement("svg", _extends$3({
    viewBox: "0 0 12 12",
    width: 12,
    height: 12,
    fill: "currentColor"
  }, props), _ref$2);
}

function _extends$4() { _extends$4 = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$4.apply(this, arguments); }

var _ref$3 = /*#__PURE__*/React.createElement("path", {
  d: "M0 1h4v4H0zm6 1h6v2H6zM0 7h4v4H0zm6 1h6v2H6z"
});

function SvgSmallList(props) {
  return /*#__PURE__*/React.createElement("svg", _extends$4({
    viewBox: "0 0 12 12",
    width: 12,
    height: 12,
    fill: "currentColor"
  }, props), _ref$3);
}

var ListFilter = function ListFilter(props) {
  var _customClassNames$fil, _customClassNames$fil2, _customClassNames$fil3, _customClassNames$fil4, _customClassNames$fil5, _customClassNames$fil6, _customClassNames$fil7, _customClassNames$fil8, _customClassNames$fil9, _customClassNames$fil10;

  var name = props.name,
      title = props.title,
      _props$limit = props.limit,
      limit = _props$limit === void 0 ? 10 : _props$limit,
      _props$sort = props.sort,
      sort = _props$sort === void 0 ? 'count' : _props$sort,
      _props$sortAscending = props.sortAscending,
      sortAscending = _props$sortAscending === void 0 ? sort !== 'count' : _props$sortAscending,
      itemRender = props.itemRender,
      _props$placeholder = props.placeholder,
      placeholder = _props$placeholder === void 0 ? '' : _props$placeholder,
      format = props.format;
  var filterContainerId = "list-" + name;

  var _useFilter = reactHooks.useFilter(name, {
    sort: sort,
    sortAscending: sortAscending
  }),
      options = _useFilter.options,
      reset = _useFilter.reset,
      setSelected = _useFilter.setSelected,
      selected = _useFilter.selected,
      multi = _useFilter.multi;

  var _props$searchable = props.searchable,
      searchable = _props$searchable === void 0 ? options.length > limit : _props$searchable;
  var pinSelected = props.pinSelected;

  if (!reactSdkUtils.isBoolean(pinSelected)) {
    pinSelected = options.length > limit;
  }

  var _React$useState = React.useState(''),
      lastFocusedControl = _React$useState[0],
      setLastFocusedControl = _React$useState[1];

  var _React$useState2 = React.useState(''),
      query = _React$useState2[0],
      setQuery = _React$useState2[1];

  var _useQuery = reactHooks.useQuery(),
      q = _useQuery.query;

  var _React$useState3 = React.useState(limit),
      shown = _React$useState3[0],
      setShown = _React$useState3[1];

  var _useSearchUIContext = useSearchUIContext(),
      _useSearchUIContext$d = _useSearchUIContext.disableDefaultStyles,
      disableDefaultStyles = _useSearchUIContext$d === void 0 ? false : _useSearchUIContext$d,
      customClassNames = _useSearchUIContext.customClassNames,
      currency = _useSearchUIContext.currency,
      language = _useSearchUIContext.language;

  var theme = reactSdkUtils.useTheme();

  var _useTranslation = reactI18next.useTranslation('filter'),
      t = _useTranslation.t;

  var styles = reactSdkUtils.getStylesObject({
    innerList: [{
      "display": "flex",
      "alignItems": "center",
      "justifyContent": "space-between"
    }],
    count: [{
      "marginLeft": "0.5rem",
      "fontSize": "0.75rem",
      "--text-opacity": "1",
      "color": "rgba(159, 166, 178, var(--text-opacity))"
    }],
    checkbox: [{
      "fontSize": "0.875rem"
    }],
    searchWrapper: [{
      "marginBottom": "0.5rem"
    }],
    toggleButtonWrapper: [{
      "marginTop": "0.25rem"
    }],
    toggleIcon: [{
      "marginLeft": "0.5rem"
    }, "color: " + theme.color.primary.base]
  }, disableDefaultStyles);
  React.useEffect(function () {
    setQuery('');
  }, [q]);
  React.useEffect(function () {
    setShown(limit);
  }, [query, q]);
  React.useEffect(function () {
    if (!reactSdkUtils.isSSR() && pinSelected) {
      var _document$querySelect;

      var input = (_document$querySelect = document.querySelector("#" + filterContainerId)) == null ? void 0 : _document$querySelect.querySelector("input[value=\"" + lastFocusedControl + "\"]");
      input == null ? void 0 : input.focus();
    }
  }, [JSON.stringify(selected)]);
  var Control = multi ? reactComponents.Checkbox : reactComponents.Radio;
  var filtered = searchable ? options.filter(function (o) {
    return o.label.toLowerCase().includes(query.toLowerCase());
  }) : options;
  var slice = filtered.length > limit;
  var transformedItems = React.useMemo(function () {
    if (!reactSdkUtils.isSSR() && pinSelected) {
      setLastFocusedControl("" + document.activeElement.value);
    }

    var list = filtered;

    if (pinSelected) {
      list = pinItems(list, selected, 'label');
    }

    return list;
  }, [JSON.stringify(filtered), JSON.stringify(selected), pinSelected]);
  var items = slice ? transformedItems.slice(0, shown) : transformedItems;
  var allShown = shown >= filtered.length;
  var Icon = allShown ? SvgSmallChevronUp : SvgSmallChevronDown;
  var showMore = React.useCallback(function () {
    if (allShown) {
      setShown(limit);
    } else {
      setShown(function (s) {
        return s + 20;
      });
    }
  }, [allShown]);
  var innerList = React.useMemo(function () {
    return items.map(function (_ref) {
      var label = _ref.label,
          count = _ref.count;
      return jsxRuntime.jsxs(reactComponents.Box, {
        css: styles.innerList,
        children: [jsxRuntime.jsx(Control, {
          value: label,
          checked: selected.includes(label),
          onChange: reactSdkUtils.noop,
          css: styles.checkbox,
          disableDefaultStyles: disableDefaultStyles,
          children: typeof itemRender === 'function' ? itemRender(label) : formatLabel(label, {
            format: format,
            currency: currency,
            t: t
          })
        }), jsxRuntime.jsx("span", {
          css: styles.count,
          children: count.toLocaleString(language)
        })]
      }, label + "-" + count);
    });
  }, [JSON.stringify(items), itemRender, selected]);
  var filterSearchOnChange = React.useCallback(function (value) {
    setQuery(value || '');
  }, []);

  if (reactSdkUtils.isEmpty(options) && reactSdkUtils.isEmpty(selected)) {
    return null;
  }

  return jsxRuntime.jsxs(Box, {
    title: title,
    name: name,
    showReset: selected.length > 0 && multi,
    onReset: reset,
    children: [searchable ? jsxRuntime.jsx(reactComponents.Box, {
      css: styles.searchWrapper,
      children: jsxRuntime.jsx(reactComponents.Combobox, {
        value: query,
        size: "sm",
        className: (_customClassNames$fil = customClassNames.filter) == null ? void 0 : (_customClassNames$fil2 = _customClassNames$fil.list) == null ? void 0 : _customClassNames$fil2.searchFilter,
        placeholder: placeholder,
        onChange: filterSearchOnChange,
        disableDefaultStyles: disableDefaultStyles
      })
    }) : null, jsxRuntime.jsx(reactComponents.Box, {
      id: filterContainerId,
      className: (_customClassNames$fil3 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil4 = _customClassNames$fil3.list) == null ? void 0 : _customClassNames$fil4.container,
      children: multi ? jsxRuntime.jsx(reactComponents.CheckboxGroup, {
        value: selected,
        onChange: setSelected,
        className: (_customClassNames$fil5 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil6 = _customClassNames$fil5.list) == null ? void 0 : _customClassNames$fil6.checkboxGroup,
        disableDefaultStyles: disableDefaultStyles,
        "aria-labelledby": getHeaderId(name),
        children: innerList
      }) : jsxRuntime.jsx(reactComponents.RadioGroup, {
        value: selected[0],
        onChange: function onChange(e) {
          return setSelected([e.target.value]);
        },
        className: (_customClassNames$fil7 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil8 = _customClassNames$fil7.list) == null ? void 0 : _customClassNames$fil8.radioGroup,
        disableDefaultStyles: disableDefaultStyles,
        "aria-labelledby": getHeaderId(name),
        children: innerList
      })
    }), slice ? jsxRuntime.jsx(reactComponents.Box, {
      css: styles.toggleButtonWrapper,
      children: jsxRuntime.jsxs(reactComponents.Button, {
        appearance: "link",
        onClick: showMore,
        "aria-controls": filterContainerId,
        size: "sm",
        spacing: "none",
        className: (_customClassNames$fil9 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil10 = _customClassNames$fil9.list) == null ? void 0 : _customClassNames$fil10.toggleButton,
        disableDefaultStyles: disableDefaultStyles,
        children: [t(allShown ? 'showLess' : 'showMore'), jsxRuntime.jsx(Icon, {
          css: styles.toggleIcon
        })]
      })
    }) : null]
  });
};

var RangeFilter = function RangeFilter(props) {
  var _customClassNames$fil, _customClassNames$fil2, _customClassNames$fil3, _customClassNames$fil4, _customClassNames$fil5, _customClassNames$fil6, _customClassNames$fil7, _customClassNames$fil8, _customClassNames$fil9, _customClassNames$fil10, _customClassNames$fil11, _customClassNames$fil12;

  var name = props.name,
      title = props.title,
      format = props.format,
      showInputs = props.showInputs,
      steps = props.steps,
      tick = props.tick,
      ticks = props.ticks;

  var _useRangeFilter = reactHooks.useRangeFilter(name),
      min = _useRangeFilter.min,
      max = _useRangeFilter.max,
      range = _useRangeFilter.range,
      setRange = _useRangeFilter.setRange,
      reset = _useRangeFilter.reset,
      showReset = _useRangeFilter.showReset,
      step = _useRangeFilter.step;

  var _useSearchUIContext = useSearchUIContext(),
      _useSearchUIContext$d = _useSearchUIContext.disableDefaultStyles,
      disableDefaultStyles = _useSearchUIContext$d === void 0 ? false : _useSearchUIContext$d,
      customClassNames = _useSearchUIContext.customClassNames,
      currency = _useSearchUIContext.currency,
      language = _useSearchUIContext.language;

  if (!range || max === 0) {
    return null;
  }

  return jsxRuntime.jsx(Box, {
    title: title,
    name: name,
    showReset: showReset,
    onReset: reset,
    children: jsxRuntime.jsx(reactComponents.RangeInput, {
      language: language,
      format: format,
      currency: currency,
      min: min,
      max: max,
      value: range,
      step: step,
      steps: steps,
      tick: tick,
      ticks: ticks,
      showInputs: showInputs,
      onChange: setRange,
      disableDefaultStyles: disableDefaultStyles,
      className: (_customClassNames$fil = customClassNames.filter) == null ? void 0 : (_customClassNames$fil2 = _customClassNames$fil.range) == null ? void 0 : _customClassNames$fil2.container,
      fillClassName: (_customClassNames$fil3 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil4 = _customClassNames$fil3.range) == null ? void 0 : _customClassNames$fil4.fill,
      handleClassName: (_customClassNames$fil5 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil6 = _customClassNames$fil5.range) == null ? void 0 : _customClassNames$fil6.handle,
      handleActiveClassName: (_customClassNames$fil7 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil8 = _customClassNames$fil7.range) == null ? void 0 : _customClassNames$fil8.handleActive,
      inputClassName: (_customClassNames$fil9 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil10 = _customClassNames$fil9.range) == null ? void 0 : _customClassNames$fil10.input,
      trackClassName: (_customClassNames$fil11 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil12 = _customClassNames$fil11.range) == null ? void 0 : _customClassNames$fil12.track,
      "aria-labelledby": getHeaderId(name)
    })
  });
};

var RatingFilter = function RatingFilter(_ref) {
  var _customClassNames$fil7;

  var name = _ref.name,
      title = _ref.title;

  var _useSearchUIContext = useSearchUIContext(),
      ratingMax = _useSearchUIContext.ratingMax,
      disableDefaultStyles = _useSearchUIContext.disableDefaultStyles,
      customClassNames = _useSearchUIContext.customClassNames;

  var renderRating = React.useCallback(function (v) {
    var _customClassNames$fil, _customClassNames$fil2, _customClassNames$fil3, _customClassNames$fil4, _customClassNames$fil5, _customClassNames$fil6;

    return jsxRuntime.jsx(reactComponents.Rating, {
      max: ratingMax,
      className: (_customClassNames$fil = customClassNames.filter) == null ? void 0 : (_customClassNames$fil2 = _customClassNames$fil.rating) == null ? void 0 : _customClassNames$fil2.container,
      activeRatingItemClassName: (_customClassNames$fil3 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil4 = _customClassNames$fil3.rating) == null ? void 0 : _customClassNames$fil4.activeRatingItem,
      activeHalfRatingItemClassName: (_customClassNames$fil5 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil6 = _customClassNames$fil5.rating) == null ? void 0 : _customClassNames$fil6.activeHalfRatingItem,
      value: Number(v),
      disableDefaultStyles: disableDefaultStyles
    });
  }, [ratingMax, JSON.stringify((_customClassNames$fil7 = customClassNames.filter) == null ? void 0 : _customClassNames$fil7.rating), disableDefaultStyles]);
  return jsxRuntime.jsx(ListFilter, {
    name: name,
    title: title,
    sort: "none",
    pinSelected: false,
    itemRender: renderRating
  });
};

var SelectFilter = function SelectFilter(props) {
  var _customClassNames$fil, _customClassNames$fil2, _customClassNames$fil3, _customClassNames$fil4, _customClassNames$fil5, _customClassNames$fil6, _customClassNames$fil7, _customClassNames$fil8;

  var name = props.name,
      title = props.title,
      _props$sort = props.sort,
      sort = _props$sort === void 0 ? 'count' : _props$sort,
      _props$sortAscending = props.sortAscending,
      sortAscending = _props$sortAscending === void 0 ? sort !== 'count' : _props$sortAscending,
      format = props.format;

  var _useFilter = reactHooks.useFilter(name, {
    sort: sort,
    sortAscending: sortAscending
  }),
      options = _useFilter.options,
      reset = _useFilter.reset,
      setSelected = _useFilter.setSelected,
      selected = _useFilter.selected,
      multi = _useFilter.multi;

  var _useSearchUIContext = useSearchUIContext(),
      _useSearchUIContext$d = _useSearchUIContext.disableDefaultStyles,
      disableDefaultStyles = _useSearchUIContext$d === void 0 ? false : _useSearchUIContext$d,
      customClassNames = _useSearchUIContext.customClassNames,
      currency = _useSearchUIContext.currency;

  var _useTranslation = reactI18next.useTranslation('filter'),
      t = _useTranslation.t;

  if (reactSdkUtils.isEmpty(options) && reactSdkUtils.isEmpty(selected)) {
    return null;
  }

  var getSelectText = function getSelectText(labels) {
    if (!labels.length) {
      return t('select');
    }

    if (labels.length === 1) {
      var first = labels[0];
      return first;
    }

    return t('selected', {
      count: labels.length.toLocaleString()
    });
  };

  return jsxRuntime.jsx(Box, {
    title: title,
    name: name,
    showReset: selected.length > 0 && multi,
    onReset: reset,
    children: !reactSdkUtils.isEmpty(options) && jsxRuntime.jsx(reactComponents.Select, {
      multiple: multi,
      onChange: function onChange(value) {
        return setSelected(reactSdkUtils.isArray(value) ? value : [value]);
      },
      value: selected,
      disableDefaultStyles: disableDefaultStyles,
      size: "sm",
      text: getSelectText,
      className: (_customClassNames$fil = customClassNames.filter) == null ? void 0 : (_customClassNames$fil2 = _customClassNames$fil.select) == null ? void 0 : _customClassNames$fil2.container,
      buttonClassName: (_customClassNames$fil3 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil4 = _customClassNames$fil3.select) == null ? void 0 : _customClassNames$fil4.button,
      dropdownClassName: (_customClassNames$fil5 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil6 = _customClassNames$fil5.select) == null ? void 0 : _customClassNames$fil6.dropdown,
      optionClassName: (_customClassNames$fil7 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil8 = _customClassNames$fil7.select) == null ? void 0 : _customClassNames$fil8.option,
      children: options.map(function (_ref) {
        var value = _ref.value,
            label = _ref.label,
            count = _ref.count;
        return jsxRuntime.jsx(reactComponents.Option, {
          value: label,
          label: count.toLocaleString(),
          children: formatLabel(label, {
            format: format,
            currency: currency,
            t: t
          })
        }, value);
      })
    })
  });
};

var TabFilter = function TabFilter(props) {
  var _customClassNames$fil, _customClassNames$fil2, _customClassNames$fil3, _customClassNames$fil4, _customClassNames$fil5, _customClassNames$fil6, _customClassNames$fil7, _customClassNames$fil8;

  var name = props.name,
      title = props.title,
      _props$limit = props.limit,
      limit = _props$limit === void 0 ? 15 : _props$limit,
      _props$sort = props.sort,
      sort = _props$sort === void 0 ? 'count' : _props$sort,
      _props$sortAscending = props.sortAscending,
      sortAscending = _props$sortAscending === void 0 ? sort !== 'count' : _props$sortAscending,
      format = props.format;

  var _useTranslation = reactI18next.useTranslation('filter'),
      t = _useTranslation.t;

  var theme = reactSdkUtils.useTheme();

  var _useFilter = reactHooks.useFilter(name, {
    sort: sort,
    sortAscending: sortAscending
  }),
      options = _useFilter.options,
      setSelected = _useFilter.setSelected,
      selected = _useFilter.selected;

  var sliced = limit && options.length > limit ? options.slice(0, limit) : options;

  var _useSearchUIContext = useSearchUIContext(),
      _useSearchUIContext$d = _useSearchUIContext.disableDefaultStyles,
      disableDefaultStyles = _useSearchUIContext$d === void 0 ? false : _useSearchUIContext$d,
      customClassNames = _useSearchUIContext.customClassNames,
      currency = _useSearchUIContext.currency,
      language = _useSearchUIContext.language;

  if (reactSdkUtils.isEmpty(sliced)) {
    return null;
  }

  var selectedIndex = sliced.findIndex(function (_ref) {
    var label = _ref.label;
    return label === selected[0];
  });
  return jsxRuntime.jsx(reactComponents.Tabs, {
    "aria-label": title,
    onChange: function onChange(index) {
      return setSelected(index !== 0 ? [sliced[index - 1].label] : []);
    },
    index: selectedIndex < 0 ? 0 : selectedIndex + 1,
    disableDefaultStyles: disableDefaultStyles,
    className: (_customClassNames$fil = customClassNames.filter) == null ? void 0 : (_customClassNames$fil2 = _customClassNames$fil.tabs) == null ? void 0 : _customClassNames$fil2.container,
    children: jsxRuntime.jsxs(reactComponents.TabList, {
      className: (_customClassNames$fil3 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil4 = _customClassNames$fil3.tabs) == null ? void 0 : _customClassNames$fil4.list,
      children: [jsxRuntime.jsx(reactComponents.Tab, {
        className: (_customClassNames$fil5 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil6 = _customClassNames$fil5.tabs) == null ? void 0 : _customClassNames$fil6.tab,
        selectedClassName: (_customClassNames$fil7 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil8 = _customClassNames$fil7.tabs) == null ? void 0 : _customClassNames$fil8.selectedTab,
        children: t('all')
      }), sliced.map(function (_ref2, index) {
        var _customClassNames$fil9, _customClassNames$fil10, _customClassNames$fil11, _customClassNames$fil12;

        var label = _ref2.label,
            count = _ref2.count,
            value = _ref2.value;
        return jsxRuntime.jsxs(reactComponents.Tab, {
          className: (_customClassNames$fil9 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil10 = _customClassNames$fil9.tabs) == null ? void 0 : _customClassNames$fil10.tab,
          selectedClassName: (_customClassNames$fil11 = customClassNames.filter) == null ? void 0 : (_customClassNames$fil12 = _customClassNames$fil11.tabs) == null ? void 0 : _customClassNames$fil12.selectedTab,
          children: ["" + formatLabel(label, {
            format: format,
            currency: currency,
            t: t
          }), jsxRuntime.jsx(reactComponents.Box, {
            as: "span",
            css: /*#__PURE__*/_css([{
              "paddingTop": "0.125rem",
              "paddingBottom": "0.125rem",
              "paddingLeft": "0.25rem",
              "paddingRight": "0.25rem",
              "borderRadius": "0.25rem",
              "marginLeft": "0.75rem",
              "fontSize": "0.75rem",
              "lineHeight": "1.25",
              "transitionProperty": "background-color, border-color, color, fill, stroke"
            }, index === selectedIndex ? {
              backgroundColor: theme.color.primary.active,
              color: theme.color.primary.text
            } : {
              "--text-opacity": "1",
              "color": "rgba(107, 114, 128, var(--text-opacity))",
              "--bg-opacity": "1",
              "backgroundColor": "rgba(244, 245, 247, var(--bg-opacity))"
            }], ";label:TabFilter;" + ( "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRhYkZpbHRlci50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMEIyQiIsImZpbGUiOiJUYWJGaWx0ZXIudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm94LCBUYWIsIFRhYkxpc3QsIFRhYnMgfSBmcm9tICdAc2FqYXJpL3JlYWN0LWNvbXBvbmVudHMnO1xyXG5pbXBvcnQgeyB1c2VGaWx0ZXIgfSBmcm9tICdAc2FqYXJpL3JlYWN0LWhvb2tzJztcclxuaW1wb3J0IHsgaXNFbXB0eSwgdXNlVGhlbWUgfSBmcm9tICdAc2FqYXJpL3JlYWN0LXNkay11dGlscyc7XHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0JztcclxuaW1wb3J0IHR3IGZyb20gJ3R3aW4ubWFjcm8nO1xyXG5pbXBvcnQgeyB1c2VTZWFyY2hVSUNvbnRleHQgfSBmcm9tICcuLi9Db250ZXh0UHJvdmlkZXInO1xyXG5pbXBvcnQgeyBmb3JtYXRMYWJlbCB9IGZyb20gJy4vdXRpbHMnO1xyXG5jb25zdCBUYWJGaWx0ZXIgPSAocHJvcHMpID0+IHtcclxuICAgIGNvbnN0IHsgbmFtZSwgdGl0bGUsIGxpbWl0ID0gMTUsIHNvcnQgPSAnY291bnQnLCBzb3J0QXNjZW5kaW5nID0gc29ydCAhPT0gJ2NvdW50JywgZm9ybWF0IH0gPSBwcm9wcztcclxuICAgIGNvbnN0IHsgdCB9ID0gdXNlVHJhbnNsYXRpb24oJ2ZpbHRlcicpO1xyXG4gICAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZSgpO1xyXG4gICAgY29uc3QgeyBvcHRpb25zLCBzZXRTZWxlY3RlZCwgc2VsZWN0ZWQgfSA9IHVzZUZpbHRlcihuYW1lLCB7IHNvcnQsIHNvcnRBc2NlbmRpbmcgfSk7XHJcbiAgICBjb25zdCBzbGljZWQgPSBsaW1pdCAmJiBvcHRpb25zLmxlbmd0aCA+IGxpbWl0ID8gb3B0aW9ucy5zbGljZSgwLCBsaW1pdCkgOiBvcHRpb25zO1xyXG4gICAgY29uc3QgeyBkaXNhYmxlRGVmYXVsdFN0eWxlcyA9IGZhbHNlLCBjdXN0b21DbGFzc05hbWVzLCBjdXJyZW5jeSwgbGFuZ3VhZ2UgfSA9IHVzZVNlYXJjaFVJQ29udGV4dCgpO1xyXG4gICAgaWYgKGlzRW1wdHkoc2xpY2VkKSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc2VsZWN0ZWRJbmRleCA9IHNsaWNlZC5maW5kSW5kZXgoKHsgbGFiZWwgfSkgPT4gbGFiZWwgPT09IHNlbGVjdGVkWzBdKTtcclxuICAgIHJldHVybiAoPFRhYnMgYXJpYS1sYWJlbD17dGl0bGV9IG9uQ2hhbmdlPXsoaW5kZXgpID0+IHNldFNlbGVjdGVkKGluZGV4ICE9PSAwID8gW3NsaWNlZFtpbmRleCAtIDFdLmxhYmVsXSA6IFtdKX0gaW5kZXg9e3NlbGVjdGVkSW5kZXggPCAwID8gMCA6IHNlbGVjdGVkSW5kZXggKyAxfSBkaXNhYmxlRGVmYXVsdFN0eWxlcz17ZGlzYWJsZURlZmF1bHRTdHlsZXN9IGNsYXNzTmFtZT17Y3VzdG9tQ2xhc3NOYW1lcy5maWx0ZXI/LnRhYnM/LmNvbnRhaW5lcn0+XG4gICAgICA8VGFiTGlzdCBjbGFzc05hbWU9e2N1c3RvbUNsYXNzTmFtZXMuZmlsdGVyPy50YWJzPy5saXN0fT5cbiAgICAgICAgPFRhYiBjbGFzc05hbWU9e2N1c3RvbUNsYXNzTmFtZXMuZmlsdGVyPy50YWJzPy50YWJ9IHNlbGVjdGVkQ2xhc3NOYW1lPXtjdXN0b21DbGFzc05hbWVzLmZpbHRlcj8udGFicz8uc2VsZWN0ZWRUYWJ9PlxuICAgICAgICAgIHt0KCdhbGwnKX1cbiAgICAgICAgPC9UYWI+XG4gICAgICAgIHtzbGljZWQubWFwKCh7IGxhYmVsLCBjb3VudCwgdmFsdWUgfSwgaW5kZXgpID0+ICg8VGFiIGtleT17dmFsdWV9IGNsYXNzTmFtZT17Y3VzdG9tQ2xhc3NOYW1lcy5maWx0ZXI/LnRhYnM/LnRhYn0gc2VsZWN0ZWRDbGFzc05hbWU9e2N1c3RvbUNsYXNzTmFtZXMuZmlsdGVyPy50YWJzPy5zZWxlY3RlZFRhYn0+XG4gICAgICAgICAgICB7YCR7Zm9ybWF0TGFiZWwobGFiZWwsIHsgZm9ybWF0LCBjdXJyZW5jeSwgdCB9KX1gfVxuICAgICAgICAgICAgPEJveCBhcz1cInNwYW5cIiBjc3M9e1tcclxuICAgICAgICB0dyBgcHktMC41IHB4LTEgcm91bmRlZCBtbC0zIHRleHQteHMgbGVhZGluZy10aWdodCB0cmFuc2l0aW9uLWNvbG9yc2AsXHJcbiAgICAgICAgaW5kZXggPT09IHNlbGVjdGVkSW5kZXhcclxuICAgICAgICAgICAgPyB7IGJhY2tncm91bmRDb2xvcjogdGhlbWUuY29sb3IucHJpbWFyeS5hY3RpdmUsIGNvbG9yOiB0aGVtZS5jb2xvci5wcmltYXJ5LnRleHQgfVxyXG4gICAgICAgICAgICA6IHR3IGB0ZXh0LWdyYXktNTAwIGJnLWdyYXktMTAwYCxcclxuICAgIF19PlxuICAgICAgICAgICAgICB7Y291bnQudG9Mb2NhbGVTdHJpbmcobGFuZ3VhZ2UpfVxuICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgPC9UYWI+KSl9XG4gICAgICA8L1RhYkxpc3Q+XG4gICAgPC9UYWJzPik7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFRhYkZpbHRlcjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGFiRmlsdGVyLmpzeC5tYXAiXX0= */")),
            children: count.toLocaleString(language)
          })]
        }, value);
      })]
    })
  });
};

var Filter = function Filter(_ref) {
  var _ref$type = _ref.type,
      type = _ref$type === void 0 ? 'list' : _ref$type,
      rest = _objectWithoutPropertiesLoose(_ref, ["type"]);

  if (type === 'color') {
    return jsxRuntime.jsx(ColorFilter, _extends({}, rest));
  }

  if (type === 'range') {
    return jsxRuntime.jsx(RangeFilter, _extends({}, rest));
  }

  if (type === 'rating') {
    return jsxRuntime.jsx(RatingFilter, _extends({}, rest));
  }

  if (type === 'select') {
    return jsxRuntime.jsx(SelectFilter, _extends({}, rest));
  }

  if (type === 'tabs') {
    return jsxRuntime.jsx(TabFilter, _extends({}, rest));
  }

  return jsxRuntime.jsx(ListFilter, _extends({}, rest));
};

function useClickTracking(params) {
  var onClick = params.onClick,
      token = params.token,
      tracking = params.tracking,
      values = params.values;
  var url = values.url;

  if (!tracking) {
    return {
      href: url,
      onClick: reactSdkUtils.noop
    };
  }

  var clickToken = token && 'click' in token ? token.click : undefined;
  var useToken = !reactSdkUtils.isEmpty(clickToken) && Object.keys(values).includes(tracking.field) && reactSdkUtils.isValidURL(values[tracking.field]);
  var href = useToken ? clickToken : url;

  var onClickHandler = function onClickHandler() {
    var _navigator;

    if (reactSdkUtils.isFunction(onClick)) {
      onClick(url);
    }

    if (!useToken && reactSdkUtils.isString(clickToken) && reactSdkUtils.isFunction((_navigator = navigator) == null ? void 0 : _navigator.sendBeacon)) {
      navigator.sendBeacon(clickToken);
    }
  };

  return {
    href: href,
    onClick: onClickHandler
  };
}

var fillTemplate = function fillTemplate(template, variables) {
  return template.replace(/\${(.*?)}/g, function (_, g) {
    return variables[g].toString();
  });
};

function mapFields(values, fields) {
  if (fields === void 0) {
    fields = {};
  }

  return Object.entries(fields).reduce(function (mapped, _ref) {
    var _extends2;

    var to = _ref[0],
        from = _ref[1];
    var value;

    if (from === false) {
      value = null;
    } else if (Array.isArray(from)) {
      var match = from.find(function (f) {
        return Object.keys(values).includes(f);
      });
      value = values[match];
    } else if (typeof from === 'function') {
      value = from(values);
    } else if (/\${.+}/.test(from)) {
      value = fillTemplate(from, values);
    } else if (from.startsWith('!function')) {
      var functionBody = from.replace('!function', '');
      var func = new Function('data', functionBody);
      value = func(values);
    } else {
      value = values[from];
    }

    return _extends({}, mapped, (_extends2 = {}, _extends2[to] = value, _extends2));
  }, _extends({}, values));
}
function mapResultFields(results, fields) {
  return results.map(function (_ref2) {
    var values = _ref2.values,
        rest = _objectWithoutPropertiesLoose(_ref2, ["values"]);

    return _extends({}, rest, {
      values: mapFields(values, fields)
    });
  });
}

var Input = /*#__PURE__*/React__default.forwardRef(function (props, ref) {
  var _customClassNames$inp, _customClassNames$inp2, _customClassNames$inp3, _customClassNames$inp4, _customClassNames$inp5, _customClassNames$inp6, _customClassNames$inp7, _customClassNames$inp8, _customClassNames$inp9, _customClassNames$inp10, _customClassNames$inp11, _customClassNames$inp12, _customClassNames$inp13, _customClassNames$inp14, _customClassNames$inp15;

  var _useTranslation = reactI18next.useTranslation('input'),
      t = _useTranslation.t;

  var _props$placeholder = props.placeholder,
      placeholder = _props$placeholder === void 0 ? t('placeholder') : _props$placeholder,
      _props$mode = props.mode,
      mode = _props$mode === void 0 ? 'instant' : _props$mode,
      onSelect = props.onSelect,
      onChange = props.onChange,
      rest = _objectWithoutPropertiesLoose(props, ["placeholder", "mode", "onSelect", "onChange"]);

  var _useSearchContext = reactHooks.useSearchContext(),
      rawResults = _useSearchContext.results,
      search = _useSearchContext.search,
      searching = _useSearchContext.searching,
      fields = _useSearchContext.fields;

  var results = React__default.useMemo(function () {
    return mapResultFields(rawResults != null ? rawResults : [], fields);
  }, [rawResults]);

  var _useAutocomplete = reactHooks.useAutocomplete(),
      searchAutocomplete = _useAutocomplete.search,
      completion = _useAutocomplete.completion,
      suggestions = _useAutocomplete.suggestions;

  var _useSearchUIContext = useSearchUIContext(),
      customClassNames = _useSearchUIContext.customClassNames,
      _useSearchUIContext$d = _useSearchUIContext.disableDefaultStyles,
      disableDefaultStyles = _useSearchUIContext$d === void 0 ? false : _useSearchUIContext$d,
      tracking = _useSearchUIContext.tracking;

  var _useQuery = reactHooks.useQuery(),
      query = _useQuery.query;

  var items = [];

  if (mode === 'suggestions') {
    items = suggestions;
  } else if (mode === 'results') {
    items = results.splice(0, 5).map(function (result) {
      var values = result.values,
          token = result.token;
      var description = values.description,
          image = values.image,
          title = values.title;

      var _useClickTracking = useClickTracking({
        tracking: tracking,
        values: values,
        token: token
      }),
          href = _useClickTracking.href,
          onClick = _useClickTracking.onClick;

      return {
        title: title,
        url: href,
        onClick: onClick,
        description: description,
        image: reactSdkUtils.isArray(image) ? image[0] : image
      };
    });
  }

  var onChangeMemoized = React.useCallback(function (value) {
    if (onChange) {
      onChange(value);
    }

    if (mode === 'suggestions' || mode === 'typeahead') {
      if (searchAutocomplete) {
        searchAutocomplete(value);
      }
    } else if (mode === 'instant' || mode === 'results') {
      search(value);
    }
  }, [onChange, mode, search]);
  var onKeyDownMemoized = React.useCallback(function (e) {
    if (e.key === 'Enter' && (mode === 'typeahead' || mode === 'suggestions' || mode === 'standard')) {
      search(e.target.value);
    }
  }, [mode, search]);
  var onSelectMemoized = React.useCallback(function (item) {
    if (onSelect) {
      onSelect(item);
    }

    if (mode === 'suggestions') {
      search(item);
    }
  }, [mode, search]);
  return jsxRuntime.jsx(reactComponents.Combobox, _extends({}, rest, {
    ref: ref,
    placeholder: placeholder,
    mode: mode,
    items: items,
    completion: mode === 'typeahead' ? completion : '',
    value: query,
    loading: searching,
    onChange: onChangeMemoized,
    onKeyDown: onKeyDownMemoized,
    onSelect: onSelectMemoized,
    className: (_customClassNames$inp = customClassNames.input) == null ? void 0 : _customClassNames$inp.container,
    dropdownClassName: (_customClassNames$inp2 = customClassNames.input) == null ? void 0 : _customClassNames$inp2.dropdown,
    dropdownFooterClassName: (_customClassNames$inp3 = customClassNames.input) == null ? void 0 : _customClassNames$inp3.dropdownFooter,
    dropdownHighlightItemClassName: (_customClassNames$inp4 = customClassNames.input) == null ? void 0 : _customClassNames$inp4.dropdownHighlightItem,
    dropdownSelectedItemClassName: (_customClassNames$inp5 = customClassNames.input) == null ? void 0 : _customClassNames$inp5.dropdownSelectedItem,
    dropdownItemClassName: (_customClassNames$inp6 = customClassNames.input) == null ? void 0 : _customClassNames$inp6.dropdownItem,
    dropdownListClassName: (_customClassNames$inp7 = customClassNames.input) == null ? void 0 : _customClassNames$inp7.dropdownList,
    inputClassName: (_customClassNames$inp8 = customClassNames.input) == null ? void 0 : _customClassNames$inp8.input,
    inputContainerClassName: (_customClassNames$inp9 = customClassNames.input) == null ? void 0 : _customClassNames$inp9.inputContainer,
    resultClassName: (_customClassNames$inp10 = customClassNames.input) == null ? void 0 : _customClassNames$inp10.result,
    resultImageContainerClassName: (_customClassNames$inp11 = customClassNames.input) == null ? void 0 : _customClassNames$inp11.resultImageContainer,
    resultTextContainerClassName: (_customClassNames$inp12 = customClassNames.input) == null ? void 0 : _customClassNames$inp12.resultTextContainer,
    selectedResultClassName: (_customClassNames$inp13 = customClassNames.input) == null ? void 0 : _customClassNames$inp13.selectedResult,
    typeaheadClassName: (_customClassNames$inp14 = customClassNames.input) == null ? void 0 : _customClassNames$inp14.typeahead,
    voiceInputClassName: (_customClassNames$inp15 = customClassNames.input) == null ? void 0 : _customClassNames$inp15.voiceInput,
    disableDefaultStyles: disableDefaultStyles
  }));
});

if (reactSdkUtils.__DEV__) {
  Input.displayName = 'Input';
}

var Pagination = function Pagination(props) {
  var _customClassNames$pag, _customClassNames$pag2, _customClassNames$pag3, _customClassNames$pag4, _customClassNames$pag5, _customClassNames$pag6, _customClassNames$pag7;

  var _useTranslation = reactI18next.useTranslation('pagination'),
      t = _useTranslation.t;

  var _usePagination = reactHooks.usePagination('search'),
      page = _usePagination.page,
      setPage = _usePagination.setPage,
      pageCount = _usePagination.pageCount,
      resultsPerPage = _usePagination.resultsPerPage,
      totalResults = _usePagination.totalResults;

  var _useSearchUIContext = useSearchUIContext(),
      customClassNames = _useSearchUIContext.customClassNames,
      disableDefaultStyles = _useSearchUIContext.disableDefaultStyles,
      language = _useSearchUIContext.language;

  return jsxRuntime.jsx(reactComponents.Pagination, _extends({
    language: language,
    page: page,
    resultsPerPage: resultsPerPage,
    totalResults: totalResults,
    pageCount: pageCount,
    onChange: setPage,
    i18n: {
      label: t('label'),
      previous: t('previous'),
      next: t('next'),
      page: function page(params) {
        return t('page', params);
      },
      current: function current(params) {
        return t('current', params);
      }
    },
    className: customClassNames == null ? void 0 : (_customClassNames$pag = customClassNames.pagination) == null ? void 0 : _customClassNames$pag.container,
    buttonClassName: customClassNames == null ? void 0 : (_customClassNames$pag2 = customClassNames.pagination) == null ? void 0 : _customClassNames$pag2.button,
    activeClassName: customClassNames == null ? void 0 : (_customClassNames$pag3 = customClassNames.pagination) == null ? void 0 : _customClassNames$pag3.active,
    prevClassName: customClassNames == null ? void 0 : (_customClassNames$pag4 = customClassNames.pagination) == null ? void 0 : _customClassNames$pag4.prev,
    nextClassName: customClassNames == null ? void 0 : (_customClassNames$pag5 = customClassNames.pagination) == null ? void 0 : _customClassNames$pag5.next,
    spacerEllipsisClassName: customClassNames == null ? void 0 : (_customClassNames$pag6 = customClassNames.pagination) == null ? void 0 : _customClassNames$pag6.spacerEllipsis,
    statusClassName: customClassNames == null ? void 0 : (_customClassNames$pag7 = customClassNames.pagination) == null ? void 0 : _customClassNames$pag7.status,
    disableDefaultStyles: disableDefaultStyles
  }, props));
};

if (reactSdkUtils.__DEV__) {
  Pagination.displayName = 'Pagination';
}

function useMessageStyles() {
  var styles = {
    container: [{
      "width": "100%",
      "paddingLeft": "1.5rem",
      "paddingRight": "1.5rem",
      "paddingTop": "5rem",
      "paddingBottom": "5rem",
      "textAlign": "center",
      "@media (min-width: 768px)": {
        "paddingTop": "10rem",
        "paddingBottom": "10rem",
        "paddingLeft": "3rem",
        "paddingRight": "3rem"
      }
    }],
    loadingWrapper: [{
      "--text-opacity": "1",
      "color": "rgba(107, 114, 128, var(--text-opacity))"
    }],
    loadingSpinner: [{
      "display": "inline-block",
      "width": "1.5rem",
      "height": "1.5rem"
    }],
    loadingText: [{
      "marginTop": "0.75rem"
    }],
    errorHeading: [{
      "--text-opacity": "1",
      "color": "rgba(240, 82, 82, var(--text-opacity))"
    }],
    errorText: [{
      "--text-opacity": "1",
      "color": "rgba(107, 114, 128, var(--text-opacity))"
    }],
    defaultText: [{
      "--text-opacity": "1",
      "color": "rgba(107, 114, 128, var(--text-opacity))"
    }]
  };
  return reactSdkUtils.mapStyles(styles);
}

var Message = function Message(props) {
  var title = props.title,
      body = props.body,
      appearance = props.appearance,
      stylesProp = props.styles,
      _props$disableDefault = props.disableDefaultStyles,
      disableDefaultStyles = _props$disableDefault === void 0 ? false : _props$disableDefault,
      rest = _objectWithoutPropertiesLoose(props, ["title", "body", "appearance", "styles", "disableDefaultStyles"]);

  var styles = reactSdkUtils.getStylesObject(useMessageStyles(), disableDefaultStyles);

  var render = function render() {
    switch (appearance) {
      case 'loading':
        return jsxRuntime.jsxs(reactComponents.Box, {
          css: styles.loadingWrapper,
          children: [jsxRuntime.jsx(reactComponents.Spinner, {
            css: styles.loadingSpinner,
            disableDefaultStyles: disableDefaultStyles
          }), title && jsxRuntime.jsx(reactComponents.Text, {
            css: styles.loadingText,
            disableDefaultStyles: disableDefaultStyles,
            children: title + "..."
          })]
        });

      case 'error':
        return jsxRuntime.jsxs(React.Fragment, {
          children: [jsxRuntime.jsx(reactComponents.Heading, {
            size: "3xl",
            css: styles.errorHeading,
            disableDefaultStyles: disableDefaultStyles,
            children: title
          }), body && jsxRuntime.jsx(reactComponents.Text, {
            css: styles.errorText,
            disableDefaultStyles: disableDefaultStyles,
            children: body
          })]
        });

      default:
      case 'default':
        return jsxRuntime.jsxs(React.Fragment, {
          children: [jsxRuntime.jsx(reactComponents.Heading, {
            size: "3xl",
            disableDefaultStyles: disableDefaultStyles,
            children: title
          }), body && jsxRuntime.jsx(reactComponents.Text, {
            css: styles.defaultText,
            disableDefaultStyles: disableDefaultStyles,
            dangerouslySetInnerHTML: {
              __html: body
            }
          })]
        });
    }
  };

  return jsxRuntime.jsx(reactComponents.Box, _extends({
    css: /*#__PURE__*/_css([styles.container, stylesProp], ";label:Message;" + ( "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFtQ2lCIiwiZmlsZSI6ImluZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJveCwgSGVhZGluZywgU3Bpbm5lciwgVGV4dCB9IGZyb20gJ0BzYWphcmkvcmVhY3QtY29tcG9uZW50cyc7XHJcbmltcG9ydCB7IGdldFN0eWxlc09iamVjdCB9IGZyb20gJ0BzYWphcmkvcmVhY3Qtc2RrLXV0aWxzJztcclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgdXNlTWVzc2FnZVN0eWxlcyBmcm9tICcuL3N0eWxlcyc7XHJcbmNvbnN0IE1lc3NhZ2UgPSAocHJvcHMpID0+IHtcclxuICAgIGNvbnN0IHsgdGl0bGUsIGJvZHksIGFwcGVhcmFuY2UsIHN0eWxlczogc3R5bGVzUHJvcCwgZGlzYWJsZURlZmF1bHRTdHlsZXMgPSBmYWxzZSwgLi4ucmVzdCB9ID0gcHJvcHM7XHJcbiAgICBjb25zdCBzdHlsZXMgPSBnZXRTdHlsZXNPYmplY3QodXNlTWVzc2FnZVN0eWxlcygpLCBkaXNhYmxlRGVmYXVsdFN0eWxlcyk7XHJcbiAgICBjb25zdCByZW5kZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgc3dpdGNoIChhcHBlYXJhbmNlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xvYWRpbmcnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICg8Qm94IGNzcz17c3R5bGVzLmxvYWRpbmdXcmFwcGVyfT5cbiAgICAgICAgICAgIDxTcGlubmVyIGNzcz17c3R5bGVzLmxvYWRpbmdTcGlubmVyfSBkaXNhYmxlRGVmYXVsdFN0eWxlcz17ZGlzYWJsZURlZmF1bHRTdHlsZXN9Lz5cbiAgICAgICAgICAgIHt0aXRsZSAmJiA8VGV4dCBjc3M9e3N0eWxlcy5sb2FkaW5nVGV4dH0gZGlzYWJsZURlZmF1bHRTdHlsZXM9e2Rpc2FibGVEZWZhdWx0U3R5bGVzfT57YCR7dGl0bGV9Li4uYH08L1RleHQ+fVxuICAgICAgICAgIDwvQm94Pik7XHJcbiAgICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgPEhlYWRpbmcgc2l6ZT1cIjN4bFwiIGNzcz17c3R5bGVzLmVycm9ySGVhZGluZ30gZGlzYWJsZURlZmF1bHRTdHlsZXM9e2Rpc2FibGVEZWZhdWx0U3R5bGVzfT5cbiAgICAgICAgICAgICAge3RpdGxlfVxuICAgICAgICAgICAgPC9IZWFkaW5nPlxuICAgICAgICAgICAge2JvZHkgJiYgKDxUZXh0IGNzcz17c3R5bGVzLmVycm9yVGV4dH0gZGlzYWJsZURlZmF1bHRTdHlsZXM9e2Rpc2FibGVEZWZhdWx0U3R5bGVzfT5cbiAgICAgICAgICAgICAgICB7Ym9keX1cbiAgICAgICAgICAgICAgPC9UZXh0Pil9XG4gICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD4pO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBjYXNlICdkZWZhdWx0JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgPEhlYWRpbmcgc2l6ZT1cIjN4bFwiIGRpc2FibGVEZWZhdWx0U3R5bGVzPXtkaXNhYmxlRGVmYXVsdFN0eWxlc30+XG4gICAgICAgICAgICAgIHt0aXRsZX1cbiAgICAgICAgICAgIDwvSGVhZGluZz5cbiAgICAgICAgICAgIHtib2R5ICYmICg8VGV4dCBjc3M9e3N0eWxlcy5kZWZhdWx0VGV4dH0gZGlzYWJsZURlZmF1bHRTdHlsZXM9e2Rpc2FibGVEZWZhdWx0U3R5bGVzfSBkYW5nZXJvdXNseVNldElubmVySFRNTD17e1xyXG4gICAgICAgICAgICAgICAgICAgIF9faHRtbDogYm9keSxcclxuICAgICAgICAgICAgICAgIH19Lz4pfVxuICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuICg8Qm94IGNzcz17W3N0eWxlcy5jb250YWluZXIsIHN0eWxlc1Byb3BdfSB7Li4ucmVzdH0+XG4gICAgICB7cmVuZGVyKCl9XG4gICAgPC9Cb3g+KTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgTWVzc2FnZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanN4Lm1hcCJdfQ== */"))
  }, rest, {
    children: render()
  }));
};

function useResultStyles(props) {
  var appearance = props.appearance,
      isOnSale = props.isOnSale;
  var styles = reactSdkUtils.inferStylesObjectKeys({
    container: [],
    imageContainer: [],
    image: [{
      "borderRadius": "0.375rem"
    }],
    content: [{
      "flex": "1 1 0%",
      "minWidth": "0"
    }],
    header: [{
      "display": "flex",
      "alignItems": "flex-start",
      "justifyContent": "space-between"
    }],
    title: [{
      "fontWeight": "500"
    }],
    subtitle: [{
      "fontSize": "0.75rem",
      "--text-opacity": "1",
      "color": "rgba(159, 166, 178, var(--text-opacity))"
    }],
    description: [{
      "marginTop": "0.25rem",
      "fontSize": "0.875rem",
      "--text-opacity": "1",
      "color": "rgba(107, 114, 128, var(--text-opacity))"
    }],
    rating: [{
      "marginTop": "0.25rem",
      "> :not(template) ~ :not(template)": {
        "--space-y-reverse": 0,
        "marginTop": "calc(0.25rem * calc(1 - var(--space-y-reverse)))",
        "marginBottom": "calc(0.25rem * var(--space-y-reverse))"
      },
      "textAlign": "center"
    }],
    priceContainer: [],
    price: [isOnSale ? {
      "fontWeight": "500",
      "--text-opacity": "1",
      "color": "rgba(240, 82, 82, var(--text-opacity))"
    } : ''],
    originalPrice: [{
      "fontSize": "0.75rem",
      "--text-opacity": "1",
      "color": "rgba(159, 166, 178, var(--text-opacity))",
      "textDecoration": "line-through"
    }]
  });

  switch (appearance) {
    case 'grid':
      styles.container.push({
        "textAlign": "center"
      });
      styles.imageContainer.push({
        "display": "block",
        "marginBottom": "1rem"
      });
      styles.priceContainer.push({
        "display": "flex",
        "alignItems": "baseline",
        "justifyContent": "center",
        "> :not(template) ~ :not(template)": {
          "--space-x-reverse": 0,
          "marginRight": "calc(0.25rem * var(--space-x-reverse))",
          "marginLeft": "calc(0.25rem * calc(1 - var(--space-x-reverse)))"
        }
      });
      break;

    default:
    case 'list':
      styles.container.push({
        "display": "flex",
        "alignItems": "center",
        "width": "100%"
      });
      styles.imageContainer.push({
        "width": "6rem",
        "marginRight": "1.5rem"
      });
      styles.priceContainer.push({
        "textAlign": "right"
      });
      break;
  }

  return reactSdkUtils.mapStyles(styles);
}

var Result = /*#__PURE__*/React__default.memo(function (props) {
  var _props$appearance = props.appearance,
      appearance = _props$appearance === void 0 ? 'list' : _props$appearance,
      _props$imageAspectRat = props.imageAspectRatio,
      imageAspectRatioProp = _props$imageAspectRat === void 0 ? 1 : _props$imageAspectRat,
      _props$imageObjectFit = props.imageObjectFit,
      imageObjectFitProp = _props$imageObjectFit === void 0 ? 'contain' : _props$imageObjectFit,
      values = props.values,
      token = props.token,
      forceImage = props.forceImage,
      headingClassName = props.headingClassName,
      priceClassName = props.priceClassName,
      originalPriceClassName = props.originalPriceClassName,
      subTitleClassName = props.subTitleClassName,
      ratingClassName = props.ratingClassName,
      descriptionClassName = props.descriptionClassName,
      _props$disableDefault = props.disableDefaultStyles,
      disableDefaultStyles = _props$disableDefault === void 0 ? false : _props$disableDefault,
      onClickProp = props.onClick,
      stylesProp = props.styles,
      rest = _objectWithoutPropertiesLoose(props, ["appearance", "imageAspectRatio", "imageObjectFit", "values", "token", "forceImage", "headingClassName", "priceClassName", "originalPriceClassName", "subTitleClassName", "ratingClassName", "descriptionClassName", "disableDefaultStyles", "onClick", "styles"]);

  var _useSearchUIContext = useSearchUIContext(),
      currency = _useSearchUIContext.currency,
      language = _useSearchUIContext.language,
      ratingMax = _useSearchUIContext.ratingMax,
      tracking = _useSearchUIContext.tracking;

  var _useClickTracking = useClickTracking({
    token: token,
    tracking: tracking,
    values: values,
    onClick: onClickProp
  }),
      href = _useClickTracking.href,
      onClick = _useClickTracking.onClick;

  var title = values.title,
      description = values.description,
      subtitle = values.subtitle,
      image = values.image,
      price = values.price,
      originalPrice = values.originalPrice;
  var rating = Number(values.rating);
  var isOnSale = React__default.useMemo(function () {
    if (!price || !originalPrice) {
      return false;
    }

    var parsePrices = function parsePrices(input) {
      return (reactSdkUtils.isArray(input) ? input : [input]).map(Number);
    };

    var prices = parsePrices(price);
    var originalPrices = parsePrices(originalPrice);

    if (originalPrices.length >= prices.length) {
      return prices.some(function (p, index) {
        return reactSdkUtils.isNumber(p) && reactSdkUtils.isNumber(originalPrices[index]) && p < originalPrices[index];
      });
    }

    if (originalPrices.length === 1 && prices.length > 1) {
      var original = originalPrices[0];

      if (!reactSdkUtils.isNumber(original)) {
        return false;
      }

      return prices.some(function (p) {
        return reactSdkUtils.isNumber(p) && p < original;
      });
    }

    return false;
  }, [JSON.stringify(price), JSON.stringify(originalPrice)]);
  var styles = reactSdkUtils.getStylesObject(useResultStyles(_extends({}, props, {
    appearance: appearance,
    isOnSale: isOnSale
  })), disableDefaultStyles);
  var imageAspectRatio = React.useMemo(function () {
    var aspectRatio = imageAspectRatioProp;

    if (reactSdkUtils.isNumber(aspectRatio) || aspectRatio === null) {
      return aspectRatio;
    }

    return aspectRatio[appearance];
  }, [appearance, imageAspectRatioProp]);
  var imageObjectFit = React.useMemo(function () {
    var objectFit = imageObjectFitProp;

    if (reactSdkUtils.isString(objectFit) || objectFit === null) {
      return objectFit;
    }

    return objectFit[appearance];
  }, [appearance, imageObjectFitProp]);
  var imageSrc = reactSdkUtils.isArray(image) ? image[0] : image;
  var imageHoverSrc = reactSdkUtils.isArray(image) ? image[1] : undefined;

  var renderTitle = function renderTitle() {
    return jsxRuntime.jsx(reactComponents.Heading, {
      as: "h1",
      size: "base",
      css: styles.title,
      className: headingClassName,
      children: jsxRuntime.jsx(reactComponents.Link, {
        href: href,
        onClick: onClick,
        children: reactSdkUtils.decodeHTML(title)
      })
    });
  };

  var renderSubtitle = function renderSubtitle() {
    if (!subtitle) return null;

    if (reactSdkUtils.isValidURL(subtitle)) {
      return jsxRuntime.jsx(reactComponents.Link, {
        href: href,
        onClick: onClick,
        css: styles.subtitle,
        disableDefaultStyles: disableDefaultStyles,
        className: subTitleClassName,
        children: subtitle
      });
    }

    return jsxRuntime.jsx(reactComponents.Text, {
      css: styles.subtitle,
      disableDefaultStyles: disableDefaultStyles,
      className: subTitleClassName,
      children: subtitle
    });
  };

  var renderPrice = function renderPrice() {
    if (!price) return null;
    return jsxRuntime.jsxs(reactComponents.Box, {
      css: styles.priceContainer,
      children: [jsxRuntime.jsx(reactComponents.Text, {
        css: styles.price,
        className: priceClassName,
        disableDefaultStyles: disableDefaultStyles,
        children: reactSdkUtils.formatPrice(price, {
          currency: currency,
          language: language
        })
      }), originalPrice && isOnSale && jsxRuntime.jsx(reactComponents.Text, {
        css: styles.originalPrice,
        className: originalPriceClassName,
        disableDefaultStyles: disableDefaultStyles,
        children: reactSdkUtils.formatPrice(reactSdkUtils.isArray(originalPrice) ? originalPrice.map(Number).filter(function (p) {
          return reactSdkUtils.isNumber(p) && p !== 0;
        }).map(String) : originalPrice, {
          currency: currency,
          language: language
        })
      })]
    });
  };

  return jsxRuntime.jsxs(reactComponents.Box, _extends({
    as: "article"
  }, rest, {
    css: /*#__PURE__*/_css([styles.container, stylesProp], ";label:Result;" + ( "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFzRndDIiwiZmlsZSI6ImluZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJveCwgSGVhZGluZywgSW1hZ2UsIExpbmssIFJhdGluZywgVGV4dCB9IGZyb20gJ0BzYWphcmkvcmVhY3QtY29tcG9uZW50cyc7XHJcbmltcG9ydCB7IF9fREVWX18sIGRlY29kZUhUTUwsIGZvcm1hdFByaWNlLCBnZXRTdHlsZXNPYmplY3QsIGlzQXJyYXksIGlzTnVtYmVyLCBpc1N0cmluZywgaXNWYWxpZFVSTCwgfSBmcm9tICdAc2FqYXJpL3JlYWN0LXNkay11dGlscyc7XHJcbmltcG9ydCBSZWFjdCwgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyB1c2VTZWFyY2hVSUNvbnRleHQgfSBmcm9tICcuLi8uLi8uLi9Db250ZXh0UHJvdmlkZXInO1xyXG5pbXBvcnQgeyB1c2VDbGlja1RyYWNraW5nIH0gZnJvbSAnLi4vLi4vLi4vaG9va3MnO1xyXG5pbXBvcnQgdXNlUmVzdWx0U3R5bGVzIGZyb20gJy4vc3R5bGVzJztcclxuY29uc3QgUmVzdWx0ID0gUmVhY3QubWVtbygocHJvcHMpID0+IHtcclxuICAgIGNvbnN0IHsgYXBwZWFyYW5jZSA9ICdsaXN0JywgaW1hZ2VBc3BlY3RSYXRpbzogaW1hZ2VBc3BlY3RSYXRpb1Byb3AgPSAxLCBpbWFnZU9iamVjdEZpdDogaW1hZ2VPYmplY3RGaXRQcm9wID0gJ2NvbnRhaW4nLCB2YWx1ZXMsIHRva2VuLCBmb3JjZUltYWdlLCBoZWFkaW5nQ2xhc3NOYW1lLCBwcmljZUNsYXNzTmFtZSwgb3JpZ2luYWxQcmljZUNsYXNzTmFtZSwgc3ViVGl0bGVDbGFzc05hbWUsIHJhdGluZ0NsYXNzTmFtZSwgZGVzY3JpcHRpb25DbGFzc05hbWUsIGRpc2FibGVEZWZhdWx0U3R5bGVzID0gZmFsc2UsIG9uQ2xpY2s6IG9uQ2xpY2tQcm9wLCBzdHlsZXM6IHN0eWxlc1Byb3AsIC4uLnJlc3QgfSA9IHByb3BzO1xyXG4gICAgY29uc3QgeyBjdXJyZW5jeSwgbGFuZ3VhZ2UsIHJhdGluZ01heCwgdHJhY2tpbmcgfSA9IHVzZVNlYXJjaFVJQ29udGV4dCgpO1xyXG4gICAgY29uc3QgeyBocmVmLCBvbkNsaWNrIH0gPSB1c2VDbGlja1RyYWNraW5nKHsgdG9rZW4sIHRyYWNraW5nLCB2YWx1ZXMsIG9uQ2xpY2s6IG9uQ2xpY2tQcm9wIH0pO1xyXG4gICAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIHN1YnRpdGxlLCBpbWFnZSwgcHJpY2UsIG9yaWdpbmFsUHJpY2UgfSA9IHZhbHVlcztcclxuICAgIGNvbnN0IHJhdGluZyA9IE51bWJlcih2YWx1ZXMucmF0aW5nKTtcclxuICAgIGNvbnN0IGlzT25TYWxlID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFwcmljZSB8fCAhb3JpZ2luYWxQcmljZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHBhcnNlUHJpY2VzID0gKGlucHV0KSA9PiAoaXNBcnJheShpbnB1dCkgPyBpbnB1dCA6IFtpbnB1dF0pLm1hcChOdW1iZXIpO1xyXG4gICAgICAgIGNvbnN0IHByaWNlcyA9IHBhcnNlUHJpY2VzKHByaWNlKTtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbFByaWNlcyA9IHBhcnNlUHJpY2VzKG9yaWdpbmFsUHJpY2UpO1xyXG4gICAgICAgIGlmIChvcmlnaW5hbFByaWNlcy5sZW5ndGggPj0gcHJpY2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJpY2VzLnNvbWUoKHAsIGluZGV4KSA9PiBpc051bWJlcihwKSAmJiBpc051bWJlcihvcmlnaW5hbFByaWNlc1tpbmRleF0pICYmIHAgPCBvcmlnaW5hbFByaWNlc1tpbmRleF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3JpZ2luYWxQcmljZXMubGVuZ3RoID09PSAxICYmIHByaWNlcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IFtvcmlnaW5hbF0gPSBvcmlnaW5hbFByaWNlcztcclxuICAgICAgICAgICAgaWYgKCFpc051bWJlcihvcmlnaW5hbCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcHJpY2VzLnNvbWUoKHApID0+IGlzTnVtYmVyKHApICYmIHAgPCBvcmlnaW5hbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sIFtKU09OLnN0cmluZ2lmeShwcmljZSksIEpTT04uc3RyaW5naWZ5KG9yaWdpbmFsUHJpY2UpXSk7XHJcbiAgICBjb25zdCBzdHlsZXMgPSBnZXRTdHlsZXNPYmplY3QodXNlUmVzdWx0U3R5bGVzKHsgLi4ucHJvcHMsIGFwcGVhcmFuY2UsIGlzT25TYWxlIH0pLCBkaXNhYmxlRGVmYXVsdFN0eWxlcyk7XHJcbiAgICBjb25zdCBpbWFnZUFzcGVjdFJhdGlvID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYXNwZWN0UmF0aW8gPSBpbWFnZUFzcGVjdFJhdGlvUHJvcDtcclxuICAgICAgICBpZiAoaXNOdW1iZXIoYXNwZWN0UmF0aW8pIHx8IGFzcGVjdFJhdGlvID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhc3BlY3RSYXRpbztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFzcGVjdFJhdGlvW2FwcGVhcmFuY2VdO1xyXG4gICAgfSwgW2FwcGVhcmFuY2UsIGltYWdlQXNwZWN0UmF0aW9Qcm9wXSk7XHJcbiAgICBjb25zdCBpbWFnZU9iamVjdEZpdCA9IHVzZU1lbW8oKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9iamVjdEZpdCA9IGltYWdlT2JqZWN0Rml0UHJvcDtcclxuICAgICAgICBpZiAoaXNTdHJpbmcob2JqZWN0Rml0KSB8fCBvYmplY3RGaXQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdEZpdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9iamVjdEZpdFthcHBlYXJhbmNlXTtcclxuICAgIH0sIFthcHBlYXJhbmNlLCBpbWFnZU9iamVjdEZpdFByb3BdKTtcclxuICAgIGNvbnN0IGltYWdlU3JjID0gaXNBcnJheShpbWFnZSkgPyBpbWFnZVswXSA6IGltYWdlO1xyXG4gICAgY29uc3QgaW1hZ2VIb3ZlclNyYyA9IGlzQXJyYXkoaW1hZ2UpID8gaW1hZ2VbMV0gOiB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCByZW5kZXJUaXRsZSA9ICgpID0+ICg8SGVhZGluZyBhcz1cImgxXCIgc2l6ZT1cImJhc2VcIiBjc3M9e3N0eWxlcy50aXRsZX0gY2xhc3NOYW1lPXtoZWFkaW5nQ2xhc3NOYW1lfT5cbiAgICAgICAgPExpbmsgaHJlZj17aHJlZn0gb25DbGljaz17b25DbGlja30+XG4gICAgICAgICAge2RlY29kZUhUTUwodGl0bGUpfVxuICAgICAgICA8L0xpbms+XG4gICAgICA8L0hlYWRpbmc+KTtcclxuICAgIGNvbnN0IHJlbmRlclN1YnRpdGxlID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICghc3VidGl0bGUpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIGlmIChpc1ZhbGlkVVJMKHN1YnRpdGxlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKDxMaW5rIGhyZWY9e2hyZWZ9IG9uQ2xpY2s9e29uQ2xpY2t9IGNzcz17c3R5bGVzLnN1YnRpdGxlfSBkaXNhYmxlRGVmYXVsdFN0eWxlcz17ZGlzYWJsZURlZmF1bHRTdHlsZXN9IGNsYXNzTmFtZT17c3ViVGl0bGVDbGFzc05hbWV9PlxuICAgICAgICAgICAge3N1YnRpdGxlfVxuICAgICAgICAgIDwvTGluaz4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKDxUZXh0IGNzcz17c3R5bGVzLnN1YnRpdGxlfSBkaXNhYmxlRGVmYXVsdFN0eWxlcz17ZGlzYWJsZURlZmF1bHRTdHlsZXN9IGNsYXNzTmFtZT17c3ViVGl0bGVDbGFzc05hbWV9PlxuICAgICAgICAgIHtzdWJ0aXRsZX1cbiAgICAgICAgPC9UZXh0Pik7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVuZGVyUHJpY2UgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFwcmljZSlcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgcmV0dXJuICg8Qm94IGNzcz17c3R5bGVzLnByaWNlQ29udGFpbmVyfT5cbiAgICAgICAgICA8VGV4dCBjc3M9e3N0eWxlcy5wcmljZX0gY2xhc3NOYW1lPXtwcmljZUNsYXNzTmFtZX0gZGlzYWJsZURlZmF1bHRTdHlsZXM9e2Rpc2FibGVEZWZhdWx0U3R5bGVzfT5cbiAgICAgICAgICAgIHtmb3JtYXRQcmljZShwcmljZSwgeyBjdXJyZW5jeSwgbGFuZ3VhZ2UgfSl9XG4gICAgICAgICAgPC9UZXh0PlxuXG4gICAgICAgICAge29yaWdpbmFsUHJpY2UgJiYgaXNPblNhbGUgJiYgKDxUZXh0IGNzcz17c3R5bGVzLm9yaWdpbmFsUHJpY2V9IGNsYXNzTmFtZT17b3JpZ2luYWxQcmljZUNsYXNzTmFtZX0gZGlzYWJsZURlZmF1bHRTdHlsZXM9e2Rpc2FibGVEZWZhdWx0U3R5bGVzfT5cbiAgICAgICAgICAgICAge2Zvcm1hdFByaWNlKGlzQXJyYXkob3JpZ2luYWxQcmljZSlcclxuICAgICAgICAgICAgPyBvcmlnaW5hbFByaWNlXHJcbiAgICAgICAgICAgICAgICAubWFwKE51bWJlcilcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKHApID0+IGlzTnVtYmVyKHApICYmIHAgIT09IDApXHJcbiAgICAgICAgICAgICAgICAubWFwKFN0cmluZylcclxuICAgICAgICAgICAgOiBvcmlnaW5hbFByaWNlLCB7XHJcbiAgICAgICAgICAgIGN1cnJlbmN5LFxyXG4gICAgICAgICAgICBsYW5ndWFnZSxcclxuICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvVGV4dD4pfVxuICAgICAgICA8L0JveD4pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiAoPEJveCBhcz1cImFydGljbGVcIiB7Li4ucmVzdH0gY3NzPXtbc3R5bGVzLmNvbnRhaW5lciwgc3R5bGVzUHJvcF19PlxuICAgICAgICB7KGlzVmFsaWRVUkwoaW1hZ2VTcmMsIHRydWUpIHx8IGZvcmNlSW1hZ2UpICYmICg8TGluayBocmVmPXtocmVmfSBvbkNsaWNrPXtvbkNsaWNrfSBvbkNvbnRleHRNZW51PXtvbkNsaWNrfSBjc3M9e3N0eWxlcy5pbWFnZUNvbnRhaW5lcn0gZGlzYWJsZURlZmF1bHRTdHlsZXM9e2Rpc2FibGVEZWZhdWx0U3R5bGVzfT5cbiAgICAgICAgICAgIDxJbWFnZSBzcmM9e2ltYWdlU3JjfSBob3ZlclNyYz17aW1hZ2VIb3ZlclNyY30gY3NzPXtzdHlsZXMuaW1hZ2V9IGFzcGVjdFJhdGlvPXtpbWFnZUFzcGVjdFJhdGlvfSBvYmplY3RGaXQ9e2ltYWdlT2JqZWN0Rml0fSBkaXNhYmxlRGVmYXVsdFN0eWxlcz17ZGlzYWJsZURlZmF1bHRTdHlsZXN9Lz5cbiAgICAgICAgICA8L0xpbms+KX1cblxuICAgICAgICA8Qm94IGNzcz17c3R5bGVzLmNvbnRlbnR9PlxuICAgICAgICAgIHthcHBlYXJhbmNlID09PSAnbGlzdCcgJiYgKDxCb3ggY3NzPXtzdHlsZXMuaGVhZGVyfT5cbiAgICAgICAgICAgICAgPEJveD5cbiAgICAgICAgICAgICAgICB7cmVuZGVyVGl0bGUoKX1cbiAgICAgICAgICAgICAgICB7cmVuZGVyU3VidGl0bGUoKX1cbiAgICAgICAgICAgICAgPC9Cb3g+XG5cbiAgICAgICAgICAgICAgPEJveD57cmVuZGVyUHJpY2UoKX08L0JveD5cbiAgICAgICAgICAgIDwvQm94Pil9XG5cbiAgICAgICAgICB7YXBwZWFyYW5jZSA9PT0gJ2dyaWQnICYmICg8PlxuICAgICAgICAgICAgICB7cmVuZGVyVGl0bGUoKX1cbiAgICAgICAgICAgICAge3JlbmRlclN1YnRpdGxlKCl9XG4gICAgICAgICAgICA8Lz4pfVxuXG4gICAgICAgICAge2lzTnVtYmVyKHJhdGluZykgJiYgKDxSYXRpbmcgdmFsdWU9e3JhdGluZ30gbWF4PXtyYXRpbmdNYXh9IGNsYXNzTmFtZT17cmF0aW5nQ2xhc3NOYW1lfSBkaXNhYmxlRGVmYXVsdFN0eWxlcz17ZGlzYWJsZURlZmF1bHRTdHlsZXN9Lz4pfVxuXG4gICAgICAgICAge2FwcGVhcmFuY2UgPT09ICdsaXN0JyAmJiBkZXNjcmlwdGlvbiAmJiAoPFRleHQgdHJ1bmNhdGU9ezJ9IGNzcz17c3R5bGVzLmRlc2NyaXB0aW9ufSBjbGFzc05hbWU9e2Rlc2NyaXB0aW9uQ2xhc3NOYW1lfT5cbiAgICAgICAgICAgICAge2RlY29kZUhUTUwoZGVzY3JpcHRpb24pfVxuICAgICAgICAgICAgPC9UZXh0Pil9XG5cbiAgICAgICAgICB7YXBwZWFyYW5jZSA9PT0gJ2dyaWQnICYmIHJlbmRlclByaWNlKCl9XG4gICAgICAgIDwvQm94PlxuICAgICAgPC9Cb3g+KTtcclxufSwgKHByZXYsIG5leHQpID0+IEpTT04uc3RyaW5naWZ5KHByZXYpID09PSBKU09OLnN0cmluZ2lmeShuZXh0KSk7XHJcbmlmIChfX0RFVl9fKSB7XHJcbiAgICBSZXN1bHQuZGlzcGxheU5hbWUgPSAnUmVzdWx0JztcclxufVxyXG5leHBvcnQgZGVmYXVsdCBSZXN1bHQ7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzeC5tYXAiXX0= */")),
    children: [(reactSdkUtils.isValidURL(imageSrc, true) || forceImage) && jsxRuntime.jsx(reactComponents.Link, {
      href: href,
      onClick: onClick,
      onContextMenu: onClick,
      css: styles.imageContainer,
      disableDefaultStyles: disableDefaultStyles,
      children: jsxRuntime.jsx(reactComponents.Image, {
        src: imageSrc,
        hoverSrc: imageHoverSrc,
        css: styles.image,
        aspectRatio: imageAspectRatio,
        objectFit: imageObjectFit,
        disableDefaultStyles: disableDefaultStyles
      })
    }), jsxRuntime.jsxs(reactComponents.Box, {
      css: styles.content,
      children: [appearance === 'list' && jsxRuntime.jsxs(reactComponents.Box, {
        css: styles.header,
        children: [jsxRuntime.jsxs(reactComponents.Box, {
          children: [renderTitle(), renderSubtitle()]
        }), jsxRuntime.jsx(reactComponents.Box, {
          children: renderPrice()
        })]
      }), appearance === 'grid' && jsxRuntime.jsxs(jsxRuntime.Fragment, {
        children: [renderTitle(), renderSubtitle()]
      }), reactSdkUtils.isNumber(rating) && jsxRuntime.jsx(reactComponents.Rating, {
        value: rating,
        max: ratingMax,
        className: ratingClassName,
        disableDefaultStyles: disableDefaultStyles
      }), appearance === 'list' && description && jsxRuntime.jsx(reactComponents.Text, {
        truncate: 2,
        css: styles.description,
        className: descriptionClassName,
        children: reactSdkUtils.decodeHTML(description)
      }), appearance === 'grid' && renderPrice()]
    })]
  }));
}, function (prev, next) {
  return JSON.stringify(prev) === JSON.stringify(next);
});

if (reactSdkUtils.__DEV__) {
  Result.displayName = 'Result';
}

function findBreakpoint(breakpoints, target) {
  var match = Object.keys(breakpoints).map(Number).sort(function (a, b) {
    return b - a;
  }).find(function (s) {
    return s <= target;
  });
  return match ? breakpoints[match] : null;
}

function useResultsStyles(_ref) {
  var _ref$appearance = _ref.appearance,
      appearance = _ref$appearance === void 0 ? 'list' : _ref$appearance,
      _ref$columnMinWidth = _ref.columnMinWidth,
      columnMinWidth = _ref$columnMinWidth === void 0 ? 240 : _ref$columnMinWidth,
      columnsProp = _ref.columns,
      _ref$gap = _ref.gap,
      gapProp = _ref$gap === void 0 ? appearance === 'list' ? {
    0: 4,
    640: 8
  } : undefined : _ref$gap,
      width = _ref.width;
  var styles = reactSdkUtils.inferStylesObjectKeys({
    container: []
  });

  if (appearance === 'list') {
    styles.container.push({
      "display": "flex",
      "flexDirection": "column"
    });
    var spaceY = 4;

    if (gapProp) {
      if (reactSdkUtils.isNumber(gapProp)) {
        spaceY = gapProp;
      } else if (reactSdkUtils.isObject(gapProp)) {
        var match = findBreakpoint(gapProp, width);

        if (match) {
          spaceY = match;
        }
      }

      switch (spaceY) {
        case 1:
          styles.container.push({
            "> :not(template) ~ :not(template)": {
              "--space-y-reverse": 0,
              "marginTop": "calc(0.25rem * calc(1 - var(--space-y-reverse)))",
              "marginBottom": "calc(0.25rem * var(--space-y-reverse))"
            }
          });
          break;

        case 2:
          styles.container.push({
            "> :not(template) ~ :not(template)": {
              "--space-y-reverse": 0,
              "marginTop": "calc(0.5rem * calc(1 - var(--space-y-reverse)))",
              "marginBottom": "calc(0.5rem * var(--space-y-reverse))"
            }
          });
          break;

        case 3:
          styles.container.push({
            "> :not(template) ~ :not(template)": {
              "--space-y-reverse": 0,
              "marginTop": "calc(0.75rem * calc(1 - var(--space-y-reverse)))",
              "marginBottom": "calc(0.75rem * var(--space-y-reverse))"
            }
          });
          break;

        case 4:
          styles.container.push({
            "> :not(template) ~ :not(template)": {
              "--space-y-reverse": 0,
              "marginTop": "calc(1rem * calc(1 - var(--space-y-reverse)))",
              "marginBottom": "calc(1rem * var(--space-y-reverse))"
            }
          });
          break;

        case 5:
          styles.container.push({
            "> :not(template) ~ :not(template)": {
              "--space-y-reverse": 0,
              "marginTop": "calc(1.25rem * calc(1 - var(--space-y-reverse)))",
              "marginBottom": "calc(1.25rem * var(--space-y-reverse))"
            }
          });
          break;

        case 6:
          styles.container.push({
            "> :not(template) ~ :not(template)": {
              "--space-y-reverse": 0,
              "marginTop": "calc(1.5rem * calc(1 - var(--space-y-reverse)))",
              "marginBottom": "calc(1.5rem * var(--space-y-reverse))"
            }
          });
          break;

        case 7:
          styles.container.push({
            "> :not(template) ~ :not(template)": {
              "--space-y-reverse": 0,
              "marginTop": "calc(1.75rem * calc(1 - var(--space-y-reverse)))",
              "marginBottom": "calc(1.75rem * var(--space-y-reverse))"
            }
          });
          break;

        case 8:
          styles.container.push({
            "> :not(template) ~ :not(template)": {
              "--space-y-reverse": 0,
              "marginTop": "calc(2rem * calc(1 - var(--space-y-reverse)))",
              "marginBottom": "calc(2rem * var(--space-y-reverse))"
            }
          });
          break;

        case 9:
          styles.container.push({
            "> :not(template) ~ :not(template)": {
              "--space-y-reverse": 0,
              "marginTop": "calc(2.25rem * calc(1 - var(--space-y-reverse)))",
              "marginBottom": "calc(2.25rem * var(--space-y-reverse))"
            }
          });
          break;

        case 10:
          styles.container.push({
            "> :not(template) ~ :not(template)": {
              "--space-y-reverse": 0,
              "marginTop": "calc(2.5rem * calc(1 - var(--space-y-reverse)))",
              "marginBottom": "calc(2.5rem * var(--space-y-reverse))"
            }
          });
          break;

        case 11:
          styles.container.push({
            "> :not(template) ~ :not(template)": {
              "--space-y-reverse": 0,
              "marginTop": "calc(2.75rem * calc(1 - var(--space-y-reverse)))",
              "marginBottom": "calc(2.75rem * var(--space-y-reverse))"
            }
          });
          break;

        case 12:
          styles.container.push({
            "> :not(template) ~ :not(template)": {
              "--space-y-reverse": 0,
              "marginTop": "calc(3rem * calc(1 - var(--space-y-reverse)))",
              "marginBottom": "calc(3rem * var(--space-y-reverse))"
            }
          });
          break;

        default:
          styles.container.push({
            "> :not(template) ~ :not(template)": {
              "--space-y-reverse": 0,
              "marginTop": "calc(1rem * calc(1 - var(--space-y-reverse)))",
              "marginBottom": "calc(1rem * var(--space-y-reverse))"
            }
          });
          break;
      }
    }
  } else if (appearance === 'grid') {
    styles.container.push({
      "display": "grid"
    });
    var columns = 1;
    var gap = 8;

    if (columnsProp) {
      if (reactSdkUtils.isNumber(columnsProp)) {
        columns = columnsProp;
      } else if (reactSdkUtils.isObject(columnsProp)) {
        var _match = findBreakpoint(columnsProp, width);

        if (_match) {
          columns = _match;
        }
      }
    } else if (reactSdkUtils.isNumber(columnMinWidth)) {
      columns = reactSdkUtils.clamp(Math.floor(width / columnMinWidth), 1, 12);
    }

    if (gapProp) {
      if (reactSdkUtils.isNumber(gapProp)) {
        gap = gapProp;
      } else if (reactSdkUtils.isObject(gapProp)) {
        var _match2 = findBreakpoint(gapProp, width);

        if (_match2) {
          gap = _match2;
        }
      }
    }

    switch (columns) {
      case 1:
        styles.container.push({
          "gridTemplateColumns": "repeat(1, minmax(0, 1fr))"
        });
        break;

      case 2:
        styles.container.push({
          "gridTemplateColumns": "repeat(2, minmax(0, 1fr))"
        });
        break;

      case 3:
        styles.container.push({
          "gridTemplateColumns": "repeat(3, minmax(0, 1fr))"
        });
        break;

      case 4:
        styles.container.push({
          "gridTemplateColumns": "repeat(4, minmax(0, 1fr))"
        });
        break;

      case 5:
        styles.container.push({
          "gridTemplateColumns": "repeat(5, minmax(0, 1fr))"
        });
        break;

      case 6:
        styles.container.push({
          "gridTemplateColumns": "repeat(6, minmax(0, 1fr))"
        });
        break;

      case 7:
        styles.container.push({
          "gridTemplateColumns": "repeat(7, minmax(0, 1fr))"
        });
        break;

      case 8:
        styles.container.push({
          "gridTemplateColumns": "repeat(8, minmax(0, 1fr))"
        });
        break;

      case 9:
        styles.container.push({
          "gridTemplateColumns": "repeat(9, minmax(0, 1fr))"
        });
        break;

      case 10:
        styles.container.push({
          "gridTemplateColumns": "repeat(10, minmax(0, 1fr))"
        });
        break;

      case 11:
        styles.container.push({
          "gridTemplateColumns": "repeat(11, minmax(0, 1fr))"
        });
        break;

      case 12:
        styles.container.push({
          "gridTemplateColumns": "repeat(12, minmax(0, 1fr))"
        });
        break;

      default:
        styles.container.push({
          "gridTemplateColumns": "repeat(1, minmax(0, 1fr))"
        });
        break;
    }

    switch (gap) {
      case 1:
        styles.container.push({
          "gap": "0.25rem"
        });
        break;

      case 2:
        styles.container.push({
          "gap": "0.5rem"
        });
        break;

      case 3:
        styles.container.push({
          "gap": "0.75rem"
        });
        break;

      case 4:
        styles.container.push({
          "gap": "1rem"
        });
        break;

      case 5:
        styles.container.push({
          "gap": "1.25rem"
        });
        break;

      case 6:
        styles.container.push({
          "gap": "1.5rem"
        });
        break;

      case 7:
        styles.container.push({
          "gap": "1.75rem"
        });
        break;

      case 8:
        styles.container.push({
          "gap": "2rem"
        });
        break;

      case 9:
        styles.container.push({
          "gap": "2.25rem"
        });
        break;

      case 10:
        styles.container.push({
          "gap": "2.5rem"
        });
        break;

      case 11:
        styles.container.push({
          "gap": "2.75rem"
        });
        break;

      case 12:
        styles.container.push({
          "gap": "3rem"
        });
        break;

      default:
        styles.container.push({
          "gap": "2rem"
        });
        break;
    }
  }

  return reactSdkUtils.mapStyles(styles);
}

var Results = function Results(props) {
  var _customClassNames$res5;

  var _useSearchContext = reactHooks.useSearchContext(),
      rawResults = _useSearchContext.results,
      searching = _useSearchContext.searching,
      fields = _useSearchContext.fields,
      error = _useSearchContext.error;

  var results = React.useMemo(function () {
    return rawResults ? mapResultFields(rawResults, fields) : undefined;
  }, [rawResults]);

  var _useSearchUIContext = useSearchUIContext(),
      _useSearchUIContext$d = _useSearchUIContext.disableDefaultStyles,
      disableDefaultStyles = _useSearchUIContext$d === void 0 ? false : _useSearchUIContext$d,
      customClassNames = _useSearchUIContext.customClassNames,
      viewType = _useSearchUIContext.viewType,
      setViewType = _useSearchUIContext.setViewType;

  var _useQuery = reactHooks.useQuery(),
      query = _useQuery.query;

  var defaultAppearance = props.defaultAppearance,
      _props$appearance = props.appearance,
      appearance = _props$appearance === void 0 ? viewType : _props$appearance,
      stylesProp = props.styles,
      rest = _objectWithoutPropertiesLoose(props, ["defaultAppearance", "appearance", "styles"]);

  var _React$useState = React.useState(0),
      width = _React$useState[0],
      setWidth = _React$useState[1];

  var _useTracking = reactHooks.useTracking(),
      handleResultClicked = _useTracking.handleResultClicked;

  var hasImages = React.useMemo(function () {
    return results == null ? void 0 : results.some(function (r) {
      var _r$values;

      return (_r$values = r.values) == null ? void 0 : _r$values.image;
    });
  }, [results]);
  var styles = reactSdkUtils.getStylesObject(useResultsStyles(_extends({}, props, {
    appearance: appearance,
    width: width
  })), disableDefaultStyles);

  var _useTranslation = reactI18next.useTranslation(['common', 'errors', 'result']),
      t = _useTranslation.t;

  React.useEffect(function () {
    if (defaultAppearance) {
      setViewType(defaultAppearance);
    }
  }, []);

  if (error) {
    var _customClassNames$res;

    var body = t('errors:generic');

    if (error.statusCode === 403) {
      body = t('errors:authorization');
    } else if (error.name === 'NetworkError' || error.message.startsWith('NetworkError')) {
      body = t('errors:connection');
    }

    return jsxRuntime.jsx(Message, {
      title: t('common:error'),
      body: body,
      className: (_customClassNames$res = customClassNames.results) == null ? void 0 : _customClassNames$res.errorMessage
    });
  }

  if (reactSdkUtils.isNullOrUndefined(results)) {
    var _customClassNames$res2;

    return jsxRuntime.jsx(Message, {
      title: t('common:loading'),
      appearance: "loading",
      disableDefaultStyles: disableDefaultStyles,
      className: (_customClassNames$res2 = customClassNames.results) == null ? void 0 : _customClassNames$res2.searchingMessage
    });
  }

  if (reactSdkUtils.isEmpty(results)) {
    var _customClassNames$res4;

    if (searching) {
      var _customClassNames$res3;

      return jsxRuntime.jsx(Message, {
        title: t('common:loading'),
        appearance: "loading",
        disableDefaultStyles: disableDefaultStyles,
        className: (_customClassNames$res3 = customClassNames.results) == null ? void 0 : _customClassNames$res3.searchingMessage
      });
    }

    return jsxRuntime.jsx(Message, {
      title: t('results:empty.title'),
      body: t('results:empty.body', {
        query: "<strong>" + query + "</strong>"
      }),
      disableDefaultStyles: disableDefaultStyles,
      className: (_customClassNames$res4 = customClassNames.results) == null ? void 0 : _customClassNames$res4.emptyMessage
    });
  }

  return jsxRuntime.jsx(reactComponents.ResizeObserver, {
    onResize: function onResize(rect) {
      return setWidth(rect.width);
    },
    css: /*#__PURE__*/_css([styles.container, stylesProp], ";label:Results;" + ( "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUErQ3NFIiwiZmlsZSI6ImluZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlc2l6ZU9ic2VydmVyIH0gZnJvbSAnQHNhamFyaS9yZWFjdC1jb21wb25lbnRzJztcclxuaW1wb3J0IHsgdXNlUXVlcnksIHVzZVNlYXJjaENvbnRleHQsIHVzZVRyYWNraW5nIH0gZnJvbSAnQHNhamFyaS9yZWFjdC1ob29rcyc7XHJcbmltcG9ydCB7IGdldFN0eWxlc09iamVjdCwgaXNFbXB0eSwgaXNOdWxsT3JVbmRlZmluZWQgfSBmcm9tICdAc2FqYXJpL3JlYWN0LXNkay11dGlscyc7XHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0JztcclxuaW1wb3J0IHsgdXNlU2VhcmNoVUlDb250ZXh0IH0gZnJvbSAnLi4vQ29udGV4dFByb3ZpZGVyJztcclxuaW1wb3J0IG1hcFJlc3VsdEZpZWxkcyBmcm9tICcuLi91dGlscy9tYXBSZXN1bHRGaWVsZHMnO1xyXG5pbXBvcnQgTWVzc2FnZSBmcm9tICcuL2NvbXBvbmVudHMvTWVzc2FnZSc7XHJcbmltcG9ydCBSZXN1bHQgZnJvbSAnLi9jb21wb25lbnRzL1Jlc3VsdCc7XHJcbmltcG9ydCB1c2VSZXN1bHRzU3R5bGVzIGZyb20gJy4vc3R5bGVzJztcclxuY29uc3QgUmVzdWx0cyA9IChwcm9wcykgPT4ge1xyXG4gICAgY29uc3QgeyByZXN1bHRzOiByYXdSZXN1bHRzLCBzZWFyY2hpbmcsIGZpZWxkcywgZXJyb3IgfSA9IHVzZVNlYXJjaENvbnRleHQoKTtcclxuICAgIGNvbnN0IHJlc3VsdHMgPSBSZWFjdC51c2VNZW1vKCgpID0+IChyYXdSZXN1bHRzID8gbWFwUmVzdWx0RmllbGRzKHJhd1Jlc3VsdHMsIGZpZWxkcykgOiB1bmRlZmluZWQpLCBbXHJcbiAgICAgICAgcmF3UmVzdWx0cyxcclxuICAgIF0pO1xyXG4gICAgY29uc3QgeyBkaXNhYmxlRGVmYXVsdFN0eWxlcyA9IGZhbHNlLCBjdXN0b21DbGFzc05hbWVzLCB2aWV3VHlwZSwgc2V0Vmlld1R5cGUgfSA9IHVzZVNlYXJjaFVJQ29udGV4dCgpO1xyXG4gICAgY29uc3QgeyBxdWVyeSB9ID0gdXNlUXVlcnkoKTtcclxuICAgIGNvbnN0IHsgZGVmYXVsdEFwcGVhcmFuY2UsIGFwcGVhcmFuY2UgPSB2aWV3VHlwZSwgc3R5bGVzOiBzdHlsZXNQcm9wLCAuLi5yZXN0IH0gPSBwcm9wcztcclxuICAgIGNvbnN0IFt3aWR0aCwgc2V0V2lkdGhdID0gUmVhY3QudXNlU3RhdGUoMCk7XHJcbiAgICBjb25zdCB7IGhhbmRsZVJlc3VsdENsaWNrZWQgfSA9IHVzZVRyYWNraW5nKCk7XHJcbiAgICBjb25zdCBoYXNJbWFnZXMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHJlc3VsdHM/LnNvbWUoKHIpID0+IHIudmFsdWVzPy5pbWFnZSksIFtyZXN1bHRzXSk7XHJcbiAgICBjb25zdCBzdHlsZXMgPSBnZXRTdHlsZXNPYmplY3QodXNlUmVzdWx0c1N0eWxlcyh7IC4uLnByb3BzLCBhcHBlYXJhbmNlLCB3aWR0aCB9KSwgZGlzYWJsZURlZmF1bHRTdHlsZXMpO1xyXG4gICAgY29uc3QgeyB0IH0gPSB1c2VUcmFuc2xhdGlvbihbJ2NvbW1vbicsICdlcnJvcnMnLCAncmVzdWx0J10pO1xyXG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAoZGVmYXVsdEFwcGVhcmFuY2UpIHtcclxuICAgICAgICAgICAgc2V0Vmlld1R5cGUoZGVmYXVsdEFwcGVhcmFuY2UpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFtdKTtcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGxldCBib2R5ID0gdCgnZXJyb3JzOmdlbmVyaWMnKTtcclxuICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XHJcbiAgICAgICAgICAgIGJvZHkgPSB0KCdlcnJvcnM6YXV0aG9yaXphdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlcnJvci5uYW1lID09PSAnTmV0d29ya0Vycm9yJyB8fCBlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoJ05ldHdvcmtFcnJvcicpKSB7XHJcbiAgICAgICAgICAgIGJvZHkgPSB0KCdlcnJvcnM6Y29ubmVjdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gPE1lc3NhZ2UgdGl0bGU9e3QoJ2NvbW1vbjplcnJvcicpfSBib2R5PXtib2R5fSBjbGFzc05hbWU9e2N1c3RvbUNsYXNzTmFtZXMucmVzdWx0cz8uZXJyb3JNZXNzYWdlfS8+O1xyXG4gICAgfVxyXG4gICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKHJlc3VsdHMpKSB7XHJcbiAgICAgICAgcmV0dXJuICg8TWVzc2FnZSB0aXRsZT17dCgnY29tbW9uOmxvYWRpbmcnKX0gYXBwZWFyYW5jZT1cImxvYWRpbmdcIiBkaXNhYmxlRGVmYXVsdFN0eWxlcz17ZGlzYWJsZURlZmF1bHRTdHlsZXN9IGNsYXNzTmFtZT17Y3VzdG9tQ2xhc3NOYW1lcy5yZXN1bHRzPy5zZWFyY2hpbmdNZXNzYWdlfS8+KTtcclxuICAgIH1cclxuICAgIGlmIChpc0VtcHR5KHJlc3VsdHMpKSB7XHJcbiAgICAgICAgaWYgKHNlYXJjaGluZykge1xyXG4gICAgICAgICAgICByZXR1cm4gKDxNZXNzYWdlIHRpdGxlPXt0KCdjb21tb246bG9hZGluZycpfSBhcHBlYXJhbmNlPVwibG9hZGluZ1wiIGRpc2FibGVEZWZhdWx0U3R5bGVzPXtkaXNhYmxlRGVmYXVsdFN0eWxlc30gY2xhc3NOYW1lPXtjdXN0b21DbGFzc05hbWVzLnJlc3VsdHM/LnNlYXJjaGluZ01lc3NhZ2V9Lz4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKDxNZXNzYWdlIHRpdGxlPXt0KCdyZXN1bHRzOmVtcHR5LnRpdGxlJyl9IGJvZHk9e3QoJ3Jlc3VsdHM6ZW1wdHkuYm9keScsIHsgcXVlcnk6IGA8c3Ryb25nPiR7cXVlcnl9PC9zdHJvbmc+YCB9KX0gZGlzYWJsZURlZmF1bHRTdHlsZXM9e2Rpc2FibGVEZWZhdWx0U3R5bGVzfSBjbGFzc05hbWU9e2N1c3RvbUNsYXNzTmFtZXMucmVzdWx0cz8uZW1wdHlNZXNzYWdlfS8+KTtcclxuICAgIH1cclxuICAgIHJldHVybiAoPFJlc2l6ZU9ic2VydmVyIG9uUmVzaXplPXsocmVjdCkgPT4gc2V0V2lkdGgocmVjdC53aWR0aCl9IGNzcz17W3N0eWxlcy5jb250YWluZXIsIHN0eWxlc1Byb3BdfSBjbGFzc05hbWU9e2N1c3RvbUNsYXNzTmFtZXMucmVzdWx0cz8uY29udGFpbmVyfT5cbiAgICAgIHtyZXN1bHRzPy5tYXAoKHsgdmFsdWVzLCB0b2tlbiB9LCBpKSA9PiAoPFJlc3VsdCBvbkNsaWNrPXtoYW5kbGVSZXN1bHRDbGlja2VkfSB0b2tlbj17dG9rZW59IGtleT17dmFsdWVzLl9pZCA/PyBpfSB2YWx1ZXM9e3ZhbHVlc30gYXBwZWFyYW5jZT17YXBwZWFyYW5jZX0gZm9yY2VJbWFnZT17aGFzSW1hZ2VzfSBkaXNhYmxlRGVmYXVsdFN0eWxlcz17ZGlzYWJsZURlZmF1bHRTdHlsZXN9IGNsYXNzTmFtZT17Y3VzdG9tQ2xhc3NOYW1lcy5yZXN1bHRzPy5pdGVtfSBoZWFkaW5nQ2xhc3NOYW1lPXtjdXN0b21DbGFzc05hbWVzLnJlc3VsdHM/LmhlYWRpbmd9IGRlc2NyaXB0aW9uQ2xhc3NOYW1lPXtjdXN0b21DbGFzc05hbWVzLnJlc3VsdHM/LmRlc2NyaXB0aW9ufSBwcmljZUNsYXNzTmFtZT17Y3VzdG9tQ2xhc3NOYW1lcy5yZXN1bHRzPy5wcmljZX0gcmF0aW5nQ2xhc3NOYW1lPXtjdXN0b21DbGFzc05hbWVzLnJlc3VsdHM/LnJhdGluZ30gc3ViVGl0bGVDbGFzc05hbWU9e2N1c3RvbUNsYXNzTmFtZXMucmVzdWx0cz8uc3ViVGl0bGV9IHsuLi5yZXN0fS8+KSl9XG4gICAgPC9SZXNpemVPYnNlcnZlcj4pO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBSZXN1bHRzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qc3gubWFwIl19 */")),
    className: (_customClassNames$res5 = customClassNames.results) == null ? void 0 : _customClassNames$res5.container,
    children: results == null ? void 0 : results.map(function (_ref, i) {
      var _values$_id, _customClassNames$res6, _customClassNames$res7, _customClassNames$res8, _customClassNames$res9, _customClassNames$res10, _customClassNames$res11;

      var values = _ref.values,
          token = _ref.token;
      return jsxRuntime.jsx(Result, _extends({
        onClick: handleResultClicked,
        token: token,
        values: values,
        appearance: appearance,
        forceImage: hasImages,
        disableDefaultStyles: disableDefaultStyles,
        className: (_customClassNames$res6 = customClassNames.results) == null ? void 0 : _customClassNames$res6.item,
        headingClassName: (_customClassNames$res7 = customClassNames.results) == null ? void 0 : _customClassNames$res7.heading,
        descriptionClassName: (_customClassNames$res8 = customClassNames.results) == null ? void 0 : _customClassNames$res8.description,
        priceClassName: (_customClassNames$res9 = customClassNames.results) == null ? void 0 : _customClassNames$res9.price,
        ratingClassName: (_customClassNames$res10 = customClassNames.results) == null ? void 0 : _customClassNames$res10.rating,
        subTitleClassName: (_customClassNames$res11 = customClassNames.results) == null ? void 0 : _customClassNames$res11.subTitle
      }, rest), (_values$_id = values._id) != null ? _values$_id : i);
    })
  });
};

function useViewOptionStyles(params) {
  var inline = params.inline;
  var styles = {
    container: [{
      "minWidth": "0"
    }, inline ? {
      "display": "flex",
      "alignItems": "center",
      "> :not(template) ~ :not(template)": {
        "--space-x-reverse": 0,
        "marginRight": "calc(0.5rem * var(--space-x-reverse))",
        "marginLeft": "calc(0.5rem * calc(1 - var(--space-x-reverse)))"
      }
    } : {
      "> :not(template) ~ :not(template)": {
        "--space-y-reverse": 0,
        "marginTop": "calc(0.25rem * calc(1 - var(--space-y-reverse)))",
        "marginBottom": "calc(0.25rem * var(--space-y-reverse))"
      }
    }],
    label: [{
      "--text-opacity": "1",
      "color": "rgba(107, 114, 128, var(--text-opacity))"
    }]
  };
  return reactSdkUtils.mapStyles(styles);
}

var ViewOption = function ViewOption(props) {
  var _useSearchUIContext = useSearchUIContext(),
      _useSearchUIContext$d = _useSearchUIContext.disableDefaultStyles,
      disableDefaultStyles = _useSearchUIContext$d === void 0 ? false : _useSearchUIContext$d;

  var id = props.id,
      _props$inline = props.inline,
      inline = _props$inline === void 0 ? true : _props$inline,
      input = props.renderAsLabel,
      label = props.label,
      size = props.size,
      stylesProp = props.styles,
      children = props.children,
      className = props.className,
      labelClassName = props.labelClassName,
      rest = _objectWithoutPropertiesLoose(props, ["id", "inline", "renderAsLabel", "label", "size", "styles", "children", "className", "labelClassName"]);

  var labelId = id + "-label";

  var _useSearchContext = reactHooks.useSearchContext(),
      searched = _useSearchContext.searched;

  var styles = reactSdkUtils.getStylesObject(useViewOptionStyles({
    inline: inline
  }), disableDefaultStyles);

  if (!searched) {
    return null;
  }

  var labelProps = {
    id: labelId,
    css: styles.label,
    size: size,
    disableDefaultStyles: disableDefaultStyles,
    className: labelClassName
  };
  return jsxRuntime.jsxs(reactComponents.Box, _extends({
    css: /*#__PURE__*/_css([styles.container, stylesProp], ";label:ViewOption;" + ( "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFzQmlCIiwiZmlsZSI6ImluZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJveCwgTGFiZWwsIFRleHQgfSBmcm9tICdAc2FqYXJpL3JlYWN0LWNvbXBvbmVudHMnO1xyXG5pbXBvcnQgeyB1c2VTZWFyY2hDb250ZXh0IH0gZnJvbSAnQHNhamFyaS9yZWFjdC1ob29rcyc7XHJcbmltcG9ydCB7IGdldFN0eWxlc09iamVjdCB9IGZyb20gJ0BzYWphcmkvcmVhY3Qtc2RrLXV0aWxzJztcclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyB1c2VTZWFyY2hVSUNvbnRleHQgfSBmcm9tICcuLi9Db250ZXh0UHJvdmlkZXInO1xyXG5pbXBvcnQgdXNlVmlld09wdGlvblN0eWxlcyBmcm9tICcuL3N0eWxlcyc7XHJcbmNvbnN0IFZpZXdPcHRpb24gPSAocHJvcHMpID0+IHtcclxuICAgIGNvbnN0IHsgZGlzYWJsZURlZmF1bHRTdHlsZXMgPSBmYWxzZSB9ID0gdXNlU2VhcmNoVUlDb250ZXh0KCk7XHJcbiAgICBjb25zdCB7IGlkLCBpbmxpbmUgPSB0cnVlLCByZW5kZXJBc0xhYmVsOiBpbnB1dCwgbGFiZWwsIHNpemUsIHN0eWxlczogc3R5bGVzUHJvcCwgY2hpbGRyZW4sIGNsYXNzTmFtZSwgbGFiZWxDbGFzc05hbWUsIC4uLnJlc3QgfSA9IHByb3BzO1xyXG4gICAgY29uc3QgbGFiZWxJZCA9IGAke2lkfS1sYWJlbGA7XHJcbiAgICBjb25zdCB7IHNlYXJjaGVkIH0gPSB1c2VTZWFyY2hDb250ZXh0KCk7XHJcbiAgICBjb25zdCBzdHlsZXMgPSBnZXRTdHlsZXNPYmplY3QodXNlVmlld09wdGlvblN0eWxlcyh7IGlubGluZSB9KSwgZGlzYWJsZURlZmF1bHRTdHlsZXMpO1xyXG4gICAgaWYgKCFzZWFyY2hlZCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbGFiZWxQcm9wcyA9IHtcclxuICAgICAgICBpZDogbGFiZWxJZCxcclxuICAgICAgICBjc3M6IHN0eWxlcy5sYWJlbCxcclxuICAgICAgICBzaXplLFxyXG4gICAgICAgIGRpc2FibGVEZWZhdWx0U3R5bGVzLFxyXG4gICAgICAgIGNsYXNzTmFtZTogbGFiZWxDbGFzc05hbWUsXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuICg8Qm94IGNzcz17W3N0eWxlcy5jb250YWluZXIsIHN0eWxlc1Byb3BdfSBhcmlhLWxhYmVsbGVkYnk9e2xhYmVsSWR9IHsuLi5yZXN0fSBjbGFzc05hbWU9e2NsYXNzTmFtZX0+XG4gICAgICB7aW5wdXQgPyAoPExhYmVsIGh0bWxGb3I9e2lkfSB7Li4ubGFiZWxQcm9wc30+XG4gICAgICAgICAge2xhYmVsfVxuICAgICAgICA8L0xhYmVsPikgOiAoPFRleHQgey4uLmxhYmVsUHJvcHN9PntsYWJlbH08L1RleHQ+KX1cblxuICAgICAge2NoaWxkcmVufVxuICAgIDwvQm94Pik7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFZpZXdPcHRpb247XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzeC5tYXAiXX0= */")),
    "aria-labelledby": labelId
  }, rest, {
    className: className,
    children: [input ? jsxRuntime.jsx(reactComponents.Label, _extends({
      htmlFor: id
    }, labelProps, {
      children: label
    })) : jsxRuntime.jsx(reactComponents.Text, _extends({}, labelProps, {
      children: label
    })), children]
  }));
};

var defaultOptions = [15, 25, 50, 100];

var ResultsPerPage = function ResultsPerPage(props) {
  var _customClassNames$sor, _customClassNames$sor2, _customClassNames$res;

  var _useTranslation = reactI18next.useTranslation('resultsPerPage'),
      t = _useTranslation.t;

  var _useSearchUIContext = useSearchUIContext(),
      customClassNames = _useSearchUIContext.customClassNames,
      _useSearchUIContext$d = _useSearchUIContext.disableDefaultStyles,
      disableDefaultStyles = _useSearchUIContext$d === void 0 ? false : _useSearchUIContext$d;

  var _props$label = props.label,
      label = _props$label === void 0 ? t('label') : _props$label,
      _props$options = props.options,
      options = _props$options === void 0 ? defaultOptions : _props$options,
      size = props.size,
      rest = _objectWithoutPropertiesLoose(props, ["label", "options", "styles", "size"]);

  var _useResultsPerPage = reactHooks.useResultsPerPage(),
      resultsPerPage = _useResultsPerPage.resultsPerPage,
      setResultsPerPage = _useResultsPerPage.setResultsPerPage;

  var _useSearchContext = reactHooks.useSearchContext(),
      totalResults = _useSearchContext.totalResults;

  var id = "page-size-" + utils.useId();
  var optionsSorted = options.sort(function (a, b) {
    return a - b;
  });
  var min = optionsSorted[0];

  if (totalResults === 0 || min > totalResults) {
    return null;
  }

  return jsxRuntime.jsx(ViewOption, _extends({
    id: id,
    label: label,
    size: size,
    className: (_customClassNames$sor = customClassNames.sorting) == null ? void 0 : _customClassNames$sor.container,
    labelClassName: (_customClassNames$sor2 = customClassNames.sorting) == null ? void 0 : _customClassNames$sor2.label,
    renderAsLabel: true
  }, rest, {
    children: jsxRuntime.jsx(reactComponents.Select, {
      id: id,
      value: "" + resultsPerPage,
      onChange: function onChange(value) {
        return setResultsPerPage(Number(reactSdkUtils.isArray(value) ? value[0] : value));
      },
      size: size,
      disableDefaultStyles: disableDefaultStyles,
      className: (_customClassNames$res = customClassNames.resultsPerPage) == null ? void 0 : _customClassNames$res.select,
      children: optionsSorted.map(function (s) {
        return jsxRuntime.jsx(reactComponents.Option, {
          value: s,
          children: s
        }, s);
      })
    })
  }));
};

var defaultOptions$1 = [{
  name: 'Most relevant',
  value: ''
}];

var Sorting = function Sorting(props) {
  var _customClassNames$sor, _customClassNames$sor2, _customClassNames$sor3;

  var _useTranslation = reactI18next.useTranslation('sorting'),
      t = _useTranslation.t;

  var _props$label = props.label,
      label = _props$label === void 0 ? t('label') : _props$label,
      _props$options = props.options,
      options = _props$options === void 0 ? defaultOptions$1 : _props$options,
      size = props.size,
      rest = _objectWithoutPropertiesLoose(props, ["label", "options", "size", "styles"]);

  var _useSearchUIContext = useSearchUIContext(),
      _useSearchUIContext$d = _useSearchUIContext.disableDefaultStyles,
      disableDefaultStyles = _useSearchUIContext$d === void 0 ? false : _useSearchUIContext$d,
      customClassNames = _useSearchUIContext.customClassNames;

  var _useSorting = reactHooks.useSorting(),
      sorting = _useSorting.sorting,
      setSorting = _useSorting.setSorting;

  var id = "sorting-" + utils.useId();
  return jsxRuntime.jsx(ViewOption, _extends({
    id: id,
    label: label,
    size: size,
    className: (_customClassNames$sor = customClassNames.sorting) == null ? void 0 : _customClassNames$sor.container,
    labelClassName: (_customClassNames$sor2 = customClassNames.sorting) == null ? void 0 : _customClassNames$sor2.label,
    renderAsLabel: true
  }, rest, {
    children: jsxRuntime.jsx(reactComponents.Select, {
      id: id,
      value: sorting,
      onChange: function onChange(value) {
        return setSorting(reactSdkUtils.isArray(value) ? value[0] : value);
      },
      size: size,
      disableDefaultStyles: disableDefaultStyles,
      className: (_customClassNames$sor3 = customClassNames.sorting) == null ? void 0 : _customClassNames$sor3.select,
      children: options.map(function (s) {
        return jsxRuntime.jsx(reactComponents.Option, {
          value: s.value,
          children: s.name
        }, s.value);
      })
    })
  }));
};

var Summary = function Summary(props) {
  var _queryValues$get;

  var _useSearchContext = reactHooks.useSearchContext(),
      latency = _useSearchContext.latency,
      totalResults = _useSearchContext.totalResults,
      search = _useSearchContext.search,
      queryValues = _useSearchContext.queryValues,
      searched = _useSearchContext.searched;

  var _useSearchUIContext = useSearchUIContext(),
      disableDefaultStyles = _useSearchUIContext.disableDefaultStyles,
      language = _useSearchUIContext.language;

  var _props$suggest = props.suggest,
      suggest = _props$suggest === void 0 ? false : _props$suggest,
      _props$showLatency = props.showLatency,
      showLatency = _props$showLatency === void 0 ? false : _props$showLatency,
      rest = _objectWithoutPropertiesLoose(props, ["suggest", "showLatency"]);

  var query = (_queryValues$get = queryValues == null ? void 0 : queryValues.get('q')) != null ? _queryValues$get : '';

  var _useAutocomplete = reactHooks.useAutocomplete(),
      completion = _useAutocomplete.completion;

  var _useTranslation = reactI18next.useTranslation(['common', 'summary']),
      t = _useTranslation.t;

  if (!searched) {
    return null;
  }

  return jsxRuntime.jsxs(React.Fragment, {
    children: [jsxRuntime.jsx(reactAriaLive.LiveMessage, {
      message: query === '' ? t('summary:noQueryResults', {
        count: totalResults,
        object: reactSdkUtils.pluralize(totalResults, t('common:item'), t('common:items'))
      }) : t('summary:results', {
        count: totalResults,
        object: reactSdkUtils.pluralize(totalResults, t('common:result'), t('common:results')),
        query: query
      }),
      "aria-live": "polite"
    }), jsxRuntime.jsxs(reactComponents.Text, _extends({}, rest, {
      disableDefaultStyles: disableDefaultStyles,
      children: [jsxRuntime.jsx(reactComponents.Box, {
        as: "span",
        dangerouslySetInnerHTML: {
          __html: query === '' ? t('summary:noQueryResults', {
            count: totalResults.toLocaleString(language),
            object: reactSdkUtils.pluralize(totalResults, t('common:item'), t('common:items')).toLowerCase()
          }) : t('summary:results', {
            count: totalResults.toLocaleString(language),
            object: reactSdkUtils.pluralize(totalResults, t('common:result'), t('common:results')).toLowerCase(),
            query: "<strong>" + query + "</strong>"
          })
        }
      }), showLatency ? " " + t('summary:latency', {
        time: latency
      }) : '', completion && completion !== query.trim() && suggest ? jsxRuntime.jsxs(React.Fragment, {
        children: [". " + t('summary:alternative') + " ", jsxRuntime.jsx(reactComponents.Button, {
          onClick: function onClick() {
            return search(completion);
          },
          spacing: "none",
          appearance: "link",
          disableDefaultStyles: disableDefaultStyles,
          children: completion
        }), "."]
      }) : null]
    }))]
  });
};

var ViewType = function ViewType(props) {
  var _customClassNames$sor, _customClassNames$sor2, _customClassNames$vie;

  var _useTranslation = reactI18next.useTranslation('viewType'),
      t = _useTranslation.t;

  var _useSearchUIContext = useSearchUIContext(),
      customClassNames = _useSearchUIContext.customClassNames,
      _useSearchUIContext$d = _useSearchUIContext.disableDefaultStyles,
      disableDefaultStyles = _useSearchUIContext$d === void 0 ? false : _useSearchUIContext$d;

  var _props$label = props.label,
      label = _props$label === void 0 ? t('label') : _props$label,
      size = props.size,
      rest = _objectWithoutPropertiesLoose(props, ["label", "size", "styles"]);

  var id = "view-type-" + utils.useId();

  var _useSearchUIContext2 = useSearchUIContext(),
      viewType = _useSearchUIContext2.viewType,
      setViewType = _useSearchUIContext2.setViewType;

  return jsxRuntime.jsx(ViewOption, _extends({
    id: id,
    label: label,
    size: size,
    className: (_customClassNames$sor = customClassNames.sorting) == null ? void 0 : _customClassNames$sor.container,
    labelClassName: (_customClassNames$sor2 = customClassNames.sorting) == null ? void 0 : _customClassNames$sor2.label
  }, rest, {
    children: jsxRuntime.jsxs(reactComponents.ButtonGroup, {
      attached: true,
      disableDefaultStyles: disableDefaultStyles,
      className: (_customClassNames$vie = customClassNames.viewType) == null ? void 0 : _customClassNames$vie.buttonGroup,
      children: [jsxRuntime.jsxs(reactComponents.Button, {
        onClick: function onClick() {
          return setViewType('grid');
        },
        size: size,
        appearance: viewType === 'grid' ? 'primary' : undefined,
        "aria-label": t('grid'),
        children: ["\u200B", jsxRuntime.jsx(SvgSmallGrid, {})]
      }), jsxRuntime.jsxs(reactComponents.Button, {
        onClick: function onClick() {
          return setViewType('list');
        },
        size: size,
        appearance: viewType === 'list' ? 'primary' : undefined,
        "aria-label": t('list'),
        children: ["\u200B", jsxRuntime.jsx(SvgSmallList, {})]
      })]
    })
  }));
};

Object.defineProperty(exports, 'ClickTracking', {
  enumerable: true,
  get: function () {
    return reactHooks.ClickTracking;
  }
});
Object.defineProperty(exports, 'FieldDictionary', {
  enumerable: true,
  get: function () {
    return reactHooks.FieldDictionary;
  }
});
Object.defineProperty(exports, 'FilterBuilder', {
  enumerable: true,
  get: function () {
    return reactHooks.FilterBuilder;
  }
});
Object.defineProperty(exports, 'Pipeline', {
  enumerable: true,
  get: function () {
    return reactHooks.Pipeline;
  }
});
Object.defineProperty(exports, 'PosNegTracking', {
  enumerable: true,
  get: function () {
    return reactHooks.PosNegTracking;
  }
});
Object.defineProperty(exports, 'RangeFilterBuilder', {
  enumerable: true,
  get: function () {
    return reactHooks.RangeFilterBuilder;
  }
});
Object.defineProperty(exports, 'Variables', {
  enumerable: true,
  get: function () {
    return reactHooks.Variables;
  }
});
Object.defineProperty(exports, 'SSRProvider', {
  enumerable: true,
  get: function () {
    return reactComponents.SSRProvider;
  }
});
exports.Filter = Filter;
exports.Input = Input;
exports.Pagination = Pagination;
exports.Results = Results;
exports.ResultsPerPage = ResultsPerPage;
exports.SearchProvider = ContextProvider;
exports.Sorting = Sorting;
exports.Summary = Summary;
exports.ViewType = ViewType;
exports.i18n = i18n;
exports.useSearchUIContext = useSearchUIContext;
//# sourceMappingURL=react-search-ui.cjs.development.js.map
