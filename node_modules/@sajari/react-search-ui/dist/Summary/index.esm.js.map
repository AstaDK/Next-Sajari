{"version":3,"file":"index.esm.js","sources":["../../src/Summary/index.tsx"],"sourcesContent":["/* eslint-disable react/jsx-one-expression-per-line */\nimport { Box, Button, Text } from '@sajari/react-components';\nimport { useAutocomplete, useSearchContext } from '@sajari/react-hooks';\nimport { pluralize } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\nimport { LiveMessage } from 'react-aria-live';\nimport { useTranslation } from 'react-i18next';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport { SummaryProps } from './types';\n\nconst Summary = (props: SummaryProps) => {\n  const { latency, totalResults, search, queryValues, searched } = useSearchContext();\n  const { disableDefaultStyles, language } = useSearchUIContext();\n  const { suggest = false, showLatency = false, ...rest } = props;\n  const query = queryValues?.get('q') ?? '';\n  const { completion } = useAutocomplete();\n  const { t } = useTranslation(['common', 'summary']);\n\n  if (!searched) {\n    return null;\n  }\n\n  return (\n    <React.Fragment>\n      <LiveMessage\n        message={\n          query === ''\n            ? t('summary:noQueryResults', {\n                count: totalResults,\n                object: pluralize(totalResults, t('common:item'), t('common:items')),\n              })\n            : t('summary:results', {\n                count: totalResults,\n                object: pluralize(totalResults, t('common:result'), t('common:results')),\n                query,\n              })\n        }\n        aria-live=\"polite\"\n      />\n\n      <Text {...rest} disableDefaultStyles={disableDefaultStyles}>\n        <Box\n          as=\"span\"\n          dangerouslySetInnerHTML={{\n            __html:\n              query === ''\n                ? t('summary:noQueryResults', {\n                    count: totalResults.toLocaleString(language),\n                    object: pluralize(totalResults, t('common:item'), t('common:items')).toLowerCase(),\n                  } as Record<string, string>)\n                : t('summary:results', {\n                    count: totalResults.toLocaleString(language),\n                    object: pluralize(totalResults, t('common:result'), t('common:results')).toLowerCase(),\n                    query: `<strong>${query}</strong>`,\n                  } as Record<string, string>),\n          }}\n        />\n        {showLatency ? ` ${t('summary:latency', { time: latency })}` : ''}\n        {completion && completion !== query.trim() && suggest ? (\n          <React.Fragment>\n            {`. ${t('summary:alternative')} `}\n            <Button\n              onClick={() => search(completion)}\n              spacing=\"none\"\n              appearance=\"link\"\n              disableDefaultStyles={disableDefaultStyles}\n            >\n              {completion}\n            </Button>\n            .\n          </React.Fragment>\n        ) : null}\n      </Text>\n    </React.Fragment>\n  );\n};\n\nexport default Summary;\nexport type { SummaryProps };\n"],"names":["Summary","props","useSearchContext","latency","totalResults","search","queryValues","searched","useSearchUIContext","disableDefaultStyles","language","suggest","showLatency","rest","query","get","useAutocomplete","completion","useTranslation","t","_jsxs","React.Fragment","_jsx","count","object","pluralize","__html","toLocaleString","toLowerCase","time","trim"],"mappings":"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"}