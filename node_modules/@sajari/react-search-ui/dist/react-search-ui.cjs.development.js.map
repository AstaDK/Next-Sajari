{"version":3,"file":"react-search-ui.cjs.development.js","sources":["../src/i18n/locale/en.ts","../src/i18n/index.ts","../src/ContextProvider/index.tsx","../src/Filter/utils.ts","../src/Filter/Header.tsx","../src/Filter/Box.tsx","../src/Filter/ColorFilter.tsx","../src/Filter/ListFilter.tsx","../src/Filter/RangeFilter.tsx","../src/Filter/RatingFilter.tsx","../src/Filter/SelectFilter.tsx","../src/Filter/TabFilter.tsx","../src/Filter/index.tsx","../src/hooks/useClickTracking.ts","../src/utils/mapResultFields.ts","../src/Input/index.tsx","../src/Pagination/index.tsx","../src/Results/components/Message/styles.ts","../src/Results/components/Message/index.tsx","../src/Results/components/Result/styles.ts","../src/Results/components/Result/index.tsx","../src/Results/styles.ts","../src/Results/index.tsx","../src/ViewOption/styles.ts","../src/ViewOption/index.tsx","../src/ResultsPerPage/index.tsx","../src/Sorting/index.tsx","../src/Summary/index.tsx","../src/ViewType/index.tsx"],"sourcesContent":["export default {\n  common: {\n    result: 'Result',\n    results: 'Results',\n    items: 'Items',\n    item: 'Item',\n    loading: 'Loading',\n    error: 'Error',\n  },\n  errors: {\n    authorization: 'Authorization for this request failed. Please try again.',\n    connection: 'Please check your network connection and try again.',\n    generic: 'Something went wrong. Please try again.',\n  },\n  filter: {\n    all: 'All',\n    rangeOver: 'Over {{value}}',\n    rangeUnder: 'Under {{value}}',\n    reset: 'Reset',\n    select: 'Select a filter',\n    selected: '{{count}} filters selected',\n    showLess: 'Show less',\n    showMore: 'Show more',\n  },\n  input: {\n    placeholder: 'Search',\n  },\n  resultsPerPage: {\n    label: 'Show',\n  },\n  pagination: {\n    label: 'Pagination',\n    previous: 'Previous',\n    next: 'Next',\n    page: 'Page {{page}}',\n    current: 'Page {{page}}, current page',\n  },\n  results: {\n    empty: {\n      title: 'No results',\n      body: 'No matches were found for \"{{query}}\".',\n    },\n  },\n  sorting: {\n    label: 'Sort',\n  },\n  summary: {\n    results: '{{count}} {{object}} for \"{{query}}\"',\n    noQueryResults: '{{count}} {{object}}',\n    latency: '({{time}} secs)',\n    alternative: 'Search instead for',\n  },\n  viewType: {\n    label: 'View',\n    grid: 'Grid',\n    list: 'List',\n  },\n};\n","import i18n from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\n\nimport en from './locale/en';\n\ni18n.use(LanguageDetector).init({\n  resources: {\n    en,\n  },\n  fallbackLng: 'en',\n  interpolation: {\n    escapeValue: false,\n  },\n  react: {\n    wait: true,\n  },\n});\n\nexport default i18n;\n","import { SearchProvider } from '@sajari/react-hooks';\nimport { createContext, ThemeProvider } from '@sajari/react-sdk-utils';\nimport React, { useEffect, useState } from 'react';\nimport { LiveAnnouncer } from 'react-aria-live';\nimport { I18nextProvider } from 'react-i18next';\n\nimport i18n from '../i18n';\nimport { ContextProviderValues, ResultViewType, SearchUIContextProviderValues } from './types';\n\nconst [Provider, useSearchUIContext] = createContext<Required<SearchUIContextProviderValues> & { language?: string }>({\n  strict: true,\n  name: 'PipelineContext',\n});\n\nconst ContextProvider: React.FC<ContextProviderValues> = ({\n  children,\n  search,\n  autocomplete,\n  defaultFilter,\n  searchOnLoad,\n  initialResponse,\n  ratingMax = 5,\n  currency = 'USD',\n  theme,\n  importantStyles,\n  disableDefaultStyles = false,\n  customClassNames = {},\n  viewType: viewTypeProp = 'list',\n}) => {\n  const [language, setLanguage] = useState(i18n.language);\n  const [viewType, setViewType] = useState<ResultViewType>(viewTypeProp);\n\n  useEffect(() => {\n    const event = 'languageChanged';\n    i18n.on(event, setLanguage);\n\n    return () => {\n      i18n.off(event);\n    };\n  }, []);\n\n  useEffect(() => {\n    setViewType(viewTypeProp);\n  }, [viewTypeProp]);\n\n  return (\n    <Provider\n      value={{\n        tracking: search.pipeline.getTracking(),\n        disableDefaultStyles,\n        currency,\n        customClassNames,\n        language,\n        ratingMax,\n        viewType,\n        setViewType,\n      }}\n    >\n      <SearchProvider\n        search={search}\n        autocomplete={autocomplete}\n        defaultFilter={defaultFilter}\n        searchOnLoad={searchOnLoad}\n        initialResponse={initialResponse}\n      >\n        <LiveAnnouncer>\n          <I18nextProvider i18n={i18n}>\n            <ThemeProvider theme={theme} importantStyles={importantStyles}>\n              {children}\n            </ThemeProvider>\n          </I18nextProvider>\n        </LiveAnnouncer>\n      </SearchProvider>\n    </Provider>\n  );\n};\n\nexport default ContextProvider;\nexport { useSearchUIContext };\nexport type { ContextProviderValues, ResultViewType };\n","import { FilterItem } from '@sajari/react-hooks';\nimport { formatNumber } from '@sajari/react-sdk-utils';\nimport { TFunction } from 'i18next';\n\n/**\n * Pin items in an array to the start\n * @param {Array} list\n * @param {String} pinned - Items to pin in the array\n * @param {String} prop - Property of child object to get comparation in pinned array\n */\nexport function pinItems(list: FilterItem[], pinned: string[] = [], prop: string) {\n  return [...list].sort((a, b) => pinned.indexOf(b[prop]) - pinned.indexOf(a[prop]));\n}\n\n/**\n * Get the header ID for a name\n * @param name - The filter's unique name\n */\nexport function getHeaderId(name: string) {\n  return `filter-${name}-label`;\n}\n\ninterface FormatValueParams {\n  format?: 'default' | 'price';\n  currency?: string;\n  t: TFunction;\n}\n\n/**\n * Format a value to be presented in the UI\n * @param input - the value to format\n * @param params - formatting options\n */\nexport function formatLabel(input: string, params: FormatValueParams) {\n  const { format = 'default', currency = 'USD', t } = params;\n  const formatPrice = (v: number) => formatNumber(v, { style: 'currency', currency }).replace('.00', '');\n\n  switch (format) {\n    case 'price':\n      switch (true) {\n        case /\\d+\\s-\\s\\d+/gm.test(input): {\n          const [min, max] = input.split(' - ').map(Number).map(formatPrice);\n          return `${min} - ${max}`;\n        }\n        case input.startsWith('>'):\n          return t('rangeOver', { value: formatPrice(Number(input.substring(2))) });\n        case input.startsWith('<'):\n          return t('rangeUnder', { value: formatPrice(Number(input.substring(2))) });\n        default:\n          return input;\n      }\n\n    case 'default':\n    default:\n      // Return unchanged if it's default\n      return input;\n  }\n}\n","import { Box, Button, Heading } from '@sajari/react-components';\nimport { getStylesObject, isString } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport tw from 'twin.macro';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport { HeaderProps } from './types';\nimport { getHeaderId } from './utils';\n\nconst Header = ({ title, name, onReset, showReset }: HeaderProps) => {\n  const { t } = useTranslation('filter');\n  const { disableDefaultStyles = false, customClassNames } = useSearchUIContext();\n\n  const styles = getStylesObject(\n    {\n      container: [tw`flex items-center justify-between mb-2 leading-none`],\n      heading: [tw`leading-snug`],\n    },\n    disableDefaultStyles,\n  );\n\n  return (\n    <Box css={styles.container} className={customClassNames.filter?.header}>\n      <Heading\n        as=\"h2\"\n        size=\"xs\"\n        css={styles.heading}\n        disableDefaultStyles={disableDefaultStyles}\n        className={customClassNames.filter?.title}\n        id={isString(name) ? getHeaderId(name) : undefined}\n      >\n        {title}\n      </Heading>\n\n      {showReset ? (\n        <Button\n          appearance=\"link\"\n          size=\"xs\"\n          spacing=\"none\"\n          onClick={onReset}\n          css={tw`uppercase`}\n          disableDefaultStyles={disableDefaultStyles}\n          className={customClassNames.filter?.resetButton}\n        >\n          {t('reset')}\n        </Button>\n      ) : null}\n    </Box>\n  );\n};\n\nexport default Header;\n","import { Box as CoreBox } from '@sajari/react-components';\nimport * as React from 'react';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport Header from './Header';\nimport { BoxProps } from './types';\n\nconst Box = React.forwardRef(({ children, ...headerProps }: BoxProps, ref: React.Ref<HTMLDivElement>) => {\n  const { customClassNames } = useSearchUIContext();\n\n  return (\n    <CoreBox ref={ref} className={customClassNames.filter?.box}>\n      <Header {...headerProps} />\n      {children}\n    </CoreBox>\n  );\n});\n\nexport default Box;\n","import { Swatch } from '@sajari/react-components';\nimport { useFilter } from '@sajari/react-hooks';\nimport { isEmpty } from '@sajari/react-sdk-utils';\nimport React, { useMemo } from 'react';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport Box from './Box';\nimport { ColorFilterProps } from './types';\n\nconst { colorKeys } = Swatch;\n\nconst ColorFilter = ({ name, title }: Omit<ColorFilterProps, 'type'>) => {\n  const { options, selected, setSelected, reset } = useFilter(name);\n  const { customClassNames, disableDefaultStyles = false } = useSearchUIContext();\n  const optionKeys = useMemo(() => options.map((o) => o.label), [JSON.stringify(options)]);\n  const filtered = useMemo(() => colorKeys.filter((c) => optionKeys.some((o) => c.toLowerCase() === o.toLowerCase())), [\n    JSON.stringify(optionKeys),\n  ]);\n\n  const children = useMemo(\n    () =>\n      filtered.map((color) => {\n        const Component = Swatch.Color[color];\n        return <Component key={color} />;\n      }),\n    [JSON.stringify(filtered)],\n  );\n\n  if (isEmpty(filtered) && isEmpty(selected)) {\n    return null;\n  }\n\n  return (\n    <Box title={title} showReset={selected.length > 0} onReset={reset}>\n      <Swatch\n        checkedColors={selected}\n        onChange={setSelected}\n        className={customClassNames.filter?.color?.container}\n        colorClassName={customClassNames.filter?.color?.item}\n        colorCheckedClassName={customClassNames.filter?.color?.itemChecked}\n        disableDefaultStyles={disableDefaultStyles}\n      >\n        {children}\n      </Swatch>\n    </Box>\n  );\n};\n\nexport default ColorFilter;\nexport type { ColorFilterProps };\n","import { Box as CoreBox, Button, Checkbox, CheckboxGroup, Combobox, Radio, RadioGroup } from '@sajari/react-components';\nimport { useFilter, useQuery } from '@sajari/react-hooks';\nimport { getStylesObject, isBoolean, isEmpty, isSSR, noop, useTheme } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport tw from 'twin.macro';\n\nimport { IconSmallChevronDown, IconSmallChevronUp } from '../assets/icons';\nimport { useSearchUIContext } from '../ContextProvider';\nimport Box from './Box';\nimport { ListFilterProps } from './types';\nimport { formatLabel, getHeaderId, pinItems } from './utils';\n\nconst ListFilter = (props: Omit<ListFilterProps, 'type'>) => {\n  const {\n    name,\n    title,\n    limit = 10,\n    sort = 'count',\n    sortAscending = sort !== 'count',\n    itemRender,\n    placeholder = '',\n    format,\n  } = props;\n\n  const filterContainerId = `list-${name}`;\n  const { options, reset, setSelected, selected, multi } = useFilter(name, { sort, sortAscending });\n  // Enable search by default if there's more than the limit\n  const { searchable = options.length > limit } = props;\n  // By default, pin selected items if the option count is over limit\n  let { pinSelected } = props;\n  if (!isBoolean(pinSelected)) {\n    pinSelected = options.length > limit;\n  }\n\n  // Because as the selected list changes the elements are being recreated so the focus is not focusing the correct element anymore\n  const [lastFocusedControl, setLastFocusedControl] = React.useState('');\n  const [query, setQuery] = React.useState('');\n  const { query: q } = useQuery();\n  const [shown, setShown] = React.useState(limit);\n  const { disableDefaultStyles = false, customClassNames, currency, language } = useSearchUIContext();\n  const theme = useTheme();\n  const { t } = useTranslation('filter');\n\n  const styles = getStylesObject(\n    {\n      innerList: [tw`flex items-center justify-between`],\n      count: [tw`ml-2 text-xs text-gray-400`],\n      checkbox: [tw`text-sm`],\n      searchWrapper: [tw`mb-2`],\n      toggleButtonWrapper: [tw`mt-1`],\n      toggleIcon: [tw`ml-2`, `color: ${theme.color.primary.base}`],\n    },\n    disableDefaultStyles,\n  );\n\n  // Reset internal query on global query change\n  React.useEffect(() => {\n    setQuery('');\n  }, [q]);\n\n  // Reset shown number when filtering via internal or external query change\n  React.useEffect(() => {\n    setShown(limit);\n  }, [query, q]);\n\n  // On user interaction, get the last element being interacted with BEFORE the list is rerendered and focus that element\n  React.useEffect(() => {\n    if (!isSSR() && pinSelected) {\n      const input = document\n        .querySelector(`#${filterContainerId}`)\n        ?.querySelector(`input[value=\"${lastFocusedControl}\"]`) as HTMLInputElement | null;\n\n      input?.focus();\n    }\n  }, [JSON.stringify(selected)]);\n\n  const Control = multi ? Checkbox : Radio;\n  const filtered = searchable ? options.filter((o) => o.label.toLowerCase().includes(query.toLowerCase())) : options;\n  const slice = filtered.length > limit;\n\n  const transformedItems = React.useMemo(() => {\n    if (!isSSR() && pinSelected) {\n      setLastFocusedControl(`${(document.activeElement as HTMLInputElement).value}`);\n    }\n    let list = filtered;\n\n    if (pinSelected) {\n      list = pinItems(list, selected, 'label');\n    }\n\n    return list;\n  }, [JSON.stringify(filtered), JSON.stringify(selected), pinSelected]);\n\n  const items = slice ? transformedItems.slice(0, shown) : transformedItems;\n  const allShown = shown >= filtered.length;\n  const Icon = allShown ? IconSmallChevronUp : IconSmallChevronDown;\n  const showMore = React.useCallback(() => {\n    if (allShown) {\n      setShown(limit);\n    } else {\n      setShown((s) => s + 20);\n    }\n  }, [allShown]);\n\n  const innerList = React.useMemo(\n    () =>\n      items.map(({ label, count }) => (\n        <CoreBox css={styles.innerList} key={`${label}-${count}`}>\n          <Control\n            value={label}\n            checked={selected.includes(label)}\n            onChange={noop}\n            css={styles.checkbox}\n            disableDefaultStyles={disableDefaultStyles}\n          >\n            {typeof itemRender === 'function' ? itemRender(label) : formatLabel(label, { format, currency, t })}\n          </Control>\n          <span css={styles.count}>{count.toLocaleString(language)}</span>\n        </CoreBox>\n      )),\n    [JSON.stringify(items), itemRender, selected],\n  );\n\n  const filterSearchOnChange = React.useCallback((value) => {\n    setQuery(value || '');\n  }, []);\n\n  if (isEmpty(options) && isEmpty(selected)) {\n    return null;\n  }\n\n  return (\n    <Box title={title} name={name} showReset={selected.length > 0 && multi} onReset={reset}>\n      {searchable ? (\n        <CoreBox css={styles.searchWrapper}>\n          <Combobox\n            value={query}\n            size=\"sm\"\n            className={customClassNames.filter?.list?.searchFilter}\n            placeholder={placeholder}\n            onChange={filterSearchOnChange}\n            disableDefaultStyles={disableDefaultStyles}\n          />\n        </CoreBox>\n      ) : null}\n\n      <CoreBox id={filterContainerId} className={customClassNames.filter?.list?.container}>\n        {multi ? (\n          <CheckboxGroup\n            value={selected}\n            onChange={setSelected}\n            className={customClassNames.filter?.list?.checkboxGroup}\n            disableDefaultStyles={disableDefaultStyles}\n            aria-labelledby={getHeaderId(name)}\n          >\n            {innerList}\n          </CheckboxGroup>\n        ) : (\n          <RadioGroup\n            value={selected[0]}\n            onChange={(e) => setSelected([e.target.value])}\n            className={customClassNames.filter?.list?.radioGroup}\n            disableDefaultStyles={disableDefaultStyles}\n            aria-labelledby={getHeaderId(name)}\n          >\n            {innerList}\n          </RadioGroup>\n        )}\n      </CoreBox>\n\n      {slice ? (\n        <CoreBox css={styles.toggleButtonWrapper}>\n          <Button\n            appearance=\"link\"\n            onClick={showMore}\n            aria-controls={filterContainerId}\n            size=\"sm\"\n            spacing=\"none\"\n            className={customClassNames.filter?.list?.toggleButton}\n            disableDefaultStyles={disableDefaultStyles}\n          >\n            {t(allShown ? 'showLess' : 'showMore')}\n            <Icon css={styles.toggleIcon} />\n          </Button>\n        </CoreBox>\n      ) : null}\n    </Box>\n  );\n};\n\nexport default ListFilter;\nexport type { ListFilterProps };\n","import { RangeInput } from '@sajari/react-components';\nimport { useRangeFilter } from '@sajari/react-hooks';\nimport * as React from 'react';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport Box from './Box';\nimport { RangeFilterProps } from './types';\nimport { getHeaderId } from './utils';\n\nconst RangeFilter = (props: Omit<RangeFilterProps, 'type' | 'step'>) => {\n  const { name, title, format, showInputs, steps, tick, ticks } = props;\n  const { min, max, range, setRange, reset, showReset, step } = useRangeFilter(name);\n  const { disableDefaultStyles = false, customClassNames, currency, language } = useSearchUIContext();\n\n  if (!range || max === 0) {\n    return null;\n  }\n\n  return (\n    <Box title={title} name={name} showReset={showReset} onReset={reset}>\n      <RangeInput\n        language={language}\n        format={format}\n        currency={currency}\n        min={min}\n        max={max}\n        value={range}\n        step={step}\n        steps={steps}\n        tick={tick}\n        ticks={ticks}\n        showInputs={showInputs}\n        onChange={setRange}\n        disableDefaultStyles={disableDefaultStyles}\n        className={customClassNames.filter?.range?.container}\n        fillClassName={customClassNames.filter?.range?.fill}\n        handleClassName={customClassNames.filter?.range?.handle}\n        handleActiveClassName={customClassNames.filter?.range?.handleActive}\n        inputClassName={customClassNames.filter?.range?.input}\n        trackClassName={customClassNames.filter?.range?.track}\n        aria-labelledby={getHeaderId(name)}\n      />\n    </Box>\n  );\n};\n\nexport default RangeFilter;\nexport type { RangeFilterProps };\n","import { Rating } from '@sajari/react-components';\nimport React, { useCallback } from 'react';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport ListFilter from './ListFilter';\nimport { RatingFilterProps } from './types';\n\nconst RatingFilter = ({ name, title }: Omit<RatingFilterProps, 'type'>) => {\n  const { ratingMax, disableDefaultStyles, customClassNames } = useSearchUIContext();\n\n  const renderRating = useCallback(\n    (v: string) => (\n      <Rating\n        max={ratingMax}\n        className={customClassNames.filter?.rating?.container}\n        activeRatingItemClassName={customClassNames.filter?.rating?.activeRatingItem}\n        activeHalfRatingItemClassName={customClassNames.filter?.rating?.activeHalfRatingItem}\n        value={Number(v)}\n        disableDefaultStyles={disableDefaultStyles}\n      />\n    ),\n    [ratingMax, JSON.stringify(customClassNames.filter?.rating), disableDefaultStyles],\n  );\n\n  return <ListFilter name={name} title={title} sort=\"none\" pinSelected={false} itemRender={renderRating} />;\n};\n\nexport default RatingFilter;\nexport type { RatingFilterProps };\n","import { Option, Select } from '@sajari/react-components';\nimport { useFilter } from '@sajari/react-hooks';\nimport { isArray, isEmpty } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport Box from './Box';\nimport { SelectFilterProps } from './types';\nimport { formatLabel } from './utils';\n\nconst SelectFilter = (props: Omit<SelectFilterProps, 'type'>) => {\n  const { name, title, sort = 'count', sortAscending = sort !== 'count', format } = props;\n  const { options, reset, setSelected, selected, multi } = useFilter(name, { sort, sortAscending });\n  const { disableDefaultStyles = false, customClassNames, currency } = useSearchUIContext();\n  const { t } = useTranslation('filter');\n\n  if (isEmpty(options) && isEmpty(selected)) {\n    return null;\n  }\n\n  const getSelectText = (labels: Array<string | number>) => {\n    if (!labels.length) {\n      return t('select');\n    }\n\n    if (labels.length === 1) {\n      const [first] = labels;\n      return first;\n    }\n\n    return t('selected', { count: labels.length.toLocaleString() as never });\n  };\n\n  return (\n    <Box title={title} name={name} showReset={selected.length > 0 && multi} onReset={reset}>\n      {!isEmpty(options) && (\n        <Select\n          multiple={multi}\n          onChange={(value) => setSelected(isArray(value) ? value : [value])}\n          value={selected}\n          disableDefaultStyles={disableDefaultStyles}\n          size=\"sm\"\n          text={getSelectText}\n          className={customClassNames.filter?.select?.container}\n          buttonClassName={customClassNames.filter?.select?.button}\n          dropdownClassName={customClassNames.filter?.select?.dropdown}\n          optionClassName={customClassNames.filter?.select?.option}\n        >\n          {options.map(({ value, label, count }) => (\n            <Option value={label} key={value} label={count.toLocaleString()}>\n              {formatLabel(label, { format, currency, t })}\n            </Option>\n          ))}\n        </Select>\n      )}\n    </Box>\n  );\n};\n\nexport default SelectFilter;\nexport type { SelectFilterProps };\n","import { Box, Tab, TabList, Tabs } from '@sajari/react-components';\nimport { useFilter } from '@sajari/react-hooks';\nimport { isEmpty, useTheme } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport tw from 'twin.macro';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport { TabFilterProps } from './types';\nimport { formatLabel } from './utils';\n\nconst TabFilter = (props: Omit<TabFilterProps, 'type'>) => {\n  const { name, title, limit = 15, sort = 'count', sortAscending = sort !== 'count', format } = props;\n  const { t } = useTranslation('filter');\n  const theme = useTheme();\n  const { options, setSelected, selected } = useFilter(name, { sort, sortAscending });\n  const sliced = limit && options.length > limit ? options.slice(0, limit) : options;\n  const { disableDefaultStyles = false, customClassNames, currency, language } = useSearchUIContext();\n\n  if (isEmpty(sliced)) {\n    return null;\n  }\n\n  const selectedIndex = sliced.findIndex(({ label }) => label === selected[0]);\n\n  return (\n    <Tabs\n      aria-label={title}\n      onChange={(index) => setSelected(index !== 0 ? [sliced[index - 1].label] : [])}\n      index={selectedIndex < 0 ? 0 : selectedIndex + 1}\n      disableDefaultStyles={disableDefaultStyles}\n      className={customClassNames.filter?.tabs?.container}\n    >\n      <TabList className={customClassNames.filter?.tabs?.list}>\n        <Tab\n          className={customClassNames.filter?.tabs?.tab}\n          selectedClassName={customClassNames.filter?.tabs?.selectedTab}\n        >\n          {t('all')}\n        </Tab>\n        {sliced.map(({ label, count, value }, index) => (\n          <Tab\n            key={value}\n            className={customClassNames.filter?.tabs?.tab}\n            selectedClassName={customClassNames.filter?.tabs?.selectedTab}\n          >\n            {`${formatLabel(label, { format, currency, t })}`}\n            <Box\n              as=\"span\"\n              css={[\n                tw`py-0.5 px-1 rounded ml-3 text-xs leading-tight transition-colors`,\n                index === selectedIndex\n                  ? { backgroundColor: theme.color.primary.active, color: theme.color.primary.text }\n                  : tw`text-gray-500 bg-gray-100`,\n              ]}\n            >\n              {count.toLocaleString(language)}\n            </Box>\n          </Tab>\n        ))}\n      </TabList>\n    </Tabs>\n  );\n};\n\nexport default TabFilter;\nexport type { TabFilterProps };\n","import * as React from 'react';\n\nimport ColorFilter from './ColorFilter';\nimport ListFilter from './ListFilter';\nimport RangeFilter from './RangeFilter';\nimport RatingFilter from './RatingFilter';\nimport SelectFilter from './SelectFilter';\nimport TabFilter from './TabFilter';\nimport { FilterProps } from './types';\n\nconst Filter = ({ type = 'list', ...rest }: FilterProps) => {\n  if (type === 'color') {\n    return <ColorFilter {...rest} />;\n  }\n\n  if (type === 'range') {\n    return <RangeFilter {...rest} />;\n  }\n\n  if (type === 'rating') {\n    return <RatingFilter {...rest} />;\n  }\n\n  if (type === 'select') {\n    return <SelectFilter {...rest} />;\n  }\n\n  if (type === 'tabs') {\n    return <TabFilter {...rest} />;\n  }\n\n  return <ListFilter {...rest} />;\n};\n\nexport default Filter;\nexport * from './types';\n","import { ClickTracking, PosNegTracking, Token } from '@sajari/react-hooks';\nimport { isEmpty, isFunction, isString, isValidURL, noop } from '@sajari/react-sdk-utils';\n\nimport { ResultValues } from '../Results/types';\n\ninterface UseClickTrackingParams {\n  token: Token | undefined;\n  tracking: ClickTracking | PosNegTracking | undefined;\n  values: ResultValues;\n  onClick?: (url: string) => void;\n}\n\nfunction useClickTracking(params: UseClickTrackingParams) {\n  const { onClick, token, tracking, values } = params;\n  const { url } = values;\n\n  if (!tracking) {\n    return {\n      href: url,\n      onClick: noop,\n    };\n  }\n\n  // Get the click token from the response\n  const clickToken = token && 'click' in token ? token.click : undefined;\n  // Determine if the field used for the token is a valid URL (then it can redirect)\n  const useToken =\n    !isEmpty(clickToken) && Object.keys(values).includes(tracking.field) && isValidURL(values[tracking.field]);\n  // Determine href to use for links\n  const href = useToken ? clickToken : url;\n\n  const onClickHandler = () => {\n    if (isFunction(onClick)) {\n      onClick(url);\n    }\n\n    // Fire the click token using sendBeacon if we didn't use it for the href\n    if (!useToken && isString(clickToken) && isFunction(navigator?.sendBeacon)) {\n      navigator.sendBeacon(clickToken);\n    }\n  };\n\n  return {\n    href,\n    onClick: onClickHandler,\n  };\n}\n\nexport default useClickTracking;\n","import { FieldDictionary } from '@sajari/react-hooks';\nimport { Result } from '@sajari/sdk-js';\n\n// TODO: Handle mapping arrays in templates\n// e.g. `https://x.com/path/${name}` where name is an array (e.g. ['x', 'y']) should return ['https://x.com/path/x', 'https://x.com/path/y']\nconst fillTemplate = <T = Record<string, string | string[]>>(template: string, variables: T) =>\n  template.replace(/\\${(.*?)}/g, (_, g: string) => variables[g].toString());\n\nexport function mapFields<T = Record<string, string | string[] | null>>(values: T, fields: FieldDictionary = {}) {\n  return Object.entries(fields).reduce(\n    (mapped, [to, from]) => {\n      let value: string | null;\n      if (from === false) {\n        value = null;\n      } else if (Array.isArray(from)) {\n        const match = from.find((f) => Object.keys(values).includes(f)) as string;\n        value = values[match];\n      } else if (typeof from === 'function') {\n        value = from(values);\n      } else if (/\\${.+}/.test(from)) {\n        value = fillTemplate<T>(from, values);\n      } else if (from.startsWith('!function')) {\n        const functionBody = from.replace('!function', '');\n        // eslint-disable-next-line @typescript-eslint/no-implied-eval\n        const func = new Function('data', functionBody);\n        value = func(values);\n      } else {\n        value = values[from];\n      }\n\n      return {\n        ...mapped,\n        [to]: value,\n      };\n    },\n    { ...values },\n  );\n}\n\nexport default function mapResultFields<T = Record<string, string | string[]>>(\n  results: Result[],\n  fields: FieldDictionary,\n) {\n  return results.map(({ values, ...rest }) => ({\n    ...rest,\n    values: mapFields<T>((values as unknown) as T, fields),\n  }));\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Combobox } from '@sajari/react-components';\nimport { useAutocomplete, useQuery, useSearchContext } from '@sajari/react-hooks';\nimport { __DEV__, isArray } from '@sajari/react-sdk-utils';\nimport React, { useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport { useClickTracking } from '../hooks';\nimport { ResultValues } from '../Results/types';\nimport mapResultFields from '../utils/mapResultFields';\nimport { InputProps } from './types';\n\nconst Input = React.forwardRef((props: InputProps<any>, ref: React.Ref<HTMLInputElement>) => {\n  const { t } = useTranslation('input');\n  const { placeholder = t('placeholder'), mode = 'instant', onSelect, onChange, ...rest } = props;\n  const { results: rawResults, search, searching, fields } = useSearchContext();\n  const results = React.useMemo(() => mapResultFields<ResultValues>(rawResults ?? [], fields), [rawResults]);\n  const { search: searchAutocomplete, completion, suggestions } = useAutocomplete();\n  const { customClassNames, disableDefaultStyles = false, tracking } = useSearchUIContext();\n  const { query } = useQuery();\n  let items: Array<any> = [];\n\n  if (mode === 'suggestions') {\n    items = suggestions;\n  } else if (mode === 'results') {\n    // Only display 5 items\n    items = results.splice(0, 5).map((result) => {\n      const { values, token } = result;\n      const { description, image, title } = values;\n      const { href, onClick } = useClickTracking({ tracking, values, token });\n\n      return {\n        title,\n        url: href,\n        onClick,\n        description,\n        image: isArray(image) ? image[0] : image,\n      };\n    });\n  }\n\n  const onChangeMemoized = useCallback(\n    (value) => {\n      if (onChange) {\n        onChange(value);\n      }\n\n      if (mode === 'suggestions' || mode === 'typeahead') {\n        if (searchAutocomplete) {\n          searchAutocomplete(value);\n        }\n      } else if (mode === 'instant' || mode === 'results') {\n        search(value);\n      }\n    },\n    [onChange, mode, search],\n  );\n\n  const onKeyDownMemoized = useCallback(\n    (e) => {\n      if (e.key === 'Enter' && (mode === 'typeahead' || mode === 'suggestions' || mode === 'standard')) {\n        search((e.target as HTMLInputElement).value);\n      }\n    },\n    [mode, search],\n  );\n\n  const onSelectMemoized = useCallback(\n    (item) => {\n      if (onSelect) {\n        onSelect(item);\n      }\n      if (mode === 'suggestions') {\n        search(item as string);\n      }\n    },\n    [mode, search],\n  );\n\n  return (\n    <Combobox\n      {...rest}\n      ref={ref}\n      placeholder={placeholder}\n      mode={mode as Exclude<InputProps<any>['mode'], 'instant'>}\n      items={items}\n      completion={mode === 'typeahead' ? completion : ''}\n      value={query}\n      loading={searching}\n      onChange={onChangeMemoized}\n      onKeyDown={onKeyDownMemoized}\n      onSelect={onSelectMemoized}\n      className={customClassNames.input?.container}\n      dropdownClassName={customClassNames.input?.dropdown}\n      dropdownFooterClassName={customClassNames.input?.dropdownFooter}\n      dropdownHighlightItemClassName={customClassNames.input?.dropdownHighlightItem}\n      dropdownSelectedItemClassName={customClassNames.input?.dropdownSelectedItem}\n      dropdownItemClassName={customClassNames.input?.dropdownItem}\n      dropdownListClassName={customClassNames.input?.dropdownList}\n      inputClassName={customClassNames.input?.input}\n      inputContainerClassName={customClassNames.input?.inputContainer}\n      resultClassName={customClassNames.input?.result}\n      resultImageContainerClassName={customClassNames.input?.resultImageContainer}\n      resultTextContainerClassName={customClassNames.input?.resultTextContainer}\n      selectedResultClassName={customClassNames.input?.selectedResult}\n      typeaheadClassName={customClassNames.input?.typeahead}\n      voiceInputClassName={customClassNames.input?.voiceInput}\n      disableDefaultStyles={disableDefaultStyles}\n    />\n  );\n});\n\nif (__DEV__) {\n  Input.displayName = 'Input';\n}\n\nexport default Input;\nexport type { InputProps };\n","import { Pagination as PurePagination } from '@sajari/react-components';\nimport { usePagination } from '@sajari/react-hooks';\nimport { __DEV__ } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport { PaginationProps } from './types';\n\nconst Pagination = (props: PaginationProps) => {\n  const { t } = useTranslation('pagination');\n  const { page, setPage, pageCount, resultsPerPage, totalResults } = usePagination('search');\n  const { customClassNames, disableDefaultStyles, language } = useSearchUIContext();\n\n  return (\n    <PurePagination\n      language={language}\n      page={page}\n      resultsPerPage={resultsPerPage}\n      totalResults={totalResults}\n      pageCount={pageCount}\n      onChange={setPage}\n      i18n={{\n        label: t('label'),\n        previous: t('previous'),\n        next: t('next'),\n        page: (params) => t('page', params),\n        current: (params) => t('current', params),\n      }}\n      className={customClassNames?.pagination?.container}\n      buttonClassName={customClassNames?.pagination?.button}\n      activeClassName={customClassNames?.pagination?.active}\n      prevClassName={customClassNames?.pagination?.prev}\n      nextClassName={customClassNames?.pagination?.next}\n      spacerEllipsisClassName={customClassNames?.pagination?.spacerEllipsis}\n      statusClassName={customClassNames?.pagination?.status}\n      disableDefaultStyles={disableDefaultStyles}\n      {...props}\n    />\n  );\n};\n\nif (__DEV__) {\n  Pagination.displayName = 'Pagination';\n}\n\nexport default Pagination;\nexport type { PaginationProps };\n","import { mapStyles } from '@sajari/react-sdk-utils';\nimport tw from 'twin.macro';\n\nexport default function useMessageStyles() {\n  const styles = {\n    container: [tw`w-full px-6 py-20 text-center md:py-40 md:px-12`],\n    loadingWrapper: [tw`text-gray-500`],\n    loadingSpinner: [tw`inline-block w-6 h-6`],\n    loadingText: [tw`mt-3`],\n    errorHeading: [tw`text-red-500`],\n    errorText: [tw`text-gray-500`],\n    defaultText: [tw`text-gray-500`],\n  };\n\n  return mapStyles(styles);\n}\n","import { Box, Heading, Spinner, Text } from '@sajari/react-components';\nimport { getStylesObject } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\n\nimport useMessageStyles from './styles';\nimport { MessageProps } from './types';\n\nconst Message = (props: MessageProps) => {\n  const { title, body, appearance, styles: stylesProp, disableDefaultStyles = false, ...rest } = props;\n  const styles = getStylesObject(useMessageStyles(), disableDefaultStyles);\n\n  const render = () => {\n    switch (appearance) {\n      case 'loading':\n        return (\n          <Box css={styles.loadingWrapper}>\n            <Spinner css={styles.loadingSpinner} disableDefaultStyles={disableDefaultStyles} />\n            {title && <Text css={styles.loadingText} disableDefaultStyles={disableDefaultStyles}>{`${title}...`}</Text>}\n          </Box>\n        );\n\n      case 'error':\n        return (\n          <React.Fragment>\n            <Heading size=\"3xl\" css={styles.errorHeading} disableDefaultStyles={disableDefaultStyles}>\n              {title}\n            </Heading>\n            {body && (\n              <Text css={styles.errorText} disableDefaultStyles={disableDefaultStyles}>\n                {body}\n              </Text>\n            )}\n          </React.Fragment>\n        );\n\n      default:\n      case 'default':\n        return (\n          <React.Fragment>\n            <Heading size=\"3xl\" disableDefaultStyles={disableDefaultStyles}>\n              {title}\n            </Heading>\n            {body && (\n              <Text\n                css={styles.defaultText}\n                disableDefaultStyles={disableDefaultStyles}\n                dangerouslySetInnerHTML={{\n                  __html: body,\n                }}\n              />\n            )}\n          </React.Fragment>\n        );\n    }\n  };\n\n  return (\n    <Box css={[styles.container, stylesProp]} {...rest}>\n      {render()}\n    </Box>\n  );\n};\n\nexport default Message;\n","import { inferStylesObjectKeys, mapStyles } from '@sajari/react-sdk-utils';\nimport tw from 'twin.macro';\n\nimport { ResultProps } from './types';\n\ninterface UseResultStylesParams extends ResultProps {\n  isOnSale?: boolean;\n}\n\nexport default function useResultStyles(props: UseResultStylesParams) {\n  const { appearance, isOnSale } = props;\n\n  const styles = inferStylesObjectKeys({\n    container: [],\n    imageContainer: [],\n    image: [tw`rounded-md`],\n    content: [tw`flex-1 min-w-0`],\n    header: [tw`flex items-start justify-between`],\n    title: [tw`font-medium`],\n    subtitle: [tw`text-xs text-gray-400`],\n    description: [tw`mt-1 text-sm text-gray-500`],\n    rating: [tw`mt-1 space-y-1 text-center`],\n    priceContainer: [],\n    price: [isOnSale ? tw`font-medium text-red-500` : ''],\n    originalPrice: [tw`text-xs text-gray-400 line-through`],\n  });\n\n  switch (appearance) {\n    case 'grid':\n      styles.container.push(tw`text-center`);\n      styles.imageContainer.push(tw`block mb-4`);\n      styles.priceContainer.push(tw`flex items-baseline justify-center space-x-1`);\n      break;\n\n    default:\n    case 'list':\n      styles.container.push(tw`flex items-center w-full`);\n      styles.imageContainer.push(tw`w-24 mr-6`);\n      styles.priceContainer.push(tw`text-right`);\n      break;\n  }\n\n  return mapStyles(styles);\n}\n","/* eslint-disable react/jsx-no-target-blank */\nimport { Box, Heading, Image, ImageProps, Link, Rating, Text } from '@sajari/react-components';\nimport {\n  __DEV__,\n  decodeHTML,\n  formatPrice,\n  getStylesObject,\n  isArray,\n  isNumber,\n  isString,\n  isValidURL,\n} from '@sajari/react-sdk-utils';\nimport React, { useMemo } from 'react';\n\nimport { useSearchUIContext } from '../../../ContextProvider';\nimport { useClickTracking } from '../../../hooks';\nimport useResultStyles from './styles';\nimport { ResultProps } from './types';\n\nconst Result = React.memo(\n  (props: ResultProps) => {\n    const {\n      appearance = 'list',\n      imageAspectRatio: imageAspectRatioProp = 1,\n      imageObjectFit: imageObjectFitProp = 'contain',\n      values,\n      token,\n      forceImage,\n      headingClassName,\n      priceClassName,\n      originalPriceClassName,\n      subTitleClassName,\n      ratingClassName,\n      descriptionClassName,\n      disableDefaultStyles = false,\n      onClick: onClickProp,\n      styles: stylesProp,\n      ...rest\n    } = props;\n    const { currency, language, ratingMax, tracking } = useSearchUIContext();\n    const { href, onClick } = useClickTracking({ token, tracking, values, onClick: onClickProp });\n    const { title, description, subtitle, image, price, originalPrice } = values;\n    const rating = Number(values.rating);\n\n    // Determine if the result is on sale\n    const isOnSale = React.useMemo(() => {\n      if (!price || !originalPrice) {\n        return false;\n      }\n\n      const parsePrices = (input: string | Array<string>) => (isArray(input) ? input : [input]).map(Number);\n      const prices = parsePrices(price);\n      const originalPrices = parsePrices(originalPrice);\n\n      if (originalPrices.length >= prices.length) {\n        return prices.some((p, index) => isNumber(p) && isNumber(originalPrices[index]) && p < originalPrices[index]);\n      }\n\n      if (originalPrices.length === 1 && prices.length > 1) {\n        const [original] = originalPrices;\n\n        if (!isNumber(original)) {\n          return false;\n        }\n\n        return prices.some((p) => isNumber(p) && p < original);\n      }\n\n      return false;\n    }, [JSON.stringify(price), JSON.stringify(originalPrice)]);\n\n    const styles = getStylesObject(useResultStyles({ ...props, appearance, isOnSale }), disableDefaultStyles);\n\n    const imageAspectRatio: ImageProps['aspectRatio'] = useMemo(() => {\n      const aspectRatio = imageAspectRatioProp;\n\n      if (isNumber(aspectRatio) || aspectRatio === null) {\n        return aspectRatio;\n      }\n\n      return aspectRatio[appearance];\n    }, [appearance, imageAspectRatioProp]);\n\n    const imageObjectFit: ImageProps['objectFit'] = useMemo(() => {\n      const objectFit = imageObjectFitProp;\n\n      if (isString(objectFit) || objectFit === null) {\n        return objectFit;\n      }\n\n      return objectFit[appearance];\n    }, [appearance, imageObjectFitProp]);\n\n    const imageSrc = isArray(image) ? image[0] : image;\n    const imageHoverSrc = isArray(image) ? image[1] : undefined;\n\n    const renderTitle = () => (\n      <Heading as=\"h1\" size=\"base\" css={styles.title} className={headingClassName}>\n        <Link href={href} onClick={onClick}>\n          {decodeHTML(title)}\n        </Link>\n      </Heading>\n    );\n\n    const renderSubtitle = () => {\n      if (!subtitle) return null;\n\n      if (isValidURL(subtitle)) {\n        return (\n          <Link\n            href={href}\n            onClick={onClick}\n            css={styles.subtitle}\n            disableDefaultStyles={disableDefaultStyles}\n            className={subTitleClassName}\n          >\n            {subtitle}\n          </Link>\n        );\n      }\n\n      return (\n        <Text css={styles.subtitle} disableDefaultStyles={disableDefaultStyles} className={subTitleClassName}>\n          {subtitle}\n        </Text>\n      );\n    };\n\n    const renderPrice = () => {\n      if (!price) return null;\n\n      return (\n        <Box css={styles.priceContainer}>\n          <Text css={styles.price} className={priceClassName} disableDefaultStyles={disableDefaultStyles}>\n            {formatPrice(price, { currency, language })}\n          </Text>\n\n          {originalPrice && isOnSale && (\n            <Text\n              css={styles.originalPrice}\n              className={originalPriceClassName}\n              disableDefaultStyles={disableDefaultStyles}\n            >\n              {formatPrice(\n                isArray(originalPrice)\n                  ? originalPrice\n                      .map(Number)\n                      .filter((p) => isNumber(p) && p !== 0)\n                      .map(String)\n                  : originalPrice,\n                {\n                  currency,\n                  language,\n                },\n              )}\n            </Text>\n          )}\n        </Box>\n      );\n    };\n\n    return (\n      <Box as=\"article\" {...rest} css={[styles.container, stylesProp]}>\n        {(isValidURL(imageSrc, true) || forceImage) && (\n          <Link\n            href={href}\n            onClick={onClick}\n            onContextMenu={onClick}\n            css={styles.imageContainer}\n            disableDefaultStyles={disableDefaultStyles}\n          >\n            <Image\n              src={imageSrc}\n              hoverSrc={imageHoverSrc}\n              css={styles.image}\n              aspectRatio={imageAspectRatio}\n              objectFit={imageObjectFit}\n              disableDefaultStyles={disableDefaultStyles}\n            />\n          </Link>\n        )}\n\n        <Box css={styles.content}>\n          {appearance === 'list' && (\n            <Box css={styles.header}>\n              <Box>\n                {renderTitle()}\n                {renderSubtitle()}\n              </Box>\n\n              <Box>{renderPrice()}</Box>\n            </Box>\n          )}\n\n          {appearance === 'grid' && (\n            <>\n              {renderTitle()}\n              {renderSubtitle()}\n            </>\n          )}\n\n          {isNumber(rating) && (\n            <Rating\n              value={rating}\n              max={ratingMax}\n              className={ratingClassName}\n              disableDefaultStyles={disableDefaultStyles}\n            />\n          )}\n\n          {appearance === 'list' && description && (\n            <Text truncate={2} css={styles.description} className={descriptionClassName}>\n              {decodeHTML(description)}\n            </Text>\n          )}\n\n          {appearance === 'grid' && renderPrice()}\n        </Box>\n      </Box>\n    );\n  },\n  (prev, next) => JSON.stringify(prev) === JSON.stringify(next),\n);\n\nif (__DEV__) {\n  Result.displayName = 'Result';\n}\n\nexport default Result;\nexport type { ResultProps };\n","import { clamp, inferStylesObjectKeys, isNumber, isObject, mapStyles } from '@sajari/react-sdk-utils';\nimport tw from 'twin.macro';\n\nimport { ColumnValue, GapValue, ResultsProps } from './types';\n\ninterface Props extends ResultsProps {\n  width: number;\n}\n\nfunction findBreakpoint<T>(breakpoints: Record<number, T>, target: number): T | null {\n  const match = Object.keys(breakpoints)\n    .map(Number)\n    .sort((a, b) => b - a)\n    .find((s) => s <= target);\n\n  return match ? breakpoints[match] : null;\n}\n\nexport default function useResultsStyles({\n  appearance = 'list',\n  columnMinWidth = 240,\n  columns: columnsProp,\n  gap: gapProp = appearance === 'list' ? { 0: 4, 640: 8 } : undefined,\n  width,\n}: Props) {\n  const styles = inferStylesObjectKeys({\n    container: [],\n  });\n\n  if (appearance === 'list') {\n    styles.container.push(tw`flex flex-col`);\n    let spaceY: GapValue = 4;\n\n    if (gapProp) {\n      if (isNumber(gapProp)) {\n        spaceY = gapProp;\n      } else if (isObject(gapProp)) {\n        const match = findBreakpoint<GapValue>(gapProp, width);\n        if (match) {\n          spaceY = match;\n        }\n      }\n\n      switch (spaceY) {\n        case 1:\n          styles.container.push(tw`space-y-1`);\n          break;\n        case 2:\n          styles.container.push(tw`space-y-2`);\n          break;\n        case 3:\n          styles.container.push(tw`space-y-3`);\n          break;\n        case 4:\n          styles.container.push(tw`space-y-4`);\n          break;\n        case 5:\n          styles.container.push(tw`space-y-5`);\n          break;\n        case 6:\n          styles.container.push(tw`space-y-6`);\n          break;\n        case 7:\n          styles.container.push(tw`space-y-7`);\n          break;\n        case 8:\n          styles.container.push(tw`space-y-8`);\n          break;\n        case 9:\n          styles.container.push(tw`space-y-9`);\n          break;\n        case 10:\n          styles.container.push(tw`space-y-10`);\n          break;\n        case 11:\n          styles.container.push(tw`space-y-11`);\n          break;\n        case 12:\n          styles.container.push(tw`space-y-12`);\n          break;\n        default:\n          styles.container.push(tw`space-y-4`);\n          break;\n      }\n    }\n  } else if (appearance === 'grid') {\n    styles.container.push(tw`grid`);\n\n    // TODO: These sort of helpers should go in utils ideally, or find a better way to handle this\n    let columns: ColumnValue = 1;\n    let gap: GapValue = 8;\n\n    if (columnsProp) {\n      if (isNumber(columnsProp)) {\n        columns = columnsProp;\n      } else if (isObject(columnsProp)) {\n        const match = findBreakpoint<ColumnValue>(columnsProp, width);\n        if (match) {\n          columns = match;\n        }\n      }\n    } else if (isNumber(columnMinWidth)) {\n      columns = clamp(Math.floor(width / columnMinWidth), 1, 12) as ColumnValue;\n    }\n\n    if (gapProp) {\n      if (isNumber(gapProp)) {\n        gap = gapProp;\n      } else if (isObject(gapProp)) {\n        const match = findBreakpoint<GapValue>(gapProp, width);\n        if (match) {\n          gap = match;\n        }\n      }\n    }\n\n    switch (columns) {\n      case 1:\n        styles.container.push(tw`grid-cols-1`);\n        break;\n      case 2:\n        styles.container.push(tw`grid-cols-2`);\n        break;\n      case 3:\n        styles.container.push(tw`grid-cols-3`);\n        break;\n      case 4:\n        styles.container.push(tw`grid-cols-4`);\n        break;\n      case 5:\n        styles.container.push(tw`grid-cols-5`);\n        break;\n      case 6:\n        styles.container.push(tw`grid-cols-6`);\n        break;\n      case 7:\n        styles.container.push(tw`grid-cols-7`);\n        break;\n      case 8:\n        styles.container.push(tw`grid-cols-8`);\n        break;\n      case 9:\n        styles.container.push(tw`grid-cols-9`);\n        break;\n      case 10:\n        styles.container.push(tw`grid-cols-10`);\n        break;\n      case 11:\n        styles.container.push(tw`grid-cols-11`);\n        break;\n      case 12:\n        styles.container.push(tw`grid-cols-12`);\n        break;\n      default:\n        styles.container.push(tw`grid-cols-1`);\n        break;\n    }\n\n    switch (gap) {\n      case 1:\n        styles.container.push(tw`gap-1`);\n        break;\n      case 2:\n        styles.container.push(tw`gap-2`);\n        break;\n      case 3:\n        styles.container.push(tw`gap-3`);\n        break;\n      case 4:\n        styles.container.push(tw`gap-4`);\n        break;\n      case 5:\n        styles.container.push(tw`gap-5`);\n        break;\n      case 6:\n        styles.container.push(tw`gap-6`);\n        break;\n      case 7:\n        styles.container.push(tw`gap-7`);\n        break;\n      case 8:\n        styles.container.push(tw`gap-8`);\n        break;\n      case 9:\n        styles.container.push(tw`gap-9`);\n        break;\n      case 10:\n        styles.container.push(tw`gap-10`);\n        break;\n      case 11:\n        styles.container.push(tw`gap-11`);\n        break;\n      case 12:\n        styles.container.push(tw`gap-12`);\n        break;\n      default:\n        styles.container.push(tw`gap-8`);\n        break;\n    }\n  }\n\n  return mapStyles(styles);\n}\n","import { ResizeObserver } from '@sajari/react-components';\nimport { useQuery, useSearchContext, useTracking } from '@sajari/react-hooks';\nimport { getStylesObject, isEmpty, isNullOrUndefined } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport mapResultFields from '../utils/mapResultFields';\nimport Message from './components/Message';\nimport Result from './components/Result';\nimport useResultsStyles from './styles';\nimport { ResultsProps, ResultValues } from './types';\n\nconst Results = (props: ResultsProps) => {\n  const { results: rawResults, searching, fields, error } = useSearchContext();\n  const results = React.useMemo(() => (rawResults ? mapResultFields<ResultValues>(rawResults, fields) : undefined), [\n    rawResults,\n  ]);\n  const { disableDefaultStyles = false, customClassNames, viewType, setViewType } = useSearchUIContext();\n  const { query } = useQuery();\n  const { defaultAppearance, appearance = viewType, styles: stylesProp, ...rest } = props;\n  const [width, setWidth] = React.useState(0);\n  const { handleResultClicked } = useTracking();\n  const hasImages = React.useMemo(() => results?.some((r) => r.values?.image), [results]);\n  const styles = getStylesObject(useResultsStyles({ ...props, appearance, width }), disableDefaultStyles);\n  const { t } = useTranslation(['common', 'errors', 'result']);\n\n  React.useEffect(() => {\n    if (defaultAppearance) {\n      setViewType(defaultAppearance);\n    }\n  }, []);\n\n  if (error) {\n    let body = t('errors:generic');\n\n    if (error.statusCode === 403) {\n      body = t('errors:authorization');\n    } else if (error.name === 'NetworkError' || error.message.startsWith('NetworkError')) {\n      body = t('errors:connection');\n    }\n\n    return <Message title={t('common:error')} body={body} className={customClassNames.results?.errorMessage} />;\n  }\n\n  // We've not searched yet\n  if (isNullOrUndefined(results)) {\n    return (\n      <Message\n        title={t('common:loading')}\n        appearance=\"loading\"\n        disableDefaultStyles={disableDefaultStyles}\n        className={customClassNames.results?.searchingMessage}\n      />\n    );\n  }\n\n  // There's genuinely no results\n  // Show a loader if we're refreshing from no results\n  if (isEmpty(results)) {\n    if (searching) {\n      return (\n        <Message\n          title={t('common:loading')}\n          appearance=\"loading\"\n          disableDefaultStyles={disableDefaultStyles}\n          className={customClassNames.results?.searchingMessage}\n        />\n      );\n    }\n\n    return (\n      <Message\n        title={t('results:empty.title')}\n        body={t('results:empty.body', { query: `<strong>${query}</strong>` })}\n        disableDefaultStyles={disableDefaultStyles}\n        className={customClassNames.results?.emptyMessage}\n      />\n    );\n  }\n\n  return (\n    <ResizeObserver\n      onResize={(rect) => setWidth(rect.width)}\n      css={[styles.container, stylesProp]}\n      className={customClassNames.results?.container}\n    >\n      {results?.map(({ values, token }, i) => (\n        <Result\n          onClick={handleResultClicked}\n          token={token}\n          // eslint-disable-next-line no-underscore-dangle\n          key={values._id ?? i}\n          values={values}\n          appearance={appearance}\n          forceImage={hasImages}\n          disableDefaultStyles={disableDefaultStyles}\n          className={customClassNames.results?.item}\n          headingClassName={customClassNames.results?.heading}\n          descriptionClassName={customClassNames.results?.description}\n          priceClassName={customClassNames.results?.price}\n          ratingClassName={customClassNames.results?.rating}\n          subTitleClassName={customClassNames.results?.subTitle}\n          {...rest}\n        />\n      ))}\n    </ResizeObserver>\n  );\n};\n\nexport default Results;\nexport type { ResultsProps };\n","import { mapStyles } from '@sajari/react-sdk-utils';\nimport tw from 'twin.macro';\n\ninterface UseViewOptionStyleParams {\n  inline?: boolean;\n}\n\nexport default function useViewOptionStyles(params: UseViewOptionStyleParams) {\n  const { inline } = params;\n  const styles = {\n    container: [tw`min-w-0`, inline ? tw`flex items-center space-x-2` : tw`space-y-1`],\n    label: [tw`text-gray-500`],\n  };\n\n  return mapStyles(styles);\n}\n","import { Box, Label, Text } from '@sajari/react-components';\nimport { useSearchContext } from '@sajari/react-hooks';\nimport { getStylesObject } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport useViewOptionStyles from './styles';\nimport { ViewOptionProps } from './types';\n\nconst ViewOption = (props: ViewOptionProps) => {\n  const { disableDefaultStyles = false } = useSearchUIContext();\n  const {\n    id,\n    inline = true,\n    renderAsLabel: input,\n    label,\n    size,\n    styles: stylesProp,\n    children,\n    className,\n    labelClassName,\n    ...rest\n  } = props;\n  const labelId = `${id}-label`;\n  const { searched } = useSearchContext();\n  const styles = getStylesObject(useViewOptionStyles({ inline }), disableDefaultStyles);\n\n  if (!searched) {\n    return null;\n  }\n\n  const labelProps = {\n    id: labelId,\n    css: styles.label,\n    size,\n    disableDefaultStyles,\n    className: labelClassName,\n  };\n\n  return (\n    <Box css={[styles.container, stylesProp]} aria-labelledby={labelId} {...rest} className={className}>\n      {input ? (\n        <Label htmlFor={id} {...labelProps}>\n          {label}\n        </Label>\n      ) : (\n        <Text {...labelProps}>{label}</Text>\n      )}\n\n      {children}\n    </Box>\n  );\n};\n\nexport default ViewOption;\nexport type { ViewOptionProps };\n","import { useId } from '@react-aria/utils';\nimport { Option, Select } from '@sajari/react-components';\nimport { useResultsPerPage, useSearchContext } from '@sajari/react-hooks';\nimport { isArray } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport ViewOption from '../ViewOption';\nimport { ResultsPerPageProps } from './types';\n\nconst defaultOptions = [15, 25, 50, 100];\n\nconst ResultsPerPage = (props: ResultsPerPageProps) => {\n  const { t } = useTranslation('resultsPerPage');\n  const { customClassNames, disableDefaultStyles = false } = useSearchUIContext();\n  const { label = t('label'), options = defaultOptions, styles: stylesProp, size, ...rest } = props;\n  const { resultsPerPage, setResultsPerPage } = useResultsPerPage();\n  const { totalResults } = useSearchContext();\n  const id = `page-size-${useId()}`;\n  const optionsSorted = options.sort((a, b) => a - b);\n  const [min] = optionsSorted;\n\n  if (totalResults === 0 || min > totalResults) {\n    return null;\n  }\n\n  return (\n    <ViewOption\n      id={id}\n      label={label}\n      size={size}\n      className={customClassNames.sorting?.container}\n      labelClassName={customClassNames.sorting?.label}\n      renderAsLabel\n      {...rest}\n    >\n      <Select\n        id={id}\n        value={`${resultsPerPage}`}\n        onChange={(value) => setResultsPerPage(Number(isArray(value) ? value[0] : value))}\n        size={size}\n        disableDefaultStyles={disableDefaultStyles}\n        className={customClassNames.resultsPerPage?.select}\n      >\n        {optionsSorted.map((s) => (\n          <Option key={s} value={s}>\n            {s}\n          </Option>\n        ))}\n      </Select>\n    </ViewOption>\n  );\n};\n\nexport default ResultsPerPage;\nexport type { ResultsPerPageProps };\n","import { useId } from '@react-aria/utils';\nimport { Option, Select } from '@sajari/react-components';\nimport { useSorting } from '@sajari/react-hooks';\nimport { isArray } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport ViewOption from '../ViewOption';\nimport { SortingProps, SortOption } from './types';\n\nconst defaultOptions: SortOption[] = [{ name: 'Most relevant', value: '' }];\n\nconst Sorting = (props: SortingProps) => {\n  const { t } = useTranslation('sorting');\n  const { label = t('label'), options = defaultOptions, size, styles: stylesProp, ...rest } = props;\n  const { disableDefaultStyles = false, customClassNames } = useSearchUIContext();\n  const { sorting, setSorting } = useSorting();\n  const id = `sorting-${useId()}`;\n\n  return (\n    <ViewOption\n      id={id}\n      label={label}\n      size={size}\n      className={customClassNames.sorting?.container}\n      labelClassName={customClassNames.sorting?.label}\n      renderAsLabel\n      {...rest}\n    >\n      <Select\n        id={id}\n        value={sorting}\n        onChange={(value) => setSorting(isArray(value) ? value[0] : value)}\n        size={size}\n        disableDefaultStyles={disableDefaultStyles}\n        className={customClassNames.sorting?.select}\n      >\n        {options.map((s) => (\n          <Option key={s.value} value={s.value}>\n            {s.name}\n          </Option>\n        ))}\n      </Select>\n    </ViewOption>\n  );\n};\n\nexport default Sorting;\nexport type { SortingProps };\n","/* eslint-disable react/jsx-one-expression-per-line */\nimport { Box, Button, Text } from '@sajari/react-components';\nimport { useAutocomplete, useSearchContext } from '@sajari/react-hooks';\nimport { pluralize } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\nimport { LiveMessage } from 'react-aria-live';\nimport { useTranslation } from 'react-i18next';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport { SummaryProps } from './types';\n\nconst Summary = (props: SummaryProps) => {\n  const { latency, totalResults, search, queryValues, searched } = useSearchContext();\n  const { disableDefaultStyles, language } = useSearchUIContext();\n  const { suggest = false, showLatency = false, ...rest } = props;\n  const query = queryValues?.get('q') ?? '';\n  const { completion } = useAutocomplete();\n  const { t } = useTranslation(['common', 'summary']);\n\n  if (!searched) {\n    return null;\n  }\n\n  return (\n    <React.Fragment>\n      <LiveMessage\n        message={\n          query === ''\n            ? t('summary:noQueryResults', {\n                count: totalResults,\n                object: pluralize(totalResults, t('common:item'), t('common:items')),\n              })\n            : t('summary:results', {\n                count: totalResults,\n                object: pluralize(totalResults, t('common:result'), t('common:results')),\n                query,\n              })\n        }\n        aria-live=\"polite\"\n      />\n\n      <Text {...rest} disableDefaultStyles={disableDefaultStyles}>\n        <Box\n          as=\"span\"\n          dangerouslySetInnerHTML={{\n            __html:\n              query === ''\n                ? t('summary:noQueryResults', {\n                    count: totalResults.toLocaleString(language),\n                    object: pluralize(totalResults, t('common:item'), t('common:items')).toLowerCase(),\n                  } as Record<string, string>)\n                : t('summary:results', {\n                    count: totalResults.toLocaleString(language),\n                    object: pluralize(totalResults, t('common:result'), t('common:results')).toLowerCase(),\n                    query: `<strong>${query}</strong>`,\n                  } as Record<string, string>),\n          }}\n        />\n        {showLatency ? ` ${t('summary:latency', { time: latency })}` : ''}\n        {completion && completion !== query.trim() && suggest ? (\n          <React.Fragment>\n            {`. ${t('summary:alternative')} `}\n            <Button\n              onClick={() => search(completion)}\n              spacing=\"none\"\n              appearance=\"link\"\n              disableDefaultStyles={disableDefaultStyles}\n            >\n              {completion}\n            </Button>\n            .\n          </React.Fragment>\n        ) : null}\n      </Text>\n    </React.Fragment>\n  );\n};\n\nexport default Summary;\nexport type { SummaryProps };\n","import { useId } from '@react-aria/utils';\nimport { Button, ButtonGroup } from '@sajari/react-components';\nimport * as React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { IconSmallGrid, IconSmallList } from '../assets/icons';\nimport { useSearchUIContext } from '../ContextProvider';\nimport ViewOption from '../ViewOption';\nimport { ViewTypeProps } from './types';\n\nconst ViewType = (props: ViewTypeProps) => {\n  const { t } = useTranslation('viewType');\n  const { customClassNames, disableDefaultStyles = false } = useSearchUIContext();\n  const { label = t('label'), size, styles: stylesProp, ...rest } = props;\n  const id = `view-type-${useId()}`;\n  const { viewType, setViewType } = useSearchUIContext();\n\n  return (\n    <ViewOption\n      id={id}\n      label={label}\n      size={size}\n      className={customClassNames.sorting?.container}\n      labelClassName={customClassNames.sorting?.label}\n      {...rest}\n    >\n      <ButtonGroup\n        attached\n        disableDefaultStyles={disableDefaultStyles}\n        className={customClassNames.viewType?.buttonGroup}\n      >\n        <Button\n          onClick={() => setViewType('grid')}\n          size={size}\n          appearance={viewType === 'grid' ? 'primary' : undefined}\n          aria-label={t('grid')}\n        >\n          &#8203;\n          <IconSmallGrid />\n        </Button>\n        <Button\n          onClick={() => setViewType('list')}\n          size={size}\n          appearance={viewType === 'list' ? 'primary' : undefined}\n          aria-label={t('list')}\n        >\n          &#8203;\n          <IconSmallList />\n        </Button>\n      </ButtonGroup>\n    </ViewOption>\n  );\n};\n\nexport default ViewType;\nexport type { ViewTypeProps };\n"],"names":["common","result","results","items","item","loading","error","errors","authorization","connection","generic","filter","all","rangeOver","rangeUnder","reset","select","selected","showLess","showMore","input","placeholder","resultsPerPage","label","pagination","previous","next","page","current","empty","title","body","sorting","summary","noQueryResults","latency","alternative","viewType","grid","list","i18n","use","LanguageDetector","init","resources","en","fallbackLng","interpolation","escapeValue","react","wait","createContext","strict","name","Provider","useSearchUIContext","ContextProvider","children","search","autocomplete","defaultFilter","searchOnLoad","initialResponse","ratingMax","currency","theme","importantStyles","disableDefaultStyles","customClassNames","viewTypeProp","useState","language","setLanguage","setViewType","useEffect","event","on","off","_jsx","tracking","pipeline","getTracking","SearchProvider","LiveAnnouncer","I18nextProvider","ThemeProvider","pinItems","pinned","prop","sort","a","b","indexOf","getHeaderId","formatLabel","params","format","t","formatPrice","v","formatNumber","style","replace","test","split","map","Number","min","max","startsWith","value","substring","Header","onReset","showReset","useTranslation","styles","getStylesObject","container","heading","_jsxs","Box","header","Heading","isString","undefined","Button","resetButton","React","ref","headerProps","CoreBox","box","colorKeys","Swatch","ColorFilter","useFilter","options","setSelected","optionKeys","useMemo","o","JSON","stringify","filtered","c","some","toLowerCase","color","Component","Color","isEmpty","length","itemChecked","ListFilter","props","limit","sortAscending","itemRender","filterContainerId","multi","searchable","pinSelected","isBoolean","lastFocusedControl","setLastFocusedControl","query","setQuery","useQuery","q","shown","setShown","useTheme","innerList","count","checkbox","searchWrapper","toggleButtonWrapper","toggleIcon","primary","base","isSSR","document","querySelector","focus","Control","Checkbox","Radio","includes","slice","transformedItems","activeElement","allShown","Icon","IconSmallChevronUp","IconSmallChevronDown","s","noop","toLocaleString","filterSearchOnChange","Combobox","searchFilter","CheckboxGroup","checkboxGroup","RadioGroup","e","target","radioGroup","toggleButton","RangeFilter","showInputs","steps","tick","ticks","useRangeFilter","range","setRange","step","RangeInput","fill","handle","handleActive","track","RatingFilter","renderRating","useCallback","Rating","rating","activeRatingItem","activeHalfRatingItem","SelectFilter","getSelectText","labels","first","Select","isArray","button","dropdown","option","Option","TabFilter","sliced","selectedIndex","findIndex","Tabs","index","tabs","TabList","Tab","tab","selectedTab","backgroundColor","active","text","Filter","type","rest","useClickTracking","onClick","token","values","url","href","clickToken","click","useToken","Object","keys","field","isValidURL","onClickHandler","isFunction","navigator","sendBeacon","fillTemplate","template","variables","_","g","toString","mapFields","fields","entries","reduce","mapped","to","from","Array","match","find","f","functionBody","func","Function","mapResultFields","Input","forwardRef","mode","onSelect","onChange","useSearchContext","rawResults","searching","useAutocomplete","searchAutocomplete","completion","suggestions","splice","description","image","onChangeMemoized","onKeyDownMemoized","key","onSelectMemoized","dropdownFooter","dropdownHighlightItem","dropdownSelectedItem","dropdownItem","dropdownList","inputContainer","resultImageContainer","resultTextContainer","selectedResult","typeahead","voiceInput","__DEV__","displayName","Pagination","usePagination","setPage","pageCount","totalResults","PurePagination","prev","spacerEllipsis","status","useMessageStyles","loadingWrapper","loadingSpinner","loadingText","errorHeading","errorText","defaultText","mapStyles","Message","appearance","stylesProp","render","Spinner","Text","React.Fragment","__html","useResultStyles","isOnSale","inferStylesObjectKeys","imageContainer","content","subtitle","priceContainer","price","originalPrice","push","Result","memo","imageAspectRatio","imageAspectRatioProp","imageObjectFit","imageObjectFitProp","forceImage","headingClassName","priceClassName","originalPriceClassName","subTitleClassName","ratingClassName","descriptionClassName","onClickProp","parsePrices","prices","originalPrices","p","isNumber","original","aspectRatio","objectFit","imageSrc","imageHoverSrc","renderTitle","Link","decodeHTML","renderSubtitle","renderPrice","String","Image","findBreakpoint","breakpoints","useResultsStyles","columnMinWidth","columnsProp","columns","gap","gapProp","width","spaceY","isObject","clamp","Math","floor","Results","defaultAppearance","setWidth","useTracking","handleResultClicked","hasImages","r","statusCode","message","errorMessage","isNullOrUndefined","searchingMessage","emptyMessage","ResizeObserver","rect","i","subTitle","_id","useViewOptionStyles","inline","ViewOption","id","renderAsLabel","size","className","labelClassName","labelId","searched","labelProps","css","Label","defaultOptions","ResultsPerPage","useResultsPerPage","setResultsPerPage","useId","optionsSorted","Sorting","useSorting","setSorting","Summary","queryValues","suggest","showLatency","get","LiveMessage","object","pluralize","time","trim","ViewType","ButtonGroup","buttonGroup","IconSmallGrid","IconSmallList"],"mappings":"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"}