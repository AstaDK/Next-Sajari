{"version":3,"file":"SelectFilter.esm.js","sources":["../../src/Filter/SelectFilter.tsx"],"sourcesContent":["import { Option, Select } from '@sajari/react-components';\nimport { useFilter } from '@sajari/react-hooks';\nimport { isArray, isEmpty } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport Box from './Box';\nimport { SelectFilterProps } from './types';\nimport { formatLabel } from './utils';\n\nconst SelectFilter = (props: Omit<SelectFilterProps, 'type'>) => {\n  const { name, title, sort = 'count', sortAscending = sort !== 'count', format } = props;\n  const { options, reset, setSelected, selected, multi } = useFilter(name, { sort, sortAscending });\n  const { disableDefaultStyles = false, customClassNames, currency } = useSearchUIContext();\n  const { t } = useTranslation('filter');\n\n  if (isEmpty(options) && isEmpty(selected)) {\n    return null;\n  }\n\n  const getSelectText = (labels: Array<string | number>) => {\n    if (!labels.length) {\n      return t('select');\n    }\n\n    if (labels.length === 1) {\n      const [first] = labels;\n      return first;\n    }\n\n    return t('selected', { count: labels.length.toLocaleString() as never });\n  };\n\n  return (\n    <Box title={title} name={name} showReset={selected.length > 0 && multi} onReset={reset}>\n      {!isEmpty(options) && (\n        <Select\n          multiple={multi}\n          onChange={(value) => setSelected(isArray(value) ? value : [value])}\n          value={selected}\n          disableDefaultStyles={disableDefaultStyles}\n          size=\"sm\"\n          text={getSelectText}\n          className={customClassNames.filter?.select?.container}\n          buttonClassName={customClassNames.filter?.select?.button}\n          dropdownClassName={customClassNames.filter?.select?.dropdown}\n          optionClassName={customClassNames.filter?.select?.option}\n        >\n          {options.map(({ value, label, count }) => (\n            <Option value={label} key={value} label={count.toLocaleString()}>\n              {formatLabel(label, { format, currency, t })}\n            </Option>\n          ))}\n        </Select>\n      )}\n    </Box>\n  );\n};\n\nexport default SelectFilter;\nexport type { SelectFilterProps };\n"],"names":["SelectFilter","props","name","title","sort","sortAscending","format","useFilter","options","reset","setSelected","selected","multi","useSearchUIContext","disableDefaultStyles","customClassNames","currency","useTranslation","t","isEmpty","getSelectText","labels","length","first","count","toLocaleString","_jsx","value","isArray","filter","select","container","button","dropdown","option","map","label","formatLabel"],"mappings":"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"}