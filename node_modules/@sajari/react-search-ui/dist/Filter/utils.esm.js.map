{"version":3,"file":"utils.esm.js","sources":["../../src/Filter/utils.ts"],"sourcesContent":["import { FilterItem } from '@sajari/react-hooks';\nimport { formatNumber } from '@sajari/react-sdk-utils';\nimport { TFunction } from 'i18next';\n\n/**\n * Pin items in an array to the start\n * @param {Array} list\n * @param {String} pinned - Items to pin in the array\n * @param {String} prop - Property of child object to get comparation in pinned array\n */\nexport function pinItems(list: FilterItem[], pinned: string[] = [], prop: string) {\n  return [...list].sort((a, b) => pinned.indexOf(b[prop]) - pinned.indexOf(a[prop]));\n}\n\n/**\n * Get the header ID for a name\n * @param name - The filter's unique name\n */\nexport function getHeaderId(name: string) {\n  return `filter-${name}-label`;\n}\n\ninterface FormatValueParams {\n  format?: 'default' | 'price';\n  currency?: string;\n  t: TFunction;\n}\n\n/**\n * Format a value to be presented in the UI\n * @param input - the value to format\n * @param params - formatting options\n */\nexport function formatLabel(input: string, params: FormatValueParams) {\n  const { format = 'default', currency = 'USD', t } = params;\n  const formatPrice = (v: number) => formatNumber(v, { style: 'currency', currency }).replace('.00', '');\n\n  switch (format) {\n    case 'price':\n      switch (true) {\n        case /\\d+\\s-\\s\\d+/gm.test(input): {\n          const [min, max] = input.split(' - ').map(Number).map(formatPrice);\n          return `${min} - ${max}`;\n        }\n        case input.startsWith('>'):\n          return t('rangeOver', { value: formatPrice(Number(input.substring(2))) });\n        case input.startsWith('<'):\n          return t('rangeUnder', { value: formatPrice(Number(input.substring(2))) });\n        default:\n          return input;\n      }\n\n    case 'default':\n    default:\n      // Return unchanged if it's default\n      return input;\n  }\n}\n"],"names":["pinItems","list","pinned","prop","sort","a","b","indexOf","getHeaderId","name","formatLabel","input","params","format","currency","t","formatPrice","v","formatNumber","style","replace","test","split","map","Number","min","max","startsWith","value","substring"],"mappings":";;SAUgBA,SAASC,MAAoBC,QAAuBC;MAAvBD;AAAAA,IAAAA,SAAmB;;;AAC9D,SAAO,UAAID,IAAJ,EAAUG,IAAV,CAAe,UAACC,CAAD,EAAIC,CAAJ;AAAA,WAAUJ,MAAM,CAACK,OAAP,CAAeD,CAAC,CAACH,IAAD,CAAhB,IAA0BD,MAAM,CAACK,OAAP,CAAeF,CAAC,CAACF,IAAD,CAAhB,CAApC;AAAA,GAAf,CAAP;AACD;SAMeK,YAAYC;AAC1B,qBAAiBA,IAAjB;AACD;SAaeC,YAAYC,OAAeC;uBACWA,OAA5CC;MAAAA,qCAAS;yBAAmCD,OAAxBE;MAAAA,yCAAW;MAAOC,IAAMH,OAANG;;AAC9C,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,CAAD;AAAA,WAAeC,YAAY,CAACD,CAAD,EAAI;AAAEE,MAAAA,KAAK,EAAE,UAAT;AAAqBL,MAAAA,QAAQ,EAARA;AAArB,KAAJ,CAAZ,CAAiDM,OAAjD,CAAyD,KAAzD,EAAgE,EAAhE,CAAf;AAAA,GAApB;;AAEA,UAAQP,MAAR;AACE,SAAK,OAAL;AACE,cAAQ,IAAR;AACE,aAAK,gBAAgBQ,IAAhB,CAAqBV,KAArB,CAAL;AAAkC;AAAA,uCACbA,KAAK,CAACW,KAAN,CAAY,KAAZ,EAAmBC,GAAnB,CAAuBC,MAAvB,EAA+BD,GAA/B,CAAmCP,WAAnC,CADa;AAAA,gBACzBS,GADyB;AAAA,gBACpBC,GADoB;;AAEhC,mBAAUD,GAAV,WAAmBC,GAAnB;AACD;;AACD,aAAKf,KAAK,CAACgB,UAAN,CAAiB,GAAjB,CAAL;AACE,iBAAOZ,CAAC,CAAC,WAAD,EAAc;AAAEa,YAAAA,KAAK,EAAEZ,WAAW,CAACQ,MAAM,CAACb,KAAK,CAACkB,SAAN,CAAgB,CAAhB,CAAD,CAAP;AAApB,WAAd,CAAR;;AACF,aAAKlB,KAAK,CAACgB,UAAN,CAAiB,GAAjB,CAAL;AACE,iBAAOZ,CAAC,CAAC,YAAD,EAAe;AAAEa,YAAAA,KAAK,EAAEZ,WAAW,CAACQ,MAAM,CAACb,KAAK,CAACkB,SAAN,CAAgB,CAAhB,CAAD,CAAP;AAApB,WAAf,CAAR;;AACF;AACE,iBAAOlB,KAAP;AAVJ;;AAaF,SAAK,SAAL;AACA;AAEE,aAAOA,KAAP;AAlBJ;AAoBD;;;;"}