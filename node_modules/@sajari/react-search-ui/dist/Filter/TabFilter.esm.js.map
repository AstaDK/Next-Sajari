{"version":3,"file":"TabFilter.esm.js","sources":["../../src/Filter/TabFilter.tsx"],"sourcesContent":["import { Box, Tab, TabList, Tabs } from '@sajari/react-components';\nimport { useFilter } from '@sajari/react-hooks';\nimport { isEmpty, useTheme } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport tw from 'twin.macro';\n\nimport { useSearchUIContext } from '../ContextProvider';\nimport { TabFilterProps } from './types';\nimport { formatLabel } from './utils';\n\nconst TabFilter = (props: Omit<TabFilterProps, 'type'>) => {\n  const { name, title, limit = 15, sort = 'count', sortAscending = sort !== 'count', format } = props;\n  const { t } = useTranslation('filter');\n  const theme = useTheme();\n  const { options, setSelected, selected } = useFilter(name, { sort, sortAscending });\n  const sliced = limit && options.length > limit ? options.slice(0, limit) : options;\n  const { disableDefaultStyles = false, customClassNames, currency, language } = useSearchUIContext();\n\n  if (isEmpty(sliced)) {\n    return null;\n  }\n\n  const selectedIndex = sliced.findIndex(({ label }) => label === selected[0]);\n\n  return (\n    <Tabs\n      aria-label={title}\n      onChange={(index) => setSelected(index !== 0 ? [sliced[index - 1].label] : [])}\n      index={selectedIndex < 0 ? 0 : selectedIndex + 1}\n      disableDefaultStyles={disableDefaultStyles}\n      className={customClassNames.filter?.tabs?.container}\n    >\n      <TabList className={customClassNames.filter?.tabs?.list}>\n        <Tab\n          className={customClassNames.filter?.tabs?.tab}\n          selectedClassName={customClassNames.filter?.tabs?.selectedTab}\n        >\n          {t('all')}\n        </Tab>\n        {sliced.map(({ label, count, value }, index) => (\n          <Tab\n            key={value}\n            className={customClassNames.filter?.tabs?.tab}\n            selectedClassName={customClassNames.filter?.tabs?.selectedTab}\n          >\n            {`${formatLabel(label, { format, currency, t })}`}\n            <Box\n              as=\"span\"\n              css={[\n                tw`py-0.5 px-1 rounded ml-3 text-xs leading-tight transition-colors`,\n                index === selectedIndex\n                  ? { backgroundColor: theme.color.primary.active, color: theme.color.primary.text }\n                  : tw`text-gray-500 bg-gray-100`,\n              ]}\n            >\n              {count.toLocaleString(language)}\n            </Box>\n          </Tab>\n        ))}\n      </TabList>\n    </Tabs>\n  );\n};\n\nexport default TabFilter;\nexport type { TabFilterProps };\n"],"names":["TabFilter","props","name","title","limit","sort","sortAscending","format","useTranslation","t","theme","useTheme","useFilter","options","setSelected","selected","sliced","length","slice","useSearchUIContext","disableDefaultStyles","customClassNames","currency","language","isEmpty","selectedIndex","findIndex","label","_jsx","index","filter","tabs","container","_jsxs","list","tab","selectedTab","map","count","value","formatLabel","backgroundColor","color","primary","active","text","toLocaleString"],"mappings":"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"}