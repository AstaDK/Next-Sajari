{"version":3,"file":"useImageProvider.esm.js","sources":["../../src/Image/useImageProvider.ts"],"sourcesContent":["import { isArray } from '@sajari/react-sdk-utils';\n\nimport { ImageProvider } from './types';\n\ninterface Params {\n  provider: ImageProvider;\n  images?: string | Array<string | undefined>;\n  width?: number | string;\n  height?: number | string;\n}\n\nexport default function useImageProvider(params: Params) {\n  const { provider, width, height, images: imagesParam = [] } = params;\n  const images = isArray(imagesParam) ? (imagesParam.filter(Boolean) as Array<string>) : [imagesParam];\n  if (!provider) {\n    return images;\n  }\n\n  switch (provider) {\n    case 'shopify':\n      return images.map((i) => {\n        const url = new URL(i);\n        const { pathname } = url;\n        const [extension, ...rest] = pathname.split('.').reverse();\n        const pathnameWithoutExtension = rest.join();\n        if (width && height) {\n          url.pathname = `${pathnameWithoutExtension}_${width}x${height}`;\n        } else if (width) {\n          url.pathname = `${pathnameWithoutExtension}_${width}x`;\n        } else if (height) {\n          url.pathname = `${pathnameWithoutExtension}_x${width}`;\n        }\n        url.pathname = `${url.pathname}.${extension}`;\n        return url.toString();\n      });\n    default:\n      return images;\n  }\n}\n"],"names":["useImageProvider","params","provider","width","height","images","imagesParam","isArray","filter","Boolean","map","i","url","URL","pathname","split","reverse","extension","rest","pathnameWithoutExtension","join","toString"],"mappings":";;SAWwBA,iBAAiBC;MAC/BC,WAAsDD,OAAtDC;MAAUC,QAA4CF,OAA5CE;MAAOC,SAAqCH,OAArCG;uBAAqCH,OAA7BI;MAAQC,0CAAc;AACvD,MAAMD,MAAM,GAAGE,OAAO,CAACD,WAAD,CAAP,GAAwBA,WAAW,CAACE,MAAZ,CAAmBC,OAAnB,CAAxB,GAAwE,CAACH,WAAD,CAAvF;;AACA,MAAI,CAACJ,QAAL,EAAe;AACb,WAAOG,MAAP;AACD;;AAED,UAAQH,QAAR;AACE,SAAK,SAAL;AACE,aAAOG,MAAM,CAACK,GAAP,CAAW,UAACC,CAAD;AAChB,YAAMC,GAAG,GAAG,IAAIC,GAAJ,CAAQF,CAAR,CAAZ;YACQG,WAAaF,IAAbE;;oCACqBA,QAAQ,CAACC,KAAT,CAAe,GAAf,EAAoBC,OAApB;YAAtBC;YAAcC;;AACrB,YAAMC,wBAAwB,GAAGD,IAAI,CAACE,IAAL,EAAjC;;AACA,YAAIjB,KAAK,IAAIC,MAAb,EAAqB;AACnBQ,UAAAA,GAAG,CAACE,QAAJ,GAAkBK,wBAAlB,SAA8ChB,KAA9C,SAAuDC,MAAvD;AACD,SAFD,MAEO,IAAID,KAAJ,EAAW;AAChBS,UAAAA,GAAG,CAACE,QAAJ,GAAkBK,wBAAlB,SAA8ChB,KAA9C;AACD,SAFM,MAEA,IAAIC,MAAJ,EAAY;AACjBQ,UAAAA,GAAG,CAACE,QAAJ,GAAkBK,wBAAlB,UAA+ChB,KAA/C;AACD;;AACDS,QAAAA,GAAG,CAACE,QAAJ,GAAkBF,GAAG,CAACE,QAAtB,SAAkCG,SAAlC;AACA,eAAOL,GAAG,CAACS,QAAJ,EAAP;AACD,OAdM,CAAP;;AAeF;AACE,aAAOhB,MAAP;AAlBJ;AAoBD;;;;"}