{"version":3,"file":"index.esm.js","sources":["../../src/Image/index.tsx"],"sourcesContent":["import { __DEV__, getStylesObject } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\n\nimport AspectRatio from '../AspectRatio';\nimport Box from '../Box';\nimport { useImageStyles } from './styles';\nimport { ImageProps } from './types';\nimport useImageProvider from './useImageProvider';\n\ninterface NativeImageProps {\n  htmlWidth?: ImageProps['htmlWidth'];\n  htmlHeight?: ImageProps['htmlHeight'];\n  alt?: ImageProps['alt'];\n  loading?: ImageProps['loading'];\n}\n\nconst NativeImage = React.forwardRef((props: NativeImageProps, ref?: React.Ref<HTMLImageElement>) => {\n  const { htmlWidth, htmlHeight, alt = '', loading = 'lazy', ...rest } = props;\n\n  return <img ref={ref} width={htmlWidth} height={htmlHeight} alt={alt} loading={loading} {...rest} />;\n});\n\nconst Image = React.forwardRef((props: ImageProps, ref?: React.Ref<HTMLImageElement>) => {\n  const {\n    src: srcProp,\n    hoverSrc: hoverSrcProp,\n    onError,\n    onLoad,\n    onMouseEnter: onMouseEnterExternal,\n    onMouseLeave: onMouseLeaveExternal,\n    htmlWidth,\n    htmlHeight,\n    aspectRatio,\n    objectFit,\n    className,\n    containerClassName,\n    disableDefaultStyles = false,\n    width,\n    height,\n    provider,\n    ...rest\n  } = props;\n  const [hover, setHover] = React.useState(false);\n  const [src, hoverSrc] = useImageProvider({ provider, images: [srcProp, hoverSrcProp], width, height });\n\n  const onMouseEnter = (e) => {\n    if (hoverSrc) {\n      setHover(true);\n    }\n    onMouseEnterExternal?.(e);\n  };\n\n  const onMouseLeave = (e) => {\n    if (hoverSrc) {\n      setHover(false);\n    }\n    onMouseLeaveExternal?.(e);\n  };\n\n  const imageProps = {\n    src,\n    onLoad,\n    onError,\n    htmlWidth,\n    htmlHeight,\n    onMouseEnter,\n    onMouseLeave,\n  };\n\n  const styles = getStylesObject(useImageStyles({ ...props, hover }), disableDefaultStyles);\n  const image = <Box as={NativeImage} ref={ref} css={styles.image} {...imageProps} {...rest} />;\n  const secondImage = React.cloneElement(image, { src: hoverSrc, css: styles.secondImage });\n\n  return (\n    <AspectRatio ratio={aspectRatio ?? null} css={styles.container} className={containerClassName}>\n      <>\n        {src ? image : null}\n        {hoverSrc ? secondImage : null}\n      </>\n    </AspectRatio>\n  );\n});\n\nif (__DEV__) {\n  Image.displayName = 'Image';\n}\n\nexport default Image;\nexport type { ImageProps };\n"],"names":["NativeImage","React","props","ref","htmlWidth","htmlHeight","alt","loading","rest","_jsx","Image","srcProp","src","hoverSrcProp","hoverSrc","onError","onLoad","onMouseEnterExternal","onMouseEnter","onMouseLeaveExternal","onMouseLeave","aspectRatio","containerClassName","disableDefaultStyles","width","height","provider","hover","setHover","useImageProvider","images","e","imageProps","styles","getStylesObject","useImageStyles","image","secondImage","css","container","_jsxs","__DEV__","displayName"],"mappings":"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"}