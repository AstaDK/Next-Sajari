{"version":3,"file":"index.esm.js","sources":["../../../../src/Select/components/Button/index.tsx"],"sourcesContent":["import { mergeProps } from '@react-aria/utils';\nimport { getStylesObject } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\n\nimport Box from '../../../Box';\nimport { useSelectContext } from '../../context';\nimport { useButtonStyles } from './styles';\n\nconst Button = () => {\n  const {\n    disabled,\n    getToggleButtonProps,\n    id,\n    invalid,\n    items,\n    selectedItems,\n    autofocus,\n    size,\n    text,\n    disableDefaultStyles,\n    customClassNames,\n  } = useSelectContext();\n  const { styles: buttonStyles, focusRingProps, focusRingStyles } = useButtonStyles({ size, disabled, invalid });\n  const styles = getStylesObject(buttonStyles, disableDefaultStyles);\n  const ref = React.useRef<HTMLButtonElement>(null);\n\n  React.useEffect(() => {\n    if (autofocus && ref?.current) {\n      ref.current.focus();\n    }\n  }, []);\n\n  const children: React.ReactNode = React.useMemo(() => {\n    if (typeof text === 'function') {\n      const selected = items\n        .filter(({ value: v }) => selectedItems.includes(v.toString()))\n        .map(({ children: label }) => label);\n      return text(selected);\n    }\n\n    if (typeof text !== 'undefined') {\n      return text;\n    }\n\n    if (selectedItems.length === 1) {\n      const [selectedItem] = selectedItems;\n      const selected = items.find(({ value: v }) => selectedItem === v.toString());\n\n      if (selected) {\n        return selected.children;\n      }\n    }\n\n    if (selectedItems.length > 1) {\n      return `${selectedItems.length} selected`;\n    }\n\n    return 'Select an option';\n  }, [JSON.stringify(selectedItems), text]);\n\n  return (\n    <Box\n      as=\"button\"\n      type=\"button\"\n      css={[styles.container, focusRingStyles]}\n      className={customClassNames.buttonClassName}\n      {...mergeProps(focusRingProps, getToggleButtonProps({ disabled, ref }), { id })}\n    >\n      {children}\n    </Box>\n  );\n};\n\nexport default Button;\n"],"names":["Button","useSelectContext","disabled","getToggleButtonProps","id","invalid","items","selectedItems","autofocus","size","text","disableDefaultStyles","customClassNames","useButtonStyles","buttonStyles","styles","focusRingProps","focusRingStyles","getStylesObject","ref","React","current","focus","children","selected","filter","v","value","includes","toString","map","label","length","selectedItem","find","JSON","stringify","_jsx","container","buttonClassName","mergeProps"],"mappings":";;;;;;;;;;AAQA,IAAMA,MAAM,GAAG,SAATA,MAAS;0BAaTC,gBAAgB;MAXlBC,6BAAAA;MACAC,yCAAAA;MACAC,uBAAAA;MACAC,4BAAAA;MACAC,0BAAAA;MACAC,kCAAAA;MACAC,8BAAAA;MACAC,yBAAAA;MACAC,yBAAAA;MACAC,yCAAAA;MACAC,qCAAAA;;yBAEgEC,eAAe,CAAC;AAAEJ,IAAAA,IAAI,EAAJA,IAAF;AAAQP,IAAAA,QAAQ,EAARA,QAAR;AAAkBG,IAAAA,OAAO,EAAPA;AAAlB,GAAD;MAAjES,gCAARC;MAAsBC,kCAAAA;MAAgBC,mCAAAA;;AAC9C,MAAMF,MAAM,GAAGG,eAAe,CAACJ,YAAD,EAAeH,oBAAf,CAA9B;AACA,MAAMQ,GAAG,GAAGC,MAAA,CAAgC,IAAhC,CAAZ;AAEAA,EAAAA,SAAA,CAAgB;AACd,QAAIZ,SAAS,KAAIW,GAAJ,oBAAIA,GAAG,CAAEE,OAAT,CAAb,EAA+B;AAC7BF,MAAAA,GAAG,CAACE,OAAJ,CAAYC,KAAZ;AACD;AACF,GAJD,EAIG,EAJH;AAMA,MAAMC,QAAQ,GAAoBH,OAAA,CAAc;AAC9C,QAAI,OAAOV,IAAP,KAAgB,UAApB,EAAgC;AAC9B,UAAMc,QAAQ,GAAGlB,KAAK,CACnBmB,MADc,CACP;AAAA,YAAUC,CAAV,QAAGC,KAAH;AAAA,eAAkBpB,aAAa,CAACqB,QAAd,CAAuBF,CAAC,CAACG,QAAF,EAAvB,CAAlB;AAAA,OADO,EAEdC,GAFc,CAEV;AAAA,YAAaC,KAAb,SAAGR,QAAH;AAAA,eAAyBQ,KAAzB;AAAA,OAFU,CAAjB;AAGA,aAAOrB,IAAI,CAACc,QAAD,CAAX;AACD;;AAED,QAAI,OAAOd,IAAP,KAAgB,WAApB,EAAiC;AAC/B,aAAOA,IAAP;AACD;;AAED,QAAIH,aAAa,CAACyB,MAAd,KAAyB,CAA7B,EAAgC;AAAA,UACvBC,YADuB,GACP1B,aADO;;AAE9B,UAAMiB,SAAQ,GAAGlB,KAAK,CAAC4B,IAAN,CAAW;AAAA,YAAUR,CAAV,SAAGC,KAAH;AAAA,eAAkBM,YAAY,KAAKP,CAAC,CAACG,QAAF,EAAnC;AAAA,OAAX,CAAjB;;AAEA,UAAIL,SAAJ,EAAc;AACZ,eAAOA,SAAQ,CAACD,QAAhB;AACD;AACF;;AAED,QAAIhB,aAAa,CAACyB,MAAd,GAAuB,CAA3B,EAA8B;AAC5B,aAAUzB,aAAa,CAACyB,MAAxB;AACD;;AAED,WAAO,kBAAP;AACD,GA1BiC,EA0B/B,CAACG,IAAI,CAACC,SAAL,CAAe7B,aAAf,CAAD,EAAgCG,IAAhC,CA1B+B,CAAlC;AA4BA,SACE2B,IAAC,GAAD;AACE,IAAA,EAAE,EAAC,QADL;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,IAAA,GAAG,oBAAE,CAACtB,MAAM,CAACuB,SAAR,EAAmBrB,eAAnB,CAAF,0+FAHL;AAIE,IAAA,SAAS,EAAEL,gBAAgB,CAAC2B;AAJ9B,KAKMC,UAAU,CAACxB,cAAD,EAAiBb,oBAAoB,CAAC;AAAED,IAAAA,QAAQ,EAARA,QAAF;AAAYiB,IAAAA,GAAG,EAAHA;AAAZ,GAAD,CAArC,EAA0D;AAAEf,IAAAA,EAAE,EAAFA;AAAF,GAA1D,CALhB;AAAA,cAOGmB;AAPH,KADF;AAWD,CA/DD;;;;"}