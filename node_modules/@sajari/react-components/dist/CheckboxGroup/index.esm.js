import _css from '@emotion/css';
import { objectWithoutPropertiesLoose as _objectWithoutPropertiesLoose, extends as _extends } from '../_virtual/_rollupPluginBabelHelpers.js';
import { getStylesObject, cleanChildren } from '@sajari/react-sdk-utils';
import { useState, useRef, cloneElement } from 'react';
import { jsxs, jsx } from '@emotion/core/jsx-runtime';
import Box from '../Box/index.esm.js';
import { useId } from '@react-aria/utils';
import Text from '../Text/index.esm.js';
import { useCheckboxGroupStyles } from './styles.esm.js';

function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }

var _ref = process.env.NODE_ENV === "production" ? {
  name: "zw218z-CheckboxGroup",
  styles: "position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;;label:CheckboxGroup;"
} : {
  name: "zw218z-CheckboxGroup",
  styles: "position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;;label:CheckboxGroup;",
  map: "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE0Q3VEIiwiZmlsZSI6ImluZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUlkIH0gZnJvbSAnQHJlYWN0LWFyaWEvdXRpbHMnO1xyXG5pbXBvcnQgeyBjbGVhbkNoaWxkcmVuLCBnZXRTdHlsZXNPYmplY3QgfSBmcm9tICdAc2FqYXJpL3JlYWN0LXNkay11dGlscyc7XHJcbmltcG9ydCBSZWFjdCwgeyBjbG9uZUVsZW1lbnQsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB0dyBmcm9tICd0d2luLm1hY3JvJztcclxuaW1wb3J0IEJveCBmcm9tICcuLi9Cb3gnO1xyXG5pbXBvcnQgVGV4dCBmcm9tICcuLi9UZXh0JztcclxuaW1wb3J0IHsgdXNlQ2hlY2tib3hHcm91cFN0eWxlcyB9IGZyb20gJy4vc3R5bGVzJztcclxuY29uc3QgQ2hlY2tib3hHcm91cCA9IChwcm9wcykgPT4ge1xyXG4gICAgY29uc3QgeyBvbkNoYW5nZSwgbmFtZSwgbGFiZWwgPSBuYW1lLCBkZWZhdWx0VmFsdWUsIHZhbHVlOiB2YWx1ZVByb3AsIGNoaWxkcmVuLCBzdHlsZXM6IHN0eWxlc1Byb3AsIGRpc2FibGVEZWZhdWx0U3R5bGVzID0gZmFsc2UsICdhcmlhLWxhYmVsbGVkYnknOiBhcmlhTGFiZWxsZWRCeSwgLi4ucmVzdCB9ID0gcHJvcHM7XHJcbiAgICBjb25zdCBbdmFsdWVzLCBzZXRWYWx1ZXNdID0gdXNlU3RhdGUoZGVmYXVsdFZhbHVlIHx8IFtdKTtcclxuICAgIGNvbnN0IHsgY3VycmVudDogY29udHJvbGxlZCB9ID0gdXNlUmVmKHR5cGVvZiB2YWx1ZVByb3AgIT09ICd1bmRlZmluZWQnKTtcclxuICAgIGNvbnN0IGludGVybmFsVmFsdWVzID0gKGNvbnRyb2xsZWQgPyB2YWx1ZVByb3AgOiB2YWx1ZXMpIHx8IFtdO1xyXG4gICAgY29uc3Qgc3R5bGVzID0gZ2V0U3R5bGVzT2JqZWN0KHVzZUNoZWNrYm94R3JvdXBTdHlsZXMocHJvcHMpLCBkaXNhYmxlRGVmYXVsdFN0eWxlcyk7XHJcbiAgICBjb25zdCBpbnRlcm5hbENoYW5nZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgY2hlY2tlZCwgdmFsdWUgfSA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICBsZXQgbmV3VmFsdWVzO1xyXG4gICAgICAgIGlmIChjaGVja2VkKSB7XHJcbiAgICAgICAgICAgIG5ld1ZhbHVlcyA9IFsuLi5pbnRlcm5hbFZhbHVlcywgdmFsdWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbmV3VmFsdWVzID0gaW50ZXJuYWxWYWx1ZXMuZmlsdGVyKCh2KSA9PiB2ICE9PSB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghY29udHJvbGxlZCkge1xyXG4gICAgICAgICAgICBzZXRWYWx1ZXMobmV3VmFsdWVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9uQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlKG5ld1ZhbHVlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IGZhbGxiYWNrTmFtZSA9IGBjaGVja2JveC0ke3VzZUlkKCl9YDtcclxuICAgIGNvbnN0IGludGVybmFsTmFtZSA9IG5hbWUgfHwgZmFsbGJhY2tOYW1lO1xyXG4gICAgY29uc3QgdmFsaWRDaGlsZHJlbiA9IGNsZWFuQ2hpbGRyZW4oY2hpbGRyZW4pO1xyXG4gICAgY29uc3QgY2xvbmVzID0gdmFsaWRDaGlsZHJlbi5tYXAoKGNoaWxkLCBpbmRleCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNoZWNrZWQgPSBpbnRlcm5hbFZhbHVlcy5pbmNsdWRlcyhjaGlsZC5wcm9wcy52YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGNsb25lRWxlbWVudChjaGlsZCwge1xyXG4gICAgICAgICAgICBrZXk6IGAke2ludGVybmFsTmFtZX0tJHtpbmRleH1gLFxyXG4gICAgICAgICAgICBuYW1lOiBgJHtpbnRlcm5hbE5hbWV9LSR7aW5kZXh9YCxcclxuICAgICAgICAgICAgb25DaGFuZ2U6IGludGVybmFsQ2hhbmdlLFxyXG4gICAgICAgICAgICBjaGVja2VkLFxyXG4gICAgICAgICAgICBkaXNhYmxlRGVmYXVsdFN0eWxlcyxcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgY29uc3QgbGFiZWxJZCA9IGBncm91cC1sYWJlbC0ke3VzZUlkKCl9YDtcclxuICAgIHJldHVybiAoPEJveCB7Li4ucmVzdH0gcm9sZT1cImdyb3VwXCIgYXJpYS1sYWJlbGxlZGJ5PXthcmlhTGFiZWxsZWRCeSA/PyBsYWJlbElkfSBjc3M9e1tzdHlsZXMuY29udGFpbmVyLCBzdHlsZXNQcm9wXX0+XG4gICAgICB7bGFiZWwgJiYgIWFyaWFMYWJlbGxlZEJ5ICYmICg8VGV4dCBpZD17bGFiZWxJZH0gY3NzPXt0dyBgc3Itb25seWB9PlxuICAgICAgICAgIHtsYWJlbH1cbiAgICAgICAgPC9UZXh0Pil9XG5cbiAgICAgIHtjbG9uZXN9XG4gICAgPC9Cb3g+KTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgQ2hlY2tib3hHcm91cDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanN4Lm1hcCJdfQ== */",
  toString: _EMOTION_STRINGIFIED_CSS_ERROR__
};

var CheckboxGroup = function CheckboxGroup(props) {
  var onChange = props.onChange,
      name = props.name,
      _props$label = props.label,
      label = _props$label === void 0 ? name : _props$label,
      defaultValue = props.defaultValue,
      valueProp = props.value,
      children = props.children,
      stylesProp = props.styles,
      _props$disableDefault = props.disableDefaultStyles,
      disableDefaultStyles = _props$disableDefault === void 0 ? false : _props$disableDefault,
      ariaLabelledBy = props['aria-labelledby'],
      rest = _objectWithoutPropertiesLoose(props, ["onChange", "name", "label", "defaultValue", "value", "children", "styles", "disableDefaultStyles", "aria-labelledby"]);

  var _useState = useState(defaultValue || []),
      values = _useState[0],
      setValues = _useState[1];

  var _useRef = useRef(typeof valueProp !== 'undefined'),
      controlled = _useRef.current;

  var internalValues = (controlled ? valueProp : values) || [];
  var styles = getStylesObject(useCheckboxGroupStyles(props), disableDefaultStyles);

  var internalChange = function internalChange(event) {
    var _event$target = event.target,
        checked = _event$target.checked,
        value = _event$target.value;
    var newValues;

    if (checked) {
      newValues = [].concat(internalValues, [value]);
    } else {
      newValues = internalValues.filter(function (v) {
        return v !== value;
      });
    }

    if (!controlled) {
      setValues(newValues);
    }

    if (onChange) {
      onChange(newValues);
    }
  };

  var fallbackName = "checkbox-" + useId();
  var internalName = name || fallbackName;
  var validChildren = cleanChildren(children);
  var clones = validChildren.map(function (child, index) {
    var checked = internalValues.includes(child.props.value);
    return /*#__PURE__*/cloneElement(child, {
      key: internalName + "-" + index,
      name: internalName + "-" + index,
      onChange: internalChange,
      checked: checked,
      disableDefaultStyles: disableDefaultStyles
    });
  });
  var labelId = "group-label-" + useId();
  return jsxs(Box, _extends({}, rest, {
    role: "group",
    "aria-labelledby": ariaLabelledBy != null ? ariaLabelledBy : labelId,
    css: /*#__PURE__*/_css([styles.container, stylesProp], ";label:CheckboxGroup;" + (process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyQ29GIiwiZmlsZSI6ImluZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUlkIH0gZnJvbSAnQHJlYWN0LWFyaWEvdXRpbHMnO1xyXG5pbXBvcnQgeyBjbGVhbkNoaWxkcmVuLCBnZXRTdHlsZXNPYmplY3QgfSBmcm9tICdAc2FqYXJpL3JlYWN0LXNkay11dGlscyc7XHJcbmltcG9ydCBSZWFjdCwgeyBjbG9uZUVsZW1lbnQsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB0dyBmcm9tICd0d2luLm1hY3JvJztcclxuaW1wb3J0IEJveCBmcm9tICcuLi9Cb3gnO1xyXG5pbXBvcnQgVGV4dCBmcm9tICcuLi9UZXh0JztcclxuaW1wb3J0IHsgdXNlQ2hlY2tib3hHcm91cFN0eWxlcyB9IGZyb20gJy4vc3R5bGVzJztcclxuY29uc3QgQ2hlY2tib3hHcm91cCA9IChwcm9wcykgPT4ge1xyXG4gICAgY29uc3QgeyBvbkNoYW5nZSwgbmFtZSwgbGFiZWwgPSBuYW1lLCBkZWZhdWx0VmFsdWUsIHZhbHVlOiB2YWx1ZVByb3AsIGNoaWxkcmVuLCBzdHlsZXM6IHN0eWxlc1Byb3AsIGRpc2FibGVEZWZhdWx0U3R5bGVzID0gZmFsc2UsICdhcmlhLWxhYmVsbGVkYnknOiBhcmlhTGFiZWxsZWRCeSwgLi4ucmVzdCB9ID0gcHJvcHM7XHJcbiAgICBjb25zdCBbdmFsdWVzLCBzZXRWYWx1ZXNdID0gdXNlU3RhdGUoZGVmYXVsdFZhbHVlIHx8IFtdKTtcclxuICAgIGNvbnN0IHsgY3VycmVudDogY29udHJvbGxlZCB9ID0gdXNlUmVmKHR5cGVvZiB2YWx1ZVByb3AgIT09ICd1bmRlZmluZWQnKTtcclxuICAgIGNvbnN0IGludGVybmFsVmFsdWVzID0gKGNvbnRyb2xsZWQgPyB2YWx1ZVByb3AgOiB2YWx1ZXMpIHx8IFtdO1xyXG4gICAgY29uc3Qgc3R5bGVzID0gZ2V0U3R5bGVzT2JqZWN0KHVzZUNoZWNrYm94R3JvdXBTdHlsZXMocHJvcHMpLCBkaXNhYmxlRGVmYXVsdFN0eWxlcyk7XHJcbiAgICBjb25zdCBpbnRlcm5hbENoYW5nZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgY2hlY2tlZCwgdmFsdWUgfSA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICBsZXQgbmV3VmFsdWVzO1xyXG4gICAgICAgIGlmIChjaGVja2VkKSB7XHJcbiAgICAgICAgICAgIG5ld1ZhbHVlcyA9IFsuLi5pbnRlcm5hbFZhbHVlcywgdmFsdWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbmV3VmFsdWVzID0gaW50ZXJuYWxWYWx1ZXMuZmlsdGVyKCh2KSA9PiB2ICE9PSB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghY29udHJvbGxlZCkge1xyXG4gICAgICAgICAgICBzZXRWYWx1ZXMobmV3VmFsdWVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9uQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlKG5ld1ZhbHVlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IGZhbGxiYWNrTmFtZSA9IGBjaGVja2JveC0ke3VzZUlkKCl9YDtcclxuICAgIGNvbnN0IGludGVybmFsTmFtZSA9IG5hbWUgfHwgZmFsbGJhY2tOYW1lO1xyXG4gICAgY29uc3QgdmFsaWRDaGlsZHJlbiA9IGNsZWFuQ2hpbGRyZW4oY2hpbGRyZW4pO1xyXG4gICAgY29uc3QgY2xvbmVzID0gdmFsaWRDaGlsZHJlbi5tYXAoKGNoaWxkLCBpbmRleCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNoZWNrZWQgPSBpbnRlcm5hbFZhbHVlcy5pbmNsdWRlcyhjaGlsZC5wcm9wcy52YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGNsb25lRWxlbWVudChjaGlsZCwge1xyXG4gICAgICAgICAgICBrZXk6IGAke2ludGVybmFsTmFtZX0tJHtpbmRleH1gLFxyXG4gICAgICAgICAgICBuYW1lOiBgJHtpbnRlcm5hbE5hbWV9LSR7aW5kZXh9YCxcclxuICAgICAgICAgICAgb25DaGFuZ2U6IGludGVybmFsQ2hhbmdlLFxyXG4gICAgICAgICAgICBjaGVja2VkLFxyXG4gICAgICAgICAgICBkaXNhYmxlRGVmYXVsdFN0eWxlcyxcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgY29uc3QgbGFiZWxJZCA9IGBncm91cC1sYWJlbC0ke3VzZUlkKCl9YDtcclxuICAgIHJldHVybiAoPEJveCB7Li4ucmVzdH0gcm9sZT1cImdyb3VwXCIgYXJpYS1sYWJlbGxlZGJ5PXthcmlhTGFiZWxsZWRCeSA/PyBsYWJlbElkfSBjc3M9e1tzdHlsZXMuY29udGFpbmVyLCBzdHlsZXNQcm9wXX0+XG4gICAgICB7bGFiZWwgJiYgIWFyaWFMYWJlbGxlZEJ5ICYmICg8VGV4dCBpZD17bGFiZWxJZH0gY3NzPXt0dyBgc3Itb25seWB9PlxuICAgICAgICAgIHtsYWJlbH1cbiAgICAgICAgPC9UZXh0Pil9XG5cbiAgICAgIHtjbG9uZXN9XG4gICAgPC9Cb3g+KTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgQ2hlY2tib3hHcm91cDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanN4Lm1hcCJdfQ== */")),
    children: [label && !ariaLabelledBy && jsx(Text, {
      id: labelId,
      css: _ref,
      children: label
    }), clones]
  }));
};

export default CheckboxGroup;
//# sourceMappingURL=index.esm.js.map
