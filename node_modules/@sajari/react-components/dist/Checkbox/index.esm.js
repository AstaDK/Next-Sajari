import _css from '@emotion/css';
import { objectWithoutPropertiesLoose as _objectWithoutPropertiesLoose, extends as _extends } from '../_virtual/_rollupPluginBabelHelpers.js';
import { getStylesObject, __DEV__ } from '@sajari/react-sdk-utils';
import { forwardRef, useState, useRef } from 'react';
import { jsxs, jsx } from '@emotion/core/jsx-runtime';
import Box from '../Box/index.esm.js';
import { useId } from '@react-aria/utils';
import Label from '../Label/index.esm.js';
import { useCheckboxStyles } from './styles.esm.js';

var Checkbox = /*#__PURE__*/forwardRef(function (props, ref) {
  var _ref;

  var _props$id = props.id,
      id = _props$id === void 0 ? "checkbox-" + useId() : _props$id,
      name = props.name,
      value = props.value,
      defaultChecked = props.defaultChecked,
      checked = props.checked,
      indeterminate = props.indeterminate,
      disabled = props.disabled,
      invalid = props.invalid,
      readOnly = props.readOnly,
      onChange = props.onChange,
      onBlur = props.onBlur,
      onFocus = props.onFocus,
      ariaLabel = props['aria-label'],
      ariaLabelledBy = props['aria-labelledby'],
      children = props.children,
      labelClassName = props.labelClassName,
      stylesProp = props.styles,
      _props$disableDefault = props.disableDefaultStyles,
      disableDefaultStyles = _props$disableDefault === void 0 ? false : _props$disableDefault,
      rest = _objectWithoutPropertiesLoose(props, ["id", "name", "value", "defaultChecked", "checked", "indeterminate", "disabled", "invalid", "readOnly", "onChange", "onBlur", "onFocus", "aria-label", "aria-labelledby", "children", "labelClassName", "styles", "disableDefaultStyles"]);

  var _React$useState = useState(defaultChecked != null ? defaultChecked : false),
      privateChecked = _React$useState[0],
      setPrivateChecked = _React$useState[1];

  var _React$useRef = useRef(typeof checked !== 'undefined'),
      controlled = _React$useRef.current;

  var internalChecked = (_ref = controlled ? checked : privateChecked) != null ? _ref : false;

  var _useCheckboxStyles = useCheckboxStyles(props),
      checkboxStyles = _useCheckboxStyles.styles,
      focusProps = _useCheckboxStyles.focusProps;

  var styles = getStylesObject(checkboxStyles, disableDefaultStyles);

  var internalChange = function internalChange(event) {
    if (!controlled) {
      setPrivateChecked(event.target.checked);
    }

    if (onChange) {
      onChange(event);
    }
  };

  var comp = jsxs(Box, _extends({
    css: /*#__PURE__*/_css([styles.componentWrapper, !children && stylesProp], ";label:comp;" + (process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFxQnVCIiwiZmlsZSI6ImluZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUlkIH0gZnJvbSAnQHJlYWN0LWFyaWEvdXRpbHMnO1xyXG5pbXBvcnQgeyBfX0RFVl9fLCBnZXRTdHlsZXNPYmplY3QgfSBmcm9tICdAc2FqYXJpL3JlYWN0LXNkay11dGlscyc7XHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IEJveCBmcm9tICcuLi9Cb3gnO1xyXG5pbXBvcnQgTGFiZWwgZnJvbSAnLi4vTGFiZWwnO1xyXG5pbXBvcnQgeyB1c2VDaGVja2JveFN0eWxlcyB9IGZyb20gJy4vc3R5bGVzJztcclxuY29uc3QgQ2hlY2tib3ggPSBSZWFjdC5mb3J3YXJkUmVmKChwcm9wcywgcmVmKSA9PiB7XHJcbiAgICBjb25zdCB7IGlkID0gYGNoZWNrYm94LSR7dXNlSWQoKX1gLCBuYW1lLCB2YWx1ZSwgZGVmYXVsdENoZWNrZWQsIGNoZWNrZWQsIGluZGV0ZXJtaW5hdGUsIGRpc2FibGVkLCBpbnZhbGlkLCByZWFkT25seSwgb25DaGFuZ2UsIG9uQmx1ciwgb25Gb2N1cywgJ2FyaWEtbGFiZWwnOiBhcmlhTGFiZWwsICdhcmlhLWxhYmVsbGVkYnknOiBhcmlhTGFiZWxsZWRCeSwgY2hpbGRyZW4sIGxhYmVsQ2xhc3NOYW1lLCBzdHlsZXM6IHN0eWxlc1Byb3AsIGRpc2FibGVEZWZhdWx0U3R5bGVzID0gZmFsc2UsIC4uLnJlc3QgfSA9IHByb3BzO1xyXG4gICAgY29uc3QgW3ByaXZhdGVDaGVja2VkLCBzZXRQcml2YXRlQ2hlY2tlZF0gPSBSZWFjdC51c2VTdGF0ZShkZWZhdWx0Q2hlY2tlZCA/PyBmYWxzZSk7XHJcbiAgICBjb25zdCB7IGN1cnJlbnQ6IGNvbnRyb2xsZWQgfSA9IFJlYWN0LnVzZVJlZih0eXBlb2YgY2hlY2tlZCAhPT0gJ3VuZGVmaW5lZCcpO1xyXG4gICAgY29uc3QgaW50ZXJuYWxDaGVja2VkID0gKGNvbnRyb2xsZWQgPyBjaGVja2VkIDogcHJpdmF0ZUNoZWNrZWQpID8/IGZhbHNlO1xyXG4gICAgY29uc3QgeyBzdHlsZXM6IGNoZWNrYm94U3R5bGVzLCBmb2N1c1Byb3BzIH0gPSB1c2VDaGVja2JveFN0eWxlcyhwcm9wcyk7XHJcbiAgICBjb25zdCBzdHlsZXMgPSBnZXRTdHlsZXNPYmplY3QoY2hlY2tib3hTdHlsZXMsIGRpc2FibGVEZWZhdWx0U3R5bGVzKTtcclxuICAgIGNvbnN0IGludGVybmFsQ2hhbmdlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKCFjb250cm9sbGVkKSB7XHJcbiAgICAgICAgICAgIHNldFByaXZhdGVDaGVja2VkKGV2ZW50LnRhcmdldC5jaGVja2VkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9uQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgY29tcCA9ICg8Qm94IGNzcz17W3N0eWxlcy5jb21wb25lbnRXcmFwcGVyLCAhY2hpbGRyZW4gJiYgc3R5bGVzUHJvcF19IHsuLi4oIWNoaWxkcmVuID8gcmVzdCA6IHt9KX0+XG4gICAgICAmIzgyMDM7XG4gICAgICA8Qm94IGFzPVwic3BhblwiIGNzcz17c3R5bGVzLmlucHV0V3JhcHBlcn0+XG4gICAgICAgIHtpbmRldGVybWluYXRlICYmICg8Qm94IGNzcz17c3R5bGVzLmluZGV0ZXJtaW5hdGV9PlxuICAgICAgICAgICAgPEJveCBjc3M9e3N0eWxlcy5pbmRldGVybWluYXRlSW5uZXJ9Lz5cbiAgICAgICAgICA8L0JveD4pfVxuICAgICAgICA8aW5wdXQgcmVmPXtyZWZ9IHR5cGU9XCJjaGVja2JveFwiIGlkPXtpZH0gbmFtZT17bmFtZX0gdmFsdWU9e3ZhbHVlfSBjaGVja2VkPXtpbnRlcm5hbENoZWNrZWR9IGRpc2FibGVkPXtkaXNhYmxlZH0gcmVhZE9ubHk9e3JlYWRPbmx5fSBvbkNoYW5nZT17aW50ZXJuYWxDaGFuZ2V9IG9uQmx1cj17b25CbHVyfSBvbkZvY3VzPXtvbkZvY3VzfSBhcmlhLWludmFsaWQ9e2ludmFsaWR9IGFyaWEtbGFiZWw9e2FyaWFMYWJlbH0gYXJpYS1sYWJlbGxlZGJ5PXthcmlhTGFiZWxsZWRCeX0gYXJpYS1jaGVja2VkPXtpbnRlcm5hbENoZWNrZWR9IGNzcz17c3R5bGVzLmlucHV0fSB7Li4uZm9jdXNQcm9wc30vPlxuICAgICAgPC9Cb3g+XG4gICAgPC9Cb3g+KTtcclxuICAgIGlmICghY2hpbGRyZW4pIHtcclxuICAgICAgICByZXR1cm4gY29tcDtcclxuICAgIH1cclxuICAgIHJldHVybiAoPEJveCBjc3M9e1tzdHlsZXMuY29udGFpbmVyLCBzdHlsZXNQcm9wXX0gey4uLnJlc3R9PlxuICAgICAge2NvbXB9XG5cbiAgICAgIDxMYWJlbCBodG1sRm9yPXtpZH0gY3NzPXtzdHlsZXMubGFiZWx9IGNsYXNzTmFtZT17bGFiZWxDbGFzc05hbWV9PlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8L0xhYmVsPlxuICAgIDwvQm94Pik7XHJcbn0pO1xyXG5pZiAoX19ERVZfXykge1xyXG4gICAgQ2hlY2tib3guZGlzcGxheU5hbWUgPSAnQ2hlY2tib3gnO1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IENoZWNrYm94O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qc3gubWFwIl19 */"))
  }, !children ? rest : {}, {
    children: ["\u200B", jsxs(Box, {
      as: "span",
      css: styles.inputWrapper,
      children: [indeterminate && jsx(Box, {
        css: styles.indeterminate,
        children: jsx(Box, {
          css: styles.indeterminateInner
        })
      }), jsx("input", _extends({
        ref: ref,
        type: "checkbox",
        id: id,
        name: name,
        value: value,
        checked: internalChecked,
        disabled: disabled,
        readOnly: readOnly,
        onChange: internalChange,
        onBlur: onBlur,
        onFocus: onFocus,
        "aria-invalid": invalid,
        "aria-label": ariaLabel,
        "aria-labelledby": ariaLabelledBy,
        "aria-checked": internalChecked,
        css: styles.input
      }, focusProps))]
    })]
  }));

  if (!children) {
    return comp;
  }

  return jsxs(Box, _extends({
    css: /*#__PURE__*/_css([styles.container, stylesProp], ";label:Checkbox;" + (process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFpQ2lCIiwiZmlsZSI6ImluZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUlkIH0gZnJvbSAnQHJlYWN0LWFyaWEvdXRpbHMnO1xyXG5pbXBvcnQgeyBfX0RFVl9fLCBnZXRTdHlsZXNPYmplY3QgfSBmcm9tICdAc2FqYXJpL3JlYWN0LXNkay11dGlscyc7XHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IEJveCBmcm9tICcuLi9Cb3gnO1xyXG5pbXBvcnQgTGFiZWwgZnJvbSAnLi4vTGFiZWwnO1xyXG5pbXBvcnQgeyB1c2VDaGVja2JveFN0eWxlcyB9IGZyb20gJy4vc3R5bGVzJztcclxuY29uc3QgQ2hlY2tib3ggPSBSZWFjdC5mb3J3YXJkUmVmKChwcm9wcywgcmVmKSA9PiB7XHJcbiAgICBjb25zdCB7IGlkID0gYGNoZWNrYm94LSR7dXNlSWQoKX1gLCBuYW1lLCB2YWx1ZSwgZGVmYXVsdENoZWNrZWQsIGNoZWNrZWQsIGluZGV0ZXJtaW5hdGUsIGRpc2FibGVkLCBpbnZhbGlkLCByZWFkT25seSwgb25DaGFuZ2UsIG9uQmx1ciwgb25Gb2N1cywgJ2FyaWEtbGFiZWwnOiBhcmlhTGFiZWwsICdhcmlhLWxhYmVsbGVkYnknOiBhcmlhTGFiZWxsZWRCeSwgY2hpbGRyZW4sIGxhYmVsQ2xhc3NOYW1lLCBzdHlsZXM6IHN0eWxlc1Byb3AsIGRpc2FibGVEZWZhdWx0U3R5bGVzID0gZmFsc2UsIC4uLnJlc3QgfSA9IHByb3BzO1xyXG4gICAgY29uc3QgW3ByaXZhdGVDaGVja2VkLCBzZXRQcml2YXRlQ2hlY2tlZF0gPSBSZWFjdC51c2VTdGF0ZShkZWZhdWx0Q2hlY2tlZCA/PyBmYWxzZSk7XHJcbiAgICBjb25zdCB7IGN1cnJlbnQ6IGNvbnRyb2xsZWQgfSA9IFJlYWN0LnVzZVJlZih0eXBlb2YgY2hlY2tlZCAhPT0gJ3VuZGVmaW5lZCcpO1xyXG4gICAgY29uc3QgaW50ZXJuYWxDaGVja2VkID0gKGNvbnRyb2xsZWQgPyBjaGVja2VkIDogcHJpdmF0ZUNoZWNrZWQpID8/IGZhbHNlO1xyXG4gICAgY29uc3QgeyBzdHlsZXM6IGNoZWNrYm94U3R5bGVzLCBmb2N1c1Byb3BzIH0gPSB1c2VDaGVja2JveFN0eWxlcyhwcm9wcyk7XHJcbiAgICBjb25zdCBzdHlsZXMgPSBnZXRTdHlsZXNPYmplY3QoY2hlY2tib3hTdHlsZXMsIGRpc2FibGVEZWZhdWx0U3R5bGVzKTtcclxuICAgIGNvbnN0IGludGVybmFsQ2hhbmdlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKCFjb250cm9sbGVkKSB7XHJcbiAgICAgICAgICAgIHNldFByaXZhdGVDaGVja2VkKGV2ZW50LnRhcmdldC5jaGVja2VkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9uQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgY29tcCA9ICg8Qm94IGNzcz17W3N0eWxlcy5jb21wb25lbnRXcmFwcGVyLCAhY2hpbGRyZW4gJiYgc3R5bGVzUHJvcF19IHsuLi4oIWNoaWxkcmVuID8gcmVzdCA6IHt9KX0+XG4gICAgICAmIzgyMDM7XG4gICAgICA8Qm94IGFzPVwic3BhblwiIGNzcz17c3R5bGVzLmlucHV0V3JhcHBlcn0+XG4gICAgICAgIHtpbmRldGVybWluYXRlICYmICg8Qm94IGNzcz17c3R5bGVzLmluZGV0ZXJtaW5hdGV9PlxuICAgICAgICAgICAgPEJveCBjc3M9e3N0eWxlcy5pbmRldGVybWluYXRlSW5uZXJ9Lz5cbiAgICAgICAgICA8L0JveD4pfVxuICAgICAgICA8aW5wdXQgcmVmPXtyZWZ9IHR5cGU9XCJjaGVja2JveFwiIGlkPXtpZH0gbmFtZT17bmFtZX0gdmFsdWU9e3ZhbHVlfSBjaGVja2VkPXtpbnRlcm5hbENoZWNrZWR9IGRpc2FibGVkPXtkaXNhYmxlZH0gcmVhZE9ubHk9e3JlYWRPbmx5fSBvbkNoYW5nZT17aW50ZXJuYWxDaGFuZ2V9IG9uQmx1cj17b25CbHVyfSBvbkZvY3VzPXtvbkZvY3VzfSBhcmlhLWludmFsaWQ9e2ludmFsaWR9IGFyaWEtbGFiZWw9e2FyaWFMYWJlbH0gYXJpYS1sYWJlbGxlZGJ5PXthcmlhTGFiZWxsZWRCeX0gYXJpYS1jaGVja2VkPXtpbnRlcm5hbENoZWNrZWR9IGNzcz17c3R5bGVzLmlucHV0fSB7Li4uZm9jdXNQcm9wc30vPlxuICAgICAgPC9Cb3g+XG4gICAgPC9Cb3g+KTtcclxuICAgIGlmICghY2hpbGRyZW4pIHtcclxuICAgICAgICByZXR1cm4gY29tcDtcclxuICAgIH1cclxuICAgIHJldHVybiAoPEJveCBjc3M9e1tzdHlsZXMuY29udGFpbmVyLCBzdHlsZXNQcm9wXX0gey4uLnJlc3R9PlxuICAgICAge2NvbXB9XG5cbiAgICAgIDxMYWJlbCBodG1sRm9yPXtpZH0gY3NzPXtzdHlsZXMubGFiZWx9IGNsYXNzTmFtZT17bGFiZWxDbGFzc05hbWV9PlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8L0xhYmVsPlxuICAgIDwvQm94Pik7XHJcbn0pO1xyXG5pZiAoX19ERVZfXykge1xyXG4gICAgQ2hlY2tib3guZGlzcGxheU5hbWUgPSAnQ2hlY2tib3gnO1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IENoZWNrYm94O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qc3gubWFwIl19 */"))
  }, rest, {
    children: [comp, jsx(Label, {
      htmlFor: id,
      css: styles.label,
      className: labelClassName,
      children: children
    })]
  }));
});

if (__DEV__) {
  Checkbox.displayName = 'Checkbox';
}

export default Checkbox;
//# sourceMappingURL=index.esm.js.map
