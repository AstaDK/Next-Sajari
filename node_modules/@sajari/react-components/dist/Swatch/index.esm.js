import _css from '@emotion/css';
import { objectWithoutPropertiesLoose as _objectWithoutPropertiesLoose, extends as _extends } from '../_virtual/_rollupPluginBabelHelpers.js';
import { getStylesObject, cleanChildren, __DEV__ } from '@sajari/react-sdk-utils';
import { useCallback, cloneElement } from 'react';
import { jsx } from '@emotion/core/jsx-runtime';
import Box from '../Box/index.esm.js';
import { colorKeys } from './colors.esm.js';
import SwatchContextProvider from './context.esm.js';
import { Color } from './components/Color/index.esm.js';

var Swatch = function Swatch(_ref) {
  var children = _ref.children,
      _ref$checkedColors = _ref.checkedColors,
      checkedColors = _ref$checkedColors === void 0 ? [] : _ref$checkedColors,
      _ref$onChange = _ref.onChange,
      onChange = _ref$onChange === void 0 ? function () {} : _ref$onChange,
      stylesProp = _ref.styles,
      _ref$disableDefaultSt = _ref.disableDefaultStyles,
      disableDefaultStyles = _ref$disableDefaultSt === void 0 ? false : _ref$disableDefaultSt,
      _ref$colorCheckedClas = _ref.colorCheckedClassName,
      colorCheckedClassName = _ref$colorCheckedClas === void 0 ? '' : _ref$colorCheckedClas,
      _ref$colorClassName = _ref.colorClassName,
      colorClassName = _ref$colorClassName === void 0 ? '' : _ref$colorClassName,
      rest = _objectWithoutPropertiesLoose(_ref, ["children", "checkedColors", "onChange", "styles", "disableDefaultStyles", "colorCheckedClassName", "colorClassName"]);

  var styles = getStylesObject({
    container: {
      "display": "flex",
      "flexWrap": "wrap",
      "marginTop": "-0.5rem",
      "marginLeft": "-0.5rem"
    }
  }, disableDefaultStyles);
  var validChildren = cleanChildren(children);
  var setState = useCallback(function (color) {
    if (checkedColors.includes(color)) {
      onChange(checkedColors.filter(function (c) {
        return c !== color;
      }));
    } else {
      onChange([].concat(checkedColors, [color]));
    }
  }, [JSON.stringify(checkedColors)]);
  return jsx(SwatchContextProvider, {
    value: {
      state: checkedColors,
      setState: setState,
      disableDefaultStyles: disableDefaultStyles
    },
    children: jsx(Box, _extends({
      css: /*#__PURE__*/_css([styles.container, stylesProp], ";label:Swatch;" + (process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFtQlciLCJmaWxlIjoiaW5kZXgudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19ERVZfXywgY2xlYW5DaGlsZHJlbiwgZ2V0U3R5bGVzT2JqZWN0IH0gZnJvbSAnQHNhamFyaS9yZWFjdC1zZGstdXRpbHMnO1xyXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB0dyBmcm9tICd0d2luLm1hY3JvJztcclxuaW1wb3J0IEJveCBmcm9tICcuLi9Cb3gnO1xyXG5pbXBvcnQgeyBjb2xvcktleXMgfSBmcm9tICcuL2NvbG9ycyc7XHJcbmltcG9ydCB7IENvbG9yIH0gZnJvbSAnLi9jb21wb25lbnRzL0NvbG9yJztcclxuaW1wb3J0IFN3YXRjaENvbnRleHRQcm92aWRlciBmcm9tICcuL2NvbnRleHQnO1xyXG5jb25zdCBTd2F0Y2ggPSAoeyBjaGlsZHJlbiwgY2hlY2tlZENvbG9ycyA9IFtdLCBvbkNoYW5nZSA9ICgpID0+IHsgfSwgc3R5bGVzOiBzdHlsZXNQcm9wLCBkaXNhYmxlRGVmYXVsdFN0eWxlcyA9IGZhbHNlLCBjb2xvckNoZWNrZWRDbGFzc05hbWUgPSAnJywgY29sb3JDbGFzc05hbWUgPSAnJywgLi4ucmVzdCB9KSA9PiB7XHJcbiAgICBjb25zdCBzdHlsZXMgPSBnZXRTdHlsZXNPYmplY3QoeyBjb250YWluZXI6IHR3IGBmbGV4IGZsZXgtd3JhcCAtbXQtMiAtbWwtMmAgfSwgZGlzYWJsZURlZmF1bHRTdHlsZXMpO1xyXG4gICAgY29uc3QgdmFsaWRDaGlsZHJlbiA9IGNsZWFuQ2hpbGRyZW4oY2hpbGRyZW4pO1xyXG4gICAgY29uc3Qgc2V0U3RhdGUgPSBSZWFjdC51c2VDYWxsYmFjaygoY29sb3IpID0+IHtcclxuICAgICAgICBpZiAoY2hlY2tlZENvbG9ycy5pbmNsdWRlcyhjb2xvcikpIHtcclxuICAgICAgICAgICAgb25DaGFuZ2UoY2hlY2tlZENvbG9ycy5maWx0ZXIoKGMpID0+IGMgIT09IGNvbG9yKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvbkNoYW5nZShbLi4uY2hlY2tlZENvbG9ycywgY29sb3JdKTtcclxuICAgICAgICB9XHJcbiAgICB9LCBbSlNPTi5zdHJpbmdpZnkoY2hlY2tlZENvbG9ycyldKTtcclxuICAgIHJldHVybiAoPFN3YXRjaENvbnRleHRQcm92aWRlciB2YWx1ZT17eyBzdGF0ZTogY2hlY2tlZENvbG9ycywgc2V0U3RhdGUsIGRpc2FibGVEZWZhdWx0U3R5bGVzIH19PlxuICAgICAgPEJveCBjc3M9e1tzdHlsZXMuY29udGFpbmVyLCBzdHlsZXNQcm9wXX0gey4uLnJlc3R9PlxuICAgICAgICB7dmFsaWRDaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiBSZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGQsIHtcclxuICAgICAgICBjbGFzc05hbWU6IGNvbG9yQ2xhc3NOYW1lLFxyXG4gICAgICAgIGNoZWNrZWRDbGFzc05hbWU6IGNvbG9yQ2hlY2tlZENsYXNzTmFtZSxcclxuICAgICAgICAuLi5jaGlsZC5wcm9wcyxcclxuICAgIH0pKX1cbiAgICAgIDwvQm94PlxuICAgIDwvU3dhdGNoQ29udGV4dFByb3ZpZGVyPik7XHJcbn07XHJcbmlmIChfX0RFVl9fKSB7XHJcbiAgICBTd2F0Y2guZGlzcGxheU5hbWUgPSAnU3dhdGNoJztcclxufVxyXG5Td2F0Y2guQ29sb3IgPSBDb2xvcjtcclxuU3dhdGNoLmNvbG9yS2V5cyA9IGNvbG9yS2V5cztcclxuZXhwb3J0IGRlZmF1bHQgU3dhdGNoO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qc3gubWFwIl19 */"))
    }, rest, {
      children: validChildren.map(function (child) {
        return /*#__PURE__*/cloneElement(child, _extends({
          className: colorClassName,
          checkedClassName: colorCheckedClassName
        }, child.props));
      })
    }))
  });
};

if (__DEV__) {
  Swatch.displayName = 'Swatch';
}

Swatch.Color = Color;
Swatch.colorKeys = colorKeys;

export default Swatch;
//# sourceMappingURL=index.esm.js.map
