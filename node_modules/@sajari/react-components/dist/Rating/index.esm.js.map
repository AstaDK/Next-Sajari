{"version":3,"file":"index.esm.js","sources":["../../src/Rating/index.tsx"],"sourcesContent":["/* eslint-disable react/no-array-index-key */\nimport { __DEV__, getStylesObject } from '@sajari/react-sdk-utils';\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport tw from 'twin.macro';\n\nimport { IconSmallStar } from '../assets/icons';\nimport Box from '../Box';\nimport { toRatingArray } from '../utils/rating';\nimport { RatingItem } from './components/RatingItem';\nimport { ItemType, RatingItemProps, RatingProps } from './types';\n\nconst Rating = React.forwardRef((props: RatingProps, ref: React.Ref<HTMLDivElement>) => {\n  const {\n    value,\n    children,\n    character = <IconSmallStar />,\n    max = 5,\n    direction = 'ltr',\n    unit = 'star',\n    activeHalfRatingItemClassName,\n    activeRatingItemClassName,\n    ratingItemClassName,\n    styles: stylesProp,\n    disableDefaultStyles = false,\n    ...rest\n  } = props;\n\n  if (Number.isNaN(value)) {\n    return null;\n  }\n\n  const isHalf = Math.round(value) - value !== 0;\n  const flipped = direction === 'rtl';\n  const label = isHalf ? `Rating: ${value} point 5 out of ${max} ${unit}s` : `Rating: ${value} out of ${max} ${unit}s`;\n  const arr = toRatingArray(value, max);\n\n  const styles = getStylesObject(\n    {\n      container: flipped\n        ? tw`inline-flex flex-row-reverse items-center space-x-1 space-x-reverse`\n        : tw`inline-flex items-center space-x-1`,\n    },\n    disableDefaultStyles,\n  );\n\n  return (\n    <Box ref={ref} role=\"img\" aria-label={label} css={[styles.container, stylesProp]} {...rest}>\n      {arr.map((type, i) => {\n        switch (type) {\n          case ItemType.Filled:\n            return (\n              <RatingItem\n                key={`active-rating-${i}`}\n                index={i}\n                count={max}\n                character={character}\n                className={classnames(ratingItemClassName, activeRatingItemClassName)}\n                disableDefaultStyles={disableDefaultStyles}\n                active\n              />\n            );\n\n          case ItemType.HalfFilled:\n            return (\n              <RatingItem\n                key=\"half-active-rating\"\n                index={Math.ceil(value) - Math.floor(value)}\n                count={max}\n                flipped={flipped}\n                character={character}\n                className={classnames(ratingItemClassName, activeHalfRatingItemClassName)}\n                disableDefaultStyles={disableDefaultStyles}\n                active\n                half\n              />\n            );\n\n          case ItemType.Empty:\n            return (\n              <RatingItem\n                key={`inactive-rating-${i}`}\n                index={i}\n                count={max}\n                character={character}\n                active={false}\n                className={ratingItemClassName}\n                disableDefaultStyles={disableDefaultStyles}\n              />\n            );\n\n          default:\n            return null;\n        }\n      })}\n      <Box as=\"span\" css={tw`sr-only`}>{`${value} ${unit}${value > 1 ? 's' : ''}`}</Box>\n      {children}\n    </Box>\n  );\n});\n\nif (__DEV__) {\n  Rating.displayName = 'Rating';\n}\n\nexport default Rating;\nexport type { RatingItemProps };\n"],"names":["Rating","React","props","ref","value","children","character","_jsx","max","direction","unit","activeHalfRatingItemClassName","activeRatingItemClassName","ratingItemClassName","stylesProp","styles","disableDefaultStyles","rest","Number","isNaN","isHalf","Math","round","flipped","label","arr","toRatingArray","getStylesObject","container","_jsxs","map","type","i","ItemType","Filled","classnames","HalfFilled","ceil","floor","Empty","__DEV__","displayName"],"mappings":"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"}