import _css from '@emotion/css';
import { objectWithoutPropertiesLoose as _objectWithoutPropertiesLoose, extends as _extends } from '../_virtual/_rollupPluginBabelHelpers.js';
import { getStylesObject, __DEV__ } from '@sajari/react-sdk-utils';
import { forwardRef } from 'react';
import { jsx, jsxs } from '@emotion/core/jsx-runtime';
import Box from '../Box/index.esm.js';
import classnames from 'classnames';
import '../assets/icons/check.esm.js';
import '../assets/icons/chevron-left.esm.js';
import '../assets/icons/chevron-right.esm.js';
import '../assets/icons/down-key.esm.js';
import '../assets/icons/empty-mic.esm.js';
import '../assets/icons/enter-key.esm.js';
import '../assets/icons/mic.esm.js';
import '../assets/icons/search.esm.js';
import '../assets/icons/small-check.esm.js';
import '../assets/icons/small-search.esm.js';
import IconSmallStar from '../assets/icons/small-star.esm.js';
import '../assets/icons/spinner.esm.js';
import '../assets/icons/up-key.esm.js';
import '../assets/icons/close.esm.js';
import { ItemType } from './types.esm.js';
import { toRatingArray } from '../utils/rating.esm.js';
import { RatingItem } from './components/RatingItem/index.esm.js';

function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }

var _ref = process.env.NODE_ENV === "production" ? {
  name: "vw705e-Rating",
  styles: "position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;;label:Rating;"
} : {
  name: "vw705e-Rating",
  styles: "position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;;label:Rating;",
  map: "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFvQ3FCIiwiZmlsZSI6ImluZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fREVWX18sIGdldFN0eWxlc09iamVjdCB9IGZyb20gJ0BzYWphcmkvcmVhY3Qtc2RrLXV0aWxzJztcclxuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHR3IGZyb20gJ3R3aW4ubWFjcm8nO1xyXG5pbXBvcnQgeyBJY29uU21hbGxTdGFyIH0gZnJvbSAnLi4vYXNzZXRzL2ljb25zJztcclxuaW1wb3J0IEJveCBmcm9tICcuLi9Cb3gnO1xyXG5pbXBvcnQgeyB0b1JhdGluZ0FycmF5IH0gZnJvbSAnLi4vdXRpbHMvcmF0aW5nJztcclxuaW1wb3J0IHsgUmF0aW5nSXRlbSB9IGZyb20gJy4vY29tcG9uZW50cy9SYXRpbmdJdGVtJztcclxuaW1wb3J0IHsgSXRlbVR5cGUgfSBmcm9tICcuL3R5cGVzJztcclxuY29uc3QgUmF0aW5nID0gUmVhY3QuZm9yd2FyZFJlZigocHJvcHMsIHJlZikgPT4ge1xyXG4gICAgY29uc3QgeyB2YWx1ZSwgY2hpbGRyZW4sIGNoYXJhY3RlciA9IDxJY29uU21hbGxTdGFyIC8+LCBtYXggPSA1LCBkaXJlY3Rpb24gPSAnbHRyJywgdW5pdCA9ICdzdGFyJywgYWN0aXZlSGFsZlJhdGluZ0l0ZW1DbGFzc05hbWUsIGFjdGl2ZVJhdGluZ0l0ZW1DbGFzc05hbWUsIHJhdGluZ0l0ZW1DbGFzc05hbWUsIHN0eWxlczogc3R5bGVzUHJvcCwgZGlzYWJsZURlZmF1bHRTdHlsZXMgPSBmYWxzZSwgLi4ucmVzdCB9ID0gcHJvcHM7XHJcbiAgICBpZiAoTnVtYmVyLmlzTmFOKHZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaXNIYWxmID0gTWF0aC5yb3VuZCh2YWx1ZSkgLSB2YWx1ZSAhPT0gMDtcclxuICAgIGNvbnN0IGZsaXBwZWQgPSBkaXJlY3Rpb24gPT09ICdydGwnO1xyXG4gICAgY29uc3QgbGFiZWwgPSBpc0hhbGYgPyBgUmF0aW5nOiAke3ZhbHVlfSBwb2ludCA1IG91dCBvZiAke21heH0gJHt1bml0fXNgIDogYFJhdGluZzogJHt2YWx1ZX0gb3V0IG9mICR7bWF4fSAke3VuaXR9c2A7XHJcbiAgICBjb25zdCBhcnIgPSB0b1JhdGluZ0FycmF5KHZhbHVlLCBtYXgpO1xyXG4gICAgY29uc3Qgc3R5bGVzID0gZ2V0U3R5bGVzT2JqZWN0KHtcclxuICAgICAgICBjb250YWluZXI6IGZsaXBwZWRcclxuICAgICAgICAgICAgPyB0dyBgaW5saW5lLWZsZXggZmxleC1yb3ctcmV2ZXJzZSBpdGVtcy1jZW50ZXIgc3BhY2UteC0xIHNwYWNlLXgtcmV2ZXJzZWBcclxuICAgICAgICAgICAgOiB0dyBgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMWAsXHJcbiAgICB9LCBkaXNhYmxlRGVmYXVsdFN0eWxlcyk7XHJcbiAgICByZXR1cm4gKDxCb3ggcmVmPXtyZWZ9IHJvbGU9XCJpbWdcIiBhcmlhLWxhYmVsPXtsYWJlbH0gY3NzPXtbc3R5bGVzLmNvbnRhaW5lciwgc3R5bGVzUHJvcF19IHsuLi5yZXN0fT5cbiAgICAgIHthcnIubWFwKCh0eXBlLCBpKSA9PiB7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgSXRlbVR5cGUuRmlsbGVkOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICg8UmF0aW5nSXRlbSBrZXk9e2BhY3RpdmUtcmF0aW5nLSR7aX1gfSBpbmRleD17aX0gY291bnQ9e21heH0gY2hhcmFjdGVyPXtjaGFyYWN0ZXJ9IGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhyYXRpbmdJdGVtQ2xhc3NOYW1lLCBhY3RpdmVSYXRpbmdJdGVtQ2xhc3NOYW1lKX0gZGlzYWJsZURlZmF1bHRTdHlsZXM9e2Rpc2FibGVEZWZhdWx0U3R5bGVzfSBhY3RpdmUvPik7XHJcbiAgICAgICAgICAgIGNhc2UgSXRlbVR5cGUuSGFsZkZpbGxlZDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoPFJhdGluZ0l0ZW0ga2V5PVwiaGFsZi1hY3RpdmUtcmF0aW5nXCIgaW5kZXg9e01hdGguY2VpbCh2YWx1ZSkgLSBNYXRoLmZsb29yKHZhbHVlKX0gY291bnQ9e21heH0gZmxpcHBlZD17ZmxpcHBlZH0gY2hhcmFjdGVyPXtjaGFyYWN0ZXJ9IGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhyYXRpbmdJdGVtQ2xhc3NOYW1lLCBhY3RpdmVIYWxmUmF0aW5nSXRlbUNsYXNzTmFtZSl9IGRpc2FibGVEZWZhdWx0U3R5bGVzPXtkaXNhYmxlRGVmYXVsdFN0eWxlc30gYWN0aXZlIGhhbGYvPik7XHJcbiAgICAgICAgICAgIGNhc2UgSXRlbVR5cGUuRW1wdHk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKDxSYXRpbmdJdGVtIGtleT17YGluYWN0aXZlLXJhdGluZy0ke2l9YH0gaW5kZXg9e2l9IGNvdW50PXttYXh9IGNoYXJhY3Rlcj17Y2hhcmFjdGVyfSBhY3RpdmU9e2ZhbHNlfSBjbGFzc05hbWU9e3JhdGluZ0l0ZW1DbGFzc05hbWV9IGRpc2FibGVEZWZhdWx0U3R5bGVzPXtkaXNhYmxlRGVmYXVsdFN0eWxlc30vPik7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9KX1cbiAgICAgIDxCb3ggYXM9XCJzcGFuXCIgY3NzPXt0dyBgc3Itb25seWB9PntgJHt2YWx1ZX0gJHt1bml0fSR7dmFsdWUgPiAxID8gJ3MnIDogJyd9YH08L0JveD5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0JveD4pO1xyXG59KTtcclxuaWYgKF9fREVWX18pIHtcclxuICAgIFJhdGluZy5kaXNwbGF5TmFtZSA9ICdSYXRpbmcnO1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IFJhdGluZztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanN4Lm1hcCJdfQ== */",
  toString: _EMOTION_STRINGIFIED_CSS_ERROR__
};

var Rating = /*#__PURE__*/forwardRef(function (props, ref) {
  var value = props.value,
      children = props.children,
      _props$character = props.character,
      character = _props$character === void 0 ? jsx(IconSmallStar, {}) : _props$character,
      _props$max = props.max,
      max = _props$max === void 0 ? 5 : _props$max,
      _props$direction = props.direction,
      direction = _props$direction === void 0 ? 'ltr' : _props$direction,
      _props$unit = props.unit,
      unit = _props$unit === void 0 ? 'star' : _props$unit,
      activeHalfRatingItemClassName = props.activeHalfRatingItemClassName,
      activeRatingItemClassName = props.activeRatingItemClassName,
      ratingItemClassName = props.ratingItemClassName,
      stylesProp = props.styles,
      _props$disableDefault = props.disableDefaultStyles,
      disableDefaultStyles = _props$disableDefault === void 0 ? false : _props$disableDefault,
      rest = _objectWithoutPropertiesLoose(props, ["value", "children", "character", "max", "direction", "unit", "activeHalfRatingItemClassName", "activeRatingItemClassName", "ratingItemClassName", "styles", "disableDefaultStyles"]);

  if (Number.isNaN(value)) {
    return null;
  }

  var isHalf = Math.round(value) - value !== 0;
  var flipped = direction === 'rtl';
  var label = isHalf ? "Rating: " + value + " point 5 out of " + max + " " + unit + "s" : "Rating: " + value + " out of " + max + " " + unit + "s";
  var arr = toRatingArray(value, max);
  var styles = getStylesObject({
    container: flipped ? {
      "display": "inline-flex",
      "flexDirection": "row-reverse",
      "alignItems": "center",
      "> :not(template) ~ :not(template)": {
        "--space-x-reverse": 1,
        "marginRight": "calc(0.25rem * var(--space-x-reverse))",
        "marginLeft": "calc(0.25rem * calc(1 - var(--space-x-reverse)))"
      }
    } : {
      "display": "inline-flex",
      "alignItems": "center",
      "> :not(template) ~ :not(template)": {
        "--space-x-reverse": 0,
        "marginRight": "calc(0.25rem * var(--space-x-reverse))",
        "marginLeft": "calc(0.25rem * calc(1 - var(--space-x-reverse)))"
      }
    }
  }, disableDefaultStyles);
  return jsxs(Box, _extends({
    ref: ref,
    role: "img",
    "aria-label": label,
    css: /*#__PURE__*/_css([styles.container, stylesProp], ";label:Rating;" + (process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF1QnlEIiwiZmlsZSI6ImluZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fREVWX18sIGdldFN0eWxlc09iamVjdCB9IGZyb20gJ0BzYWphcmkvcmVhY3Qtc2RrLXV0aWxzJztcclxuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHR3IGZyb20gJ3R3aW4ubWFjcm8nO1xyXG5pbXBvcnQgeyBJY29uU21hbGxTdGFyIH0gZnJvbSAnLi4vYXNzZXRzL2ljb25zJztcclxuaW1wb3J0IEJveCBmcm9tICcuLi9Cb3gnO1xyXG5pbXBvcnQgeyB0b1JhdGluZ0FycmF5IH0gZnJvbSAnLi4vdXRpbHMvcmF0aW5nJztcclxuaW1wb3J0IHsgUmF0aW5nSXRlbSB9IGZyb20gJy4vY29tcG9uZW50cy9SYXRpbmdJdGVtJztcclxuaW1wb3J0IHsgSXRlbVR5cGUgfSBmcm9tICcuL3R5cGVzJztcclxuY29uc3QgUmF0aW5nID0gUmVhY3QuZm9yd2FyZFJlZigocHJvcHMsIHJlZikgPT4ge1xyXG4gICAgY29uc3QgeyB2YWx1ZSwgY2hpbGRyZW4sIGNoYXJhY3RlciA9IDxJY29uU21hbGxTdGFyIC8+LCBtYXggPSA1LCBkaXJlY3Rpb24gPSAnbHRyJywgdW5pdCA9ICdzdGFyJywgYWN0aXZlSGFsZlJhdGluZ0l0ZW1DbGFzc05hbWUsIGFjdGl2ZVJhdGluZ0l0ZW1DbGFzc05hbWUsIHJhdGluZ0l0ZW1DbGFzc05hbWUsIHN0eWxlczogc3R5bGVzUHJvcCwgZGlzYWJsZURlZmF1bHRTdHlsZXMgPSBmYWxzZSwgLi4ucmVzdCB9ID0gcHJvcHM7XHJcbiAgICBpZiAoTnVtYmVyLmlzTmFOKHZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaXNIYWxmID0gTWF0aC5yb3VuZCh2YWx1ZSkgLSB2YWx1ZSAhPT0gMDtcclxuICAgIGNvbnN0IGZsaXBwZWQgPSBkaXJlY3Rpb24gPT09ICdydGwnO1xyXG4gICAgY29uc3QgbGFiZWwgPSBpc0hhbGYgPyBgUmF0aW5nOiAke3ZhbHVlfSBwb2ludCA1IG91dCBvZiAke21heH0gJHt1bml0fXNgIDogYFJhdGluZzogJHt2YWx1ZX0gb3V0IG9mICR7bWF4fSAke3VuaXR9c2A7XHJcbiAgICBjb25zdCBhcnIgPSB0b1JhdGluZ0FycmF5KHZhbHVlLCBtYXgpO1xyXG4gICAgY29uc3Qgc3R5bGVzID0gZ2V0U3R5bGVzT2JqZWN0KHtcclxuICAgICAgICBjb250YWluZXI6IGZsaXBwZWRcclxuICAgICAgICAgICAgPyB0dyBgaW5saW5lLWZsZXggZmxleC1yb3ctcmV2ZXJzZSBpdGVtcy1jZW50ZXIgc3BhY2UteC0xIHNwYWNlLXgtcmV2ZXJzZWBcclxuICAgICAgICAgICAgOiB0dyBgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMWAsXHJcbiAgICB9LCBkaXNhYmxlRGVmYXVsdFN0eWxlcyk7XHJcbiAgICByZXR1cm4gKDxCb3ggcmVmPXtyZWZ9IHJvbGU9XCJpbWdcIiBhcmlhLWxhYmVsPXtsYWJlbH0gY3NzPXtbc3R5bGVzLmNvbnRhaW5lciwgc3R5bGVzUHJvcF19IHsuLi5yZXN0fT5cbiAgICAgIHthcnIubWFwKCh0eXBlLCBpKSA9PiB7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgSXRlbVR5cGUuRmlsbGVkOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICg8UmF0aW5nSXRlbSBrZXk9e2BhY3RpdmUtcmF0aW5nLSR7aX1gfSBpbmRleD17aX0gY291bnQ9e21heH0gY2hhcmFjdGVyPXtjaGFyYWN0ZXJ9IGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhyYXRpbmdJdGVtQ2xhc3NOYW1lLCBhY3RpdmVSYXRpbmdJdGVtQ2xhc3NOYW1lKX0gZGlzYWJsZURlZmF1bHRTdHlsZXM9e2Rpc2FibGVEZWZhdWx0U3R5bGVzfSBhY3RpdmUvPik7XHJcbiAgICAgICAgICAgIGNhc2UgSXRlbVR5cGUuSGFsZkZpbGxlZDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoPFJhdGluZ0l0ZW0ga2V5PVwiaGFsZi1hY3RpdmUtcmF0aW5nXCIgaW5kZXg9e01hdGguY2VpbCh2YWx1ZSkgLSBNYXRoLmZsb29yKHZhbHVlKX0gY291bnQ9e21heH0gZmxpcHBlZD17ZmxpcHBlZH0gY2hhcmFjdGVyPXtjaGFyYWN0ZXJ9IGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhyYXRpbmdJdGVtQ2xhc3NOYW1lLCBhY3RpdmVIYWxmUmF0aW5nSXRlbUNsYXNzTmFtZSl9IGRpc2FibGVEZWZhdWx0U3R5bGVzPXtkaXNhYmxlRGVmYXVsdFN0eWxlc30gYWN0aXZlIGhhbGYvPik7XHJcbiAgICAgICAgICAgIGNhc2UgSXRlbVR5cGUuRW1wdHk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKDxSYXRpbmdJdGVtIGtleT17YGluYWN0aXZlLXJhdGluZy0ke2l9YH0gaW5kZXg9e2l9IGNvdW50PXttYXh9IGNoYXJhY3Rlcj17Y2hhcmFjdGVyfSBhY3RpdmU9e2ZhbHNlfSBjbGFzc05hbWU9e3JhdGluZ0l0ZW1DbGFzc05hbWV9IGRpc2FibGVEZWZhdWx0U3R5bGVzPXtkaXNhYmxlRGVmYXVsdFN0eWxlc30vPik7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9KX1cbiAgICAgIDxCb3ggYXM9XCJzcGFuXCIgY3NzPXt0dyBgc3Itb25seWB9PntgJHt2YWx1ZX0gJHt1bml0fSR7dmFsdWUgPiAxID8gJ3MnIDogJyd9YH08L0JveD5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0JveD4pO1xyXG59KTtcclxuaWYgKF9fREVWX18pIHtcclxuICAgIFJhdGluZy5kaXNwbGF5TmFtZSA9ICdSYXRpbmcnO1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IFJhdGluZztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanN4Lm1hcCJdfQ== */"))
  }, rest, {
    children: [arr.map(function (type, i) {
      switch (type) {
        case ItemType.Filled:
          return jsx(RatingItem, {
            index: i,
            count: max,
            character: character,
            className: classnames(ratingItemClassName, activeRatingItemClassName),
            disableDefaultStyles: disableDefaultStyles,
            active: true
          }, "active-rating-" + i);

        case ItemType.HalfFilled:
          return jsx(RatingItem, {
            index: Math.ceil(value) - Math.floor(value),
            count: max,
            flipped: flipped,
            character: character,
            className: classnames(ratingItemClassName, activeHalfRatingItemClassName),
            disableDefaultStyles: disableDefaultStyles,
            active: true,
            half: true
          }, "half-active-rating");

        case ItemType.Empty:
          return jsx(RatingItem, {
            index: i,
            count: max,
            character: character,
            active: false,
            className: ratingItemClassName,
            disableDefaultStyles: disableDefaultStyles
          }, "inactive-rating-" + i);

        default:
          return null;
      }
    }), jsx(Box, {
      as: "span",
      css: _ref,
      children: value + " " + unit + (value > 1 ? 's' : '')
    }), children]
  }));
});

if (__DEV__) {
  Rating.displayName = 'Rating';
}

export default Rating;
//# sourceMappingURL=index.esm.js.map
