import _css from '@emotion/css';
import { objectWithoutPropertiesLoose as _objectWithoutPropertiesLoose, extends as _extends } from '../_virtual/_rollupPluginBabelHelpers.js';
import { isArray, roundToStep, clamp, isNullOrUndefined, getStylesObject, __DEV__, formatNumber, getDecimalPlaces, isString, closest, noop } from '@sajari/react-sdk-utils';
import { useRef, useState, useMemo, useEffect } from 'react';
import { jsx, jsxs } from '@emotion/core/jsx-runtime';
import Box from '../Box/index.esm.js';
import Text from '../Text/index.esm.js';
import { useTextField } from '@react-aria/textfield';
import { useRanger } from 'react-ranger';
import Fill from './components/Fill/index.esm.js';
import Handle from './components/Handle/index.esm.js';
import Input from './components/Input/index.esm.js';
import Track from './components/Track/index.esm.js';
import useRangeInputStyles from './styles.esm.js';

function RangeInput(props) {
  var language = props.language,
      _props$format = props.format,
      format = _props$format === void 0 ? 'default' : _props$format,
      _props$currency = props.currency,
      currency = _props$currency === void 0 ? 'USD' : _props$currency,
      _props$fixedPoint = props.fixedPoint,
      fixedPoint = _props$fixedPoint === void 0 ? false : _props$fixedPoint,
      _props$onChange = props.onChange,
      onChange = _props$onChange === void 0 ? noop : _props$onChange,
      _props$onInput = props.onInput,
      onInput = _props$onInput === void 0 ? noop : _props$onInput,
      _props$min = props.min,
      min = _props$min === void 0 ? 0 : _props$min,
      _props$max = props.max,
      max = _props$max === void 0 ? 100 : _props$max,
      _props$value = props.value,
      valueProp = _props$value === void 0 ? [min, max] : _props$value,
      _props$step = props.step,
      step = _props$step === void 0 ? 1 : _props$step,
      steps = props.steps,
      leftInputFunc = props.leftInput,
      rightInputFunc = props.rightInput,
      _props$showInputs = props.showInputs,
      showInputs = _props$showInputs === void 0 ? false : _props$showInputs,
      tick = props.tick,
      fillClassName = props.fillClassName,
      handleClassName = props.handleClassName,
      handleActiveClassName = props.handleActiveClassName,
      trackClassName = props.trackClassName,
      inputClassName = props.inputClassName,
      stylesProp = props.styles,
      _props$disableDefault = props.disableDefaultStyles,
      disableDefaultStyles = _props$disableDefault === void 0 ? false : _props$disableDefault,
      rest = _objectWithoutPropertiesLoose(props, ["language", "format", "currency", "fixedPoint", "onChange", "onInput", "min", "max", "value", "step", "steps", "leftInput", "rightInput", "showInputs", "tick", "fillClassName", "handleClassName", "handleActiveClassName", "trackClassName", "inputClassName", "styles", "disableDefaultStyles"]);

  var leftRef = useRef(null);
  var rightRef = useRef(null);
  var trackRef = useRef(null);

  var formatLabel = function formatLabel(input) {
    if (format === 'price') {
      var formatted = formatNumber(input, {
        style: 'currency',
        currency: currency
      });
      return fixedPoint ? formatted : formatted.replace('.00', '');
    }

    return fixedPoint ? Number(input).toFixed(getDecimalPlaces(step)) : input.toLocaleString(language);
  };

  var formatInputValue = function formatInputValue(input) {
    return fixedPoint ? Number(input).toFixed(getDecimalPlaces(step)) : input;
  };

  var mapRange = function mapRange(value) {
    return isArray(value) ? value.map(function (v) {
      return roundToStep(clamp(Number(v), min, max), step);
    }) : roundToStep(clamp(Number(value), min, max), step);
  };

  var mapRangeInput = function mapRangeInput(value) {
    return (isArray(value) ? value : [value]).map(String).map(formatInputValue);
  };

  var _props$ticks = props.ticks,
      ticksProp = _props$ticks === void 0 ? !tick ? [min, max] : undefined : _props$ticks;

  var _React$useState = useState(mapRangeInput(valueProp)),
      inputValues = _React$useState[0],
      setInputValues = _React$useState[1];

  var _React$useState2 = useState(mapRange(valueProp)),
      range = _React$useState2[0],
      setRange = _React$useState2[1];

  var values = useMemo(function () {
    return mapRange(range);
  }, [range]);

  var _ref = isArray(values) ? values : [values],
      low = _ref[0],
      high = _ref[1];

  var mapSetRange = function mapSetRange(newValue, fireOnChange) {
    if (fireOnChange === void 0) {
      fireOnChange = false;
    }

    var newRange = mapRange(newValue);
    setRange(newRange);
    onInput(newRange);

    if (fireOnChange) {
      onChange(newRange);
    }
  };

  useEffect(function () {
    return setRange(mapRange(valueProp));
  }, [valueProp]);
  useEffect(function () {
    return setInputValues(mapRangeInput(range));
  }, [range]);

  var _useRanger = useRanger({
    stepSize: step,
    steps: steps,
    min: min,
    max: max,
    values: isArray(values) ? values : [values],
    tickSize: tick,
    ticks: ticksProp,
    onDrag: function onDrag(val) {
      return mapSetRange(val.length === 1 ? val[0] : val);
    },
    onChange: function onChange(val) {
      return mapSetRange(val.length === 1 ? val[0] : val, true);
    }
  }),
      getTrackProps = _useRanger.getTrackProps,
      handles = _useRanger.handles,
      ticks = _useRanger.ticks,
      segments = _useRanger.segments;

  var handleRangeInputChange = function handleRangeInputChange(left, v) {
    var val = isString(v) ? Number(v) : v;
    var newValue;

    if (isNullOrUndefined(high)) {
      newValue = [val < min ? min : val];
    } else if (left) {
      newValue = [val < min ? min : val, high];
    } else {
      newValue = [low, val > max ? max : val];
    }

    mapSetRange(newValue, true);
  };

  var handleSwitchRange = function handleSwitchRange() {
    if (isNullOrUndefined(high)) {
      return;
    }

    if (low > high) {
      mapSetRange([high, low], true);
    }
  };

  var handleSegmentClick = function handleSegmentClick(event, i) {
    if ((trackRef == null ? void 0 : trackRef.current) === null) {
      return;
    }

    var clientRect = trackRef.current.getBoundingClientRect();
    var percent = clamp(100 / clientRect.width * (event.clientX - clientRect.left), 0, 100);
    var newValue = roundToStep((max - min) * (percent / 100), step);

    if (i === 1 && !isNullOrUndefined(high)) {
      var _closest = closest(newValue, [low, high]),
          index = _closest[0];

      handleRangeInputChange(index === 0, newValue);
    } else {
      handleRangeInputChange(i === 0, newValue);
    }
  };

  var handleInputChange = function handleInputChange(left) {
    return function (value) {
      var l = inputValues[0],
          r = inputValues[1];

      if (left && !isNullOrUndefined(r)) {
        setInputValues([value, r]);
      } else if (!isNullOrUndefined(r)) {
        setInputValues([l, value]);
      } else {
        setInputValues([value]);
      }
    };
  };

  var handleInputKeyDown = function handleInputKeyDown(left) {
    return function (event) {
      var target = event.target;

      if (event.key === 'Enter') {
        handleRangeInputChange(left, target.value);
      }
    };
  };

  var inputProps = {
    min: min,
    max: max,
    step: step,
    type: 'number',
    inputMode: 'numeric',
    disableDefaultStyles: disableDefaultStyles,
    onBlur: handleSwitchRange
  };

  var leftInputProps = _extends({}, inputProps, {
    className: inputClassName,
    value: inputValues[0],
    onChange: handleInputChange(true),
    onKeyDown: handleInputKeyDown(true),
    label: 'Range input left bound'
  });

  var rightInputProps = _extends({}, inputProps, {
    className: inputClassName,
    value: inputValues[1],
    onChange: handleInputChange(false),
    onKeyDown: handleInputKeyDown(false),
    label: 'Range input right bound'
  });

  var leftInput = leftInputFunc ? leftInputFunc({
    getProps: function getProps(override) {
      if (override === void 0) {
        override = {};
      }

      return _extends({}, useTextField(_extends({}, leftInputProps, override), leftRef), {
        ref: leftRef
      });
    }
  }) : jsx(Input, _extends({}, leftInputProps));

  var rightInput = jsx(Input, _extends({}, rightInputProps));

  if (isNullOrUndefined(high)) {
    rightInput = null;
  } else if (rightInputFunc) {
    rightInput = rightInputFunc({
      getProps: function getProps(override) {
        if (override === void 0) {
          override = {};
        }

        return _extends({}, useTextField(_extends({}, rightInputProps, override), rightRef), {
          ref: rightRef
        });
      }
    });
  }

  var styles = getStylesObject(useRangeInputStyles({
    isSingleHandle: isNullOrUndefined(high)
  }), disableDefaultStyles);
  return jsxs(Box, _extends({
    css: /*#__PURE__*/_css([styles.container, stylesProp], ";label:RangeInput;" + (process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUErSmlCIiwiZmlsZSI6ImluZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVRleHRGaWVsZCB9IGZyb20gJ0ByZWFjdC1hcmlhL3RleHRmaWVsZCc7XHJcbmltcG9ydCB7IF9fREVWX18sIGNsYW1wLCBjbG9zZXN0LCBmb3JtYXROdW1iZXIsIGdldERlY2ltYWxQbGFjZXMsIGdldFN0eWxlc09iamVjdCwgaXNBcnJheSwgaXNOdWxsT3JVbmRlZmluZWQsIGlzU3RyaW5nLCBub29wLCByb3VuZFRvU3RlcCwgfSBmcm9tICdAc2FqYXJpL3JlYWN0LXNkay11dGlscyc7XHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlUmFuZ2VyIH0gZnJvbSAncmVhY3QtcmFuZ2VyJztcclxuaW1wb3J0IEJveCBmcm9tICcuLi9Cb3gnO1xyXG5pbXBvcnQgVGV4dCBmcm9tICcuLi9UZXh0JztcclxuaW1wb3J0IEZpbGwgZnJvbSAnLi9jb21wb25lbnRzL0ZpbGwnO1xyXG5pbXBvcnQgSGFuZGxlIGZyb20gJy4vY29tcG9uZW50cy9IYW5kbGUnO1xyXG5pbXBvcnQgSW5wdXQgZnJvbSAnLi9jb21wb25lbnRzL0lucHV0JztcclxuaW1wb3J0IFRyYWNrIGZyb20gJy4vY29tcG9uZW50cy9UcmFjayc7XHJcbmltcG9ydCB1c2VSYW5nZUlucHV0U3R5bGVzIGZyb20gJy4vc3R5bGVzJztcclxuZnVuY3Rpb24gUmFuZ2VJbnB1dChwcm9wcykge1xyXG4gICAgY29uc3QgeyBsYW5ndWFnZSwgZm9ybWF0ID0gJ2RlZmF1bHQnLCBjdXJyZW5jeSA9ICdVU0QnLCBmaXhlZFBvaW50ID0gZmFsc2UsIG9uQ2hhbmdlID0gbm9vcCwgb25JbnB1dCA9IG5vb3AsIG1pbiA9IDAsIG1heCA9IDEwMCwgdmFsdWU6IHZhbHVlUHJvcCA9IFttaW4sIG1heF0sIHN0ZXAgPSAxLCBzdGVwcywgbGVmdElucHV0OiBsZWZ0SW5wdXRGdW5jLCByaWdodElucHV0OiByaWdodElucHV0RnVuYywgc2hvd0lucHV0cyA9IGZhbHNlLCB0aWNrLCBmaWxsQ2xhc3NOYW1lLCBoYW5kbGVDbGFzc05hbWUsIGhhbmRsZUFjdGl2ZUNsYXNzTmFtZSwgdHJhY2tDbGFzc05hbWUsIGlucHV0Q2xhc3NOYW1lLCBzdHlsZXM6IHN0eWxlc1Byb3AsIGRpc2FibGVEZWZhdWx0U3R5bGVzID0gZmFsc2UsIC4uLnJlc3QgfSA9IHByb3BzO1xyXG4gICAgY29uc3QgbGVmdFJlZiA9IFJlYWN0LnVzZVJlZihudWxsKTtcclxuICAgIGNvbnN0IHJpZ2h0UmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xyXG4gICAgY29uc3QgdHJhY2tSZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XHJcbiAgICBjb25zdCBmb3JtYXRMYWJlbCA9IChpbnB1dCkgPT4ge1xyXG4gICAgICAgIGlmIChmb3JtYXQgPT09ICdwcmljZScpIHtcclxuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkID0gZm9ybWF0TnVtYmVyKGlucHV0LCB7IHN0eWxlOiAnY3VycmVuY3knLCBjdXJyZW5jeSB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZpeGVkUG9pbnQgPyBmb3JtYXR0ZWQgOiBmb3JtYXR0ZWQucmVwbGFjZSgnLjAwJywgJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZml4ZWRQb2ludCA/IE51bWJlcihpbnB1dCkudG9GaXhlZChnZXREZWNpbWFsUGxhY2VzKHN0ZXApKSA6IGlucHV0LnRvTG9jYWxlU3RyaW5nKGxhbmd1YWdlKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBmb3JtYXRJbnB1dFZhbHVlID0gKGlucHV0KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGZpeGVkUG9pbnQgPyBOdW1iZXIoaW5wdXQpLnRvRml4ZWQoZ2V0RGVjaW1hbFBsYWNlcyhzdGVwKSkgOiBpbnB1dDtcclxuICAgIH07XHJcbiAgICBjb25zdCBtYXBSYW5nZSA9ICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBpc0FycmF5KHZhbHVlKVxyXG4gICAgICAgICAgICA/IHZhbHVlLm1hcCgodikgPT4gcm91bmRUb1N0ZXAoY2xhbXAoTnVtYmVyKHYpLCBtaW4sIG1heCksIHN0ZXApKVxyXG4gICAgICAgICAgICA6IHJvdW5kVG9TdGVwKGNsYW1wKE51bWJlcih2YWx1ZSksIG1pbiwgbWF4KSwgc3RlcCk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgbWFwUmFuZ2VJbnB1dCA9ICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgIHJldHVybiAoaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV0pLm1hcChTdHJpbmcpLm1hcChmb3JtYXRJbnB1dFZhbHVlKTtcclxuICAgIH07XHJcbiAgICBjb25zdCB7IHRpY2tzOiB0aWNrc1Byb3AgPSAhdGljayA/IFttaW4sIG1heF0gOiB1bmRlZmluZWQgfSA9IHByb3BzO1xyXG4gICAgY29uc3QgW2lucHV0VmFsdWVzLCBzZXRJbnB1dFZhbHVlc10gPSBSZWFjdC51c2VTdGF0ZShtYXBSYW5nZUlucHV0KHZhbHVlUHJvcCkpO1xyXG4gICAgY29uc3QgW3JhbmdlLCBzZXRSYW5nZV0gPSBSZWFjdC51c2VTdGF0ZShtYXBSYW5nZSh2YWx1ZVByb3ApKTtcclxuICAgIGNvbnN0IHZhbHVlcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gbWFwUmFuZ2UocmFuZ2UpLCBbcmFuZ2VdKTtcclxuICAgIGNvbnN0IFtsb3csIGhpZ2hdID0gaXNBcnJheSh2YWx1ZXMpID8gdmFsdWVzIDogW3ZhbHVlc107XHJcbiAgICBjb25zdCBtYXBTZXRSYW5nZSA9IChuZXdWYWx1ZSwgZmlyZU9uQ2hhbmdlID0gZmFsc2UpID0+IHtcclxuICAgICAgICBjb25zdCBuZXdSYW5nZSA9IG1hcFJhbmdlKG5ld1ZhbHVlKTtcclxuICAgICAgICBzZXRSYW5nZShuZXdSYW5nZSk7XHJcbiAgICAgICAgb25JbnB1dChuZXdSYW5nZSk7XHJcbiAgICAgICAgaWYgKGZpcmVPbkNoYW5nZSkge1xyXG4gICAgICAgICAgICBvbkNoYW5nZShuZXdSYW5nZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiBzZXRSYW5nZShtYXBSYW5nZSh2YWx1ZVByb3ApKSwgW3ZhbHVlUHJvcF0pO1xyXG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHNldElucHV0VmFsdWVzKG1hcFJhbmdlSW5wdXQocmFuZ2UpKSwgW3JhbmdlXSk7XHJcbiAgICBjb25zdCB7IGdldFRyYWNrUHJvcHMsIGhhbmRsZXMsIHRpY2tzLCBzZWdtZW50cyB9ID0gdXNlUmFuZ2VyKHtcclxuICAgICAgICBzdGVwU2l6ZTogc3RlcCxcclxuICAgICAgICBzdGVwcyxcclxuICAgICAgICBtaW4sXHJcbiAgICAgICAgbWF4LFxyXG4gICAgICAgIHZhbHVlczogaXNBcnJheSh2YWx1ZXMpID8gdmFsdWVzIDogW3ZhbHVlc10sXHJcbiAgICAgICAgdGlja1NpemU6IHRpY2ssXHJcbiAgICAgICAgdGlja3M6IHRpY2tzUHJvcCxcclxuICAgICAgICBvbkRyYWc6ICh2YWwpID0+IG1hcFNldFJhbmdlKHZhbC5sZW5ndGggPT09IDEgPyB2YWxbMF0gOiB2YWwpLFxyXG4gICAgICAgIG9uQ2hhbmdlOiAodmFsKSA9PiBtYXBTZXRSYW5nZSh2YWwubGVuZ3RoID09PSAxID8gdmFsWzBdIDogdmFsLCB0cnVlKSxcclxuICAgIH0pO1xyXG4gICAgY29uc3QgaGFuZGxlUmFuZ2VJbnB1dENoYW5nZSA9IChsZWZ0LCB2KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsID0gaXNTdHJpbmcodikgPyBOdW1iZXIodikgOiB2O1xyXG4gICAgICAgIGxldCBuZXdWYWx1ZTtcclxuICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoaGlnaCkpIHtcclxuICAgICAgICAgICAgbmV3VmFsdWUgPSBbdmFsIDwgbWluID8gbWluIDogdmFsXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobGVmdCkge1xyXG4gICAgICAgICAgICBuZXdWYWx1ZSA9IFt2YWwgPCBtaW4gPyBtaW4gOiB2YWwsIGhpZ2hdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbmV3VmFsdWUgPSBbbG93LCB2YWwgPiBtYXggPyBtYXggOiB2YWxdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtYXBTZXRSYW5nZShuZXdWYWx1ZSwgdHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgaGFuZGxlU3dpdGNoUmFuZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKGhpZ2gpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxvdyA+IGhpZ2gpIHtcclxuICAgICAgICAgICAgbWFwU2V0UmFuZ2UoW2hpZ2gsIGxvd10sIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCBoYW5kbGVTZWdtZW50Q2xpY2sgPSAoZXZlbnQsIGkpID0+IHtcclxuICAgICAgICBpZiAodHJhY2tSZWY/LmN1cnJlbnQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjbGllbnRSZWN0ID0gdHJhY2tSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBjb25zdCBwZXJjZW50ID0gY2xhbXAoKDEwMCAvIGNsaWVudFJlY3Qud2lkdGgpICogKGV2ZW50LmNsaWVudFggLSBjbGllbnRSZWN0LmxlZnQpLCAwLCAxMDApO1xyXG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gcm91bmRUb1N0ZXAoKG1heCAtIG1pbikgKiAocGVyY2VudCAvIDEwMCksIHN0ZXApO1xyXG4gICAgICAgIGlmIChpID09PSAxICYmICFpc051bGxPclVuZGVmaW5lZChoaWdoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBbaW5kZXhdID0gY2xvc2VzdChuZXdWYWx1ZSwgW2xvdywgaGlnaF0pO1xyXG4gICAgICAgICAgICBoYW5kbGVSYW5nZUlucHV0Q2hhbmdlKGluZGV4ID09PSAwLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBoYW5kbGVSYW5nZUlucHV0Q2hhbmdlKGkgPT09IDAsIG5ld1ZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgaGFuZGxlSW5wdXRDaGFuZ2UgPSAobGVmdCkgPT4gKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgW2wsIHJdID0gaW5wdXRWYWx1ZXM7XHJcbiAgICAgICAgaWYgKGxlZnQgJiYgIWlzTnVsbE9yVW5kZWZpbmVkKHIpKSB7XHJcbiAgICAgICAgICAgIHNldElucHV0VmFsdWVzKFt2YWx1ZSwgcl0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghaXNOdWxsT3JVbmRlZmluZWQocikpIHtcclxuICAgICAgICAgICAgc2V0SW5wdXRWYWx1ZXMoW2wsIHZhbHVlXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzZXRJbnB1dFZhbHVlcyhbdmFsdWVdKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgaGFuZGxlSW5wdXRLZXlEb3duID0gKGxlZnQpID0+IChldmVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZVJhbmdlSW5wdXRDaGFuZ2UobGVmdCwgdGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgaW5wdXRQcm9wcyA9IHtcclxuICAgICAgICBtaW4sXHJcbiAgICAgICAgbWF4LFxyXG4gICAgICAgIHN0ZXAsXHJcbiAgICAgICAgdHlwZTogJ251bWJlcicsXHJcbiAgICAgICAgaW5wdXRNb2RlOiAnbnVtZXJpYycsXHJcbiAgICAgICAgZGlzYWJsZURlZmF1bHRTdHlsZXMsXHJcbiAgICAgICAgb25CbHVyOiBoYW5kbGVTd2l0Y2hSYW5nZSxcclxuICAgIH07XHJcbiAgICBjb25zdCBsZWZ0SW5wdXRQcm9wcyA9IHtcclxuICAgICAgICAuLi5pbnB1dFByb3BzLFxyXG4gICAgICAgIGNsYXNzTmFtZTogaW5wdXRDbGFzc05hbWUsXHJcbiAgICAgICAgdmFsdWU6IGlucHV0VmFsdWVzWzBdLFxyXG4gICAgICAgIG9uQ2hhbmdlOiBoYW5kbGVJbnB1dENoYW5nZSh0cnVlKSxcclxuICAgICAgICBvbktleURvd246IGhhbmRsZUlucHV0S2V5RG93bih0cnVlKSxcclxuICAgICAgICBsYWJlbDogJ1JhbmdlIGlucHV0IGxlZnQgYm91bmQnLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJpZ2h0SW5wdXRQcm9wcyA9IHtcclxuICAgICAgICAuLi5pbnB1dFByb3BzLFxyXG4gICAgICAgIGNsYXNzTmFtZTogaW5wdXRDbGFzc05hbWUsXHJcbiAgICAgICAgdmFsdWU6IGlucHV0VmFsdWVzWzFdLFxyXG4gICAgICAgIG9uQ2hhbmdlOiBoYW5kbGVJbnB1dENoYW5nZShmYWxzZSksXHJcbiAgICAgICAgb25LZXlEb3duOiBoYW5kbGVJbnB1dEtleURvd24oZmFsc2UpLFxyXG4gICAgICAgIGxhYmVsOiAnUmFuZ2UgaW5wdXQgcmlnaHQgYm91bmQnLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IGxlZnRJbnB1dCA9IGxlZnRJbnB1dEZ1bmMgPyAobGVmdElucHV0RnVuYyh7XHJcbiAgICAgICAgZ2V0UHJvcHM6IChvdmVycmlkZSA9IHt9KSA9PiAoe1xyXG4gICAgICAgICAgICAuLi51c2VUZXh0RmllbGQoeyAuLi5sZWZ0SW5wdXRQcm9wcywgLi4ub3ZlcnJpZGUgfSwgbGVmdFJlZiksXHJcbiAgICAgICAgICAgIHJlZjogbGVmdFJlZixcclxuICAgICAgICB9KSxcclxuICAgIH0pKSA6ICg8SW5wdXQgey4uLmxlZnRJbnB1dFByb3BzfS8+KTtcclxuICAgIGxldCByaWdodElucHV0ID0gPElucHV0IHsuLi5yaWdodElucHV0UHJvcHN9Lz47XHJcbiAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoaGlnaCkpIHtcclxuICAgICAgICByaWdodElucHV0ID0gbnVsbDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHJpZ2h0SW5wdXRGdW5jKSB7XHJcbiAgICAgICAgcmlnaHRJbnB1dCA9IHJpZ2h0SW5wdXRGdW5jKHtcclxuICAgICAgICAgICAgZ2V0UHJvcHM6IChvdmVycmlkZSA9IHt9KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4udXNlVGV4dEZpZWxkKHsgLi4ucmlnaHRJbnB1dFByb3BzLCAuLi5vdmVycmlkZSB9LCByaWdodFJlZiksXHJcbiAgICAgICAgICAgICAgICByZWY6IHJpZ2h0UmVmLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IHN0eWxlcyA9IGdldFN0eWxlc09iamVjdCh1c2VSYW5nZUlucHV0U3R5bGVzKHsgaXNTaW5nbGVIYW5kbGU6IGlzTnVsbE9yVW5kZWZpbmVkKGhpZ2gpIH0pLCBkaXNhYmxlRGVmYXVsdFN0eWxlcyk7XHJcbiAgICByZXR1cm4gKDxCb3ggY3NzPXtbc3R5bGVzLmNvbnRhaW5lciwgc3R5bGVzUHJvcF19IHsuLi5yZXN0fT5cbiAgICAgIDxCb3ggY3NzPXtzdHlsZXMud3JhcHBlcn0+XG4gICAgICAgIDxCb3ggY3NzPXtzdHlsZXMudGlja3N9PlxuICAgICAgICAgIHt0aWNrcy5tYXAoKHsgdmFsdWU6IHRpY2tWYWx1ZSwgZ2V0VGlja1Byb3BzIH0pID0+IHtcclxuICAgICAgICBjb25zdCB7IHN0eWxlLCAuLi50aWNrUHJvcHMgfSA9IGdldFRpY2tQcm9wcygpO1xyXG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIC4uLnRpY2tTdHlsZXMgfSA9IHN0eWxlO1xyXG4gICAgICAgIHJldHVybiAoPFRleHQgey4uLnRpY2tQcm9wc30gc3R5bGU9e3sgLi4udGlja1N0eWxlcyB9fSBjc3M9e3N0eWxlcy50aWNrSXRlbX0gZGlzYWJsZURlZmF1bHRTdHlsZXM9e2Rpc2FibGVEZWZhdWx0U3R5bGVzfT5cbiAgICAgICAgICAgICAgICB7Zm9ybWF0TGFiZWwodGlja1ZhbHVlKX1cbiAgICAgICAgICAgICAgPC9UZXh0Pik7XHJcbiAgICB9KX1cbiAgICAgICAgPC9Cb3g+XG5cbiAgICAgICAgPFRyYWNrIHsuLi5nZXRUcmFja1Byb3BzKHsgcmVmOiB0cmFja1JlZiB9KX0gY2xhc3NOYW1lPXt0cmFja0NsYXNzTmFtZX0gZGlzYWJsZURlZmF1bHRTdHlsZXM9e2Rpc2FibGVEZWZhdWx0U3R5bGVzfT5cbiAgICAgICAgICB7c2VnbWVudHMubWFwKCh7IGdldFNlZ21lbnRQcm9wcyB9LCBpKSA9PiAoPEZpbGwgaXNTaW5nbGVIYW5kbGU9e2lzTnVsbE9yVW5kZWZpbmVkKGhpZ2gpfSBkaXNhYmxlRGVmYXVsdFN0eWxlcz17ZGlzYWJsZURlZmF1bHRTdHlsZXN9IGNsYXNzTmFtZT17ZmlsbENsYXNzTmFtZX0gey4uLmdldFNlZ21lbnRQcm9wcyh7XHJcbiAgICAgICAgaW5kZXg6IGksXHJcbiAgICAgICAgb25DbGljazogKGUpID0+IGhhbmRsZVNlZ21lbnRDbGljayhlLCBpKSxcclxuICAgIH0pfS8+KSl9XG5cbiAgICAgICAgICB7aGFuZGxlcy5tYXAoKHsgdmFsdWU6IGhhbmRsZVZhbHVlLCBhY3RpdmUsIGdldEhhbmRsZVByb3BzIH0pID0+ICg8SGFuZGxlIGRhdGEtdmFsdWU9e2Zvcm1hdExhYmVsKGhhbmRsZVZhbHVlKX0gYWN0aXZlQ2xhc3NOYW1lPXtoYW5kbGVBY3RpdmVDbGFzc05hbWV9IGNsYXNzTmFtZT17aGFuZGxlQ2xhc3NOYW1lfSBkaXNhYmxlRGVmYXVsdFN0eWxlcz17ZGlzYWJsZURlZmF1bHRTdHlsZXN9IHsuLi5nZXRIYW5kbGVQcm9wcyh7IGFjdGl2ZSB9KX0vPikpfVxuICAgICAgICA8L1RyYWNrPlxuICAgICAgPC9Cb3g+XG5cbiAgICAgIHtzaG93SW5wdXRzICYmICg8Qm94IGNzcz17c3R5bGVzLmlucHV0fT5cbiAgICAgICAgICB7bGVmdElucHV0fVxuICAgICAgICAgIHtyaWdodElucHV0fVxuICAgICAgICA8L0JveD4pfVxuICAgIDwvQm94Pik7XHJcbn1cclxuaWYgKF9fREVWX18pIHtcclxuICAgIFJhbmdlSW5wdXQuZGlzcGxheU5hbWUgPSAnUmFuZ2VJbnB1dCc7XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgUmFuZ2VJbnB1dDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanN4Lm1hcCJdfQ== */"))
  }, rest, {
    children: [jsxs(Box, {
      css: styles.wrapper,
      children: [jsx(Box, {
        css: styles.ticks,
        children: ticks.map(function (_ref2) {
          var tickValue = _ref2.value,
              getTickProps = _ref2.getTickProps;

          var _getTickProps = getTickProps(),
              style = _getTickProps.style,
              tickProps = _objectWithoutPropertiesLoose(_getTickProps, ["style"]);

          var tickStyles = _objectWithoutPropertiesLoose(style, ["width"]);

          return jsx(Text, _extends({}, tickProps, {
            style: _extends({}, tickStyles),
            css: styles.tickItem,
            disableDefaultStyles: disableDefaultStyles,
            children: formatLabel(tickValue)
          }));
        })
      }), jsxs(Track, _extends({}, getTrackProps({
        ref: trackRef
      }), {
        className: trackClassName,
        disableDefaultStyles: disableDefaultStyles,
        children: [segments.map(function (_ref3, i) {
          var getSegmentProps = _ref3.getSegmentProps;
          return jsx(Fill, _extends({
            isSingleHandle: isNullOrUndefined(high),
            disableDefaultStyles: disableDefaultStyles,
            className: fillClassName
          }, getSegmentProps({
            index: i,
            onClick: function onClick(e) {
              return handleSegmentClick(e, i);
            }
          })));
        }), handles.map(function (_ref4) {
          var handleValue = _ref4.value,
              active = _ref4.active,
              getHandleProps = _ref4.getHandleProps;
          return jsx(Handle, _extends({
            "data-value": formatLabel(handleValue),
            activeClassName: handleActiveClassName,
            className: handleClassName,
            disableDefaultStyles: disableDefaultStyles
          }, getHandleProps({
            active: active
          })));
        })]
      }))]
    }), showInputs && jsxs(Box, {
      css: styles.input,
      children: [leftInput, rightInput]
    })]
  }));
}

if (__DEV__) {
  RangeInput.displayName = 'RangeInput';
}

export default RangeInput;
//# sourceMappingURL=index.esm.js.map
