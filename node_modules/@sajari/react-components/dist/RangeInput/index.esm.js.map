{"version":3,"file":"index.esm.js","sources":["../../src/RangeInput/index.tsx"],"sourcesContent":["import { AriaTextFieldOptions, useTextField } from '@react-aria/textfield';\nimport {\n  __DEV__,\n  clamp,\n  closest,\n  formatNumber,\n  getDecimalPlaces,\n  getStylesObject,\n  isArray,\n  isNullOrUndefined,\n  isString,\n  noop,\n  roundToStep,\n} from '@sajari/react-sdk-utils';\nimport * as React from 'react';\nimport { useRanger } from 'react-ranger';\n\nimport Box from '../Box';\nimport Text from '../Text';\nimport Fill from './components/Fill';\nimport Handle from './components/Handle';\nimport Input from './components/Input';\nimport Track from './components/Track';\nimport useRangeInputStyles from './styles';\nimport { RangeInputProps, RangeInputValue, RangeValue } from './types';\n\nfunction RangeInput<T extends RangeValue>(props: RangeInputProps<T>) {\n  const {\n    language,\n    format = 'default',\n    currency = 'USD',\n    fixedPoint = false,\n    onChange = noop,\n    onInput = noop,\n    min = 0,\n    max = 100,\n    value: valueProp = [min, max],\n    step = 1,\n    steps,\n    leftInput: leftInputFunc,\n    rightInput: rightInputFunc,\n    showInputs = false,\n    tick,\n    fillClassName,\n    handleClassName,\n    handleActiveClassName,\n    trackClassName,\n    inputClassName,\n    styles: stylesProp,\n    disableDefaultStyles = false,\n    ...rest\n  } = props;\n\n  const leftRef = React.useRef<HTMLInputElement>(null);\n  const rightRef = React.useRef<HTMLInputElement>(null);\n  const trackRef = React.useRef<HTMLDivElement>(null);\n\n  // Format a value to be presented in the UI as a label\n  const formatLabel = (input: number) => {\n    if (format === 'price') {\n      const formatted = formatNumber(input, { style: 'currency', currency });\n      return fixedPoint ? formatted : formatted.replace('.00', '');\n    }\n\n    return fixedPoint ? Number(input).toFixed(getDecimalPlaces(step)) : input.toLocaleString(language);\n  };\n\n  // Format a value for the input\n  const formatInputValue = (input: string) => {\n    return fixedPoint ? Number(input).toFixed(getDecimalPlaces(step)) : input;\n  };\n\n  // Map RangeValue to the closest step and clamp values\n  const mapRange = (value: RangeValue): RangeValue => {\n    return isArray(value)\n      ? (value.map((v) => roundToStep(clamp(Number(v), min, max), step)) as RangeValue)\n      : roundToStep(clamp(Number(value), min, max), step);\n  };\n\n  // Map RangeValue to RangeInputValue\n  const mapRangeInput = (value: RangeValue): RangeInputValue => {\n    return (isArray(value) ? value : [value]).map(String).map(formatInputValue) as RangeInputValue;\n  };\n\n  const { ticks: ticksProp = !tick ? [min, max] : undefined } = props;\n  const [inputValues, setInputValues] = React.useState<RangeInputValue>(mapRangeInput(valueProp));\n  const [range, setRange] = React.useState<RangeValue>(mapRange(valueProp));\n  const values = React.useMemo(() => mapRange(range), [range]);\n  const [low, high] = isArray(values) ? values : [values];\n\n  // Map and set a range\n  const mapSetRange = (newValue: RangeValue, fireOnChange = false) => {\n    const newRange = mapRange(newValue);\n\n    setRange(newRange);\n\n    onInput(newRange as T);\n\n    if (fireOnChange) {\n      onChange(newRange as T);\n    }\n  };\n\n  // Set internal values when prop changes\n  React.useEffect(() => setRange(mapRange(valueProp)), [valueProp]);\n\n  // Set input values when the range changes\n  React.useEffect(() => setInputValues(mapRangeInput(range)), [range]);\n\n  const { getTrackProps, handles, ticks, segments } = useRanger({\n    stepSize: step,\n    steps,\n    min,\n    max,\n    values: isArray(values) ? values : [values],\n    tickSize: tick,\n    ticks: ticksProp,\n    onDrag: (val: number[]) => mapSetRange(val.length === 1 ? val[0] : (val as RangeValue)),\n    onChange: (val: number[]) => mapSetRange(val.length === 1 ? val[0] : (val as RangeValue), true),\n  });\n\n  const handleRangeInputChange = (left: boolean, v: string | number) => {\n    const val = isString(v) ? Number(v) : v;\n    let newValue: Array<number>;\n\n    if (isNullOrUndefined(high)) {\n      newValue = [val < min ? min : val];\n    } else if (left) {\n      newValue = [val < min ? min : val, high];\n    } else {\n      newValue = [low, val > max ? max : val];\n    }\n\n    mapSetRange(newValue as RangeValue, true);\n  };\n\n  const handleSwitchRange = () => {\n    if (isNullOrUndefined(high)) {\n      return;\n    }\n\n    if (low > high) {\n      mapSetRange([high, low], true);\n    }\n  };\n\n  const handleSegmentClick = (event: React.MouseEvent<HTMLDivElement>, i: number) => {\n    if (trackRef?.current === null) {\n      return;\n    }\n\n    // Calculate percentage\n    const clientRect = trackRef.current.getBoundingClientRect();\n    const percent = clamp((100 / clientRect.width) * (event.clientX - clientRect.left), 0, 100);\n    const newValue = roundToStep((max - min) * (percent / 100), step);\n\n    if (i === 1 && !isNullOrUndefined(high)) {\n      // Determine closest handle if clicking in center section\n      const [index] = closest(newValue, [low, high]);\n      handleRangeInputChange(index === 0, newValue);\n    } else {\n      handleRangeInputChange(i === 0, newValue);\n    }\n  };\n\n  const handleInputChange = (left: boolean) => (value: string) => {\n    const [l, r] = inputValues;\n\n    if (left && !isNullOrUndefined(r)) {\n      setInputValues([value, r]);\n    } else if (!isNullOrUndefined(r)) {\n      setInputValues([l, value]);\n    } else {\n      setInputValues([value]);\n    }\n  };\n\n  const handleInputKeyDown = (left: boolean) => (event: React.KeyboardEvent<HTMLInputElement>) => {\n    const target = event.target as HTMLInputElement;\n\n    if (event.key === 'Enter') {\n      handleRangeInputChange(left, target.value);\n    }\n  };\n\n  const inputProps = {\n    min,\n    max,\n    step,\n    type: 'number',\n    inputMode: 'numeric' as AriaTextFieldOptions['inputMode'],\n    disableDefaultStyles,\n    onBlur: handleSwitchRange,\n  };\n\n  const leftInputProps = {\n    ...inputProps,\n    className: inputClassName,\n    value: inputValues[0],\n    onChange: handleInputChange(true),\n    onKeyDown: handleInputKeyDown(true),\n    label: 'Range input left bound',\n  };\n\n  const rightInputProps = {\n    ...inputProps,\n    className: inputClassName,\n    value: inputValues[1],\n    onChange: handleInputChange(false),\n    onKeyDown: handleInputKeyDown(false),\n    label: 'Range input right bound',\n  };\n\n  const leftInput = leftInputFunc ? (\n    leftInputFunc({\n      getProps: (override = {}) => ({\n        ...useTextField({ ...leftInputProps, ...override }, leftRef),\n        ref: leftRef,\n      }),\n    })\n  ) : (\n    <Input {...leftInputProps} />\n  );\n\n  let rightInput: React.ReactNode | null = <Input {...rightInputProps} />;\n\n  if (isNullOrUndefined(high)) {\n    rightInput = null;\n  } else if (rightInputFunc) {\n    rightInput = rightInputFunc({\n      getProps: (override = {}) => ({\n        ...useTextField({ ...rightInputProps, ...override }, rightRef),\n        ref: rightRef,\n      }),\n    });\n  }\n\n  const styles = getStylesObject(\n    useRangeInputStyles({ isSingleHandle: isNullOrUndefined(high) }),\n    disableDefaultStyles,\n  );\n\n  return (\n    <Box css={[styles.container, stylesProp]} {...rest}>\n      <Box css={styles.wrapper}>\n        <Box css={styles.ticks}>\n          {ticks.map(({ value: tickValue, getTickProps }) => {\n            // Remove width from the styles to prevent needing !important in our styles\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            const { style, ...tickProps } = getTickProps();\n            const { width, ...tickStyles } = style as React.CSSProperties;\n\n            return (\n              <Text\n                {...tickProps}\n                style={{ ...tickStyles }}\n                css={styles.tickItem}\n                disableDefaultStyles={disableDefaultStyles}\n              >\n                {formatLabel(tickValue)}\n              </Text>\n            );\n          })}\n        </Box>\n\n        <Track\n          {...getTrackProps({ ref: trackRef })}\n          className={trackClassName}\n          disableDefaultStyles={disableDefaultStyles}\n        >\n          {segments.map(({ getSegmentProps }, i: number) => (\n            <Fill\n              isSingleHandle={isNullOrUndefined(high)}\n              disableDefaultStyles={disableDefaultStyles}\n              className={fillClassName}\n              {...getSegmentProps({\n                index: i,\n                onClick: (e: React.MouseEvent<HTMLDivElement>) => handleSegmentClick(e, i),\n              })}\n            />\n          ))}\n\n          {handles.map(({ value: handleValue, active, getHandleProps }) => (\n            <Handle\n              data-value={formatLabel(handleValue)}\n              activeClassName={handleActiveClassName}\n              className={handleClassName}\n              disableDefaultStyles={disableDefaultStyles}\n              {...getHandleProps({ active })}\n            />\n          ))}\n        </Track>\n      </Box>\n\n      {showInputs && (\n        <Box css={styles.input}>\n          {leftInput}\n          {rightInput}\n        </Box>\n      )}\n    </Box>\n  );\n}\n\nif (__DEV__) {\n  RangeInput.displayName = 'RangeInput';\n}\n\nexport default RangeInput;\nexport type { RangeInputProps };\n"],"names":["RangeInput","props","language","format","currency","fixedPoint","onChange","noop","onInput","min","max","value","valueProp","step","steps","leftInputFunc","leftInput","rightInputFunc","rightInput","showInputs","tick","fillClassName","handleClassName","handleActiveClassName","trackClassName","inputClassName","stylesProp","styles","disableDefaultStyles","rest","leftRef","React","rightRef","trackRef","formatLabel","input","formatted","formatNumber","style","replace","Number","toFixed","getDecimalPlaces","toLocaleString","formatInputValue","mapRange","isArray","map","v","roundToStep","clamp","mapRangeInput","String","ticks","ticksProp","undefined","inputValues","setInputValues","range","setRange","values","low","high","mapSetRange","newValue","fireOnChange","newRange","useRanger","stepSize","tickSize","onDrag","val","length","getTrackProps","handles","segments","handleRangeInputChange","left","isString","isNullOrUndefined","handleSwitchRange","handleSegmentClick","event","i","current","clientRect","getBoundingClientRect","percent","width","clientX","closest","index","handleInputChange","l","r","handleInputKeyDown","target","key","inputProps","type","inputMode","onBlur","leftInputProps","className","onKeyDown","label","rightInputProps","getProps","override","useTextField","ref","_jsx","getStylesObject","useRangeInputStyles","isSingleHandle","_jsxs","container","wrapper","tickValue","getTickProps","tickProps","tickStyles","tickItem","getSegmentProps","onClick","e","handleValue","active","getHandleProps","__DEV__","displayName"],"mappings":"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"}