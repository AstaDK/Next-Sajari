{"version":3,"file":"index.esm.js","sources":["../../../../src/Combobox/components/Dropdown/index.tsx"],"sourcesContent":["/* eslint-disable react/no-array-index-key */\nimport { getStylesObject } from '@sajari/react-sdk-utils';\nimport * as React from 'react';\n\nimport { IconDownKey, IconEnterKey, IconUpKey } from '../../../assets/icons';\nimport Box from '../../../Box';\nimport { useDropdownStyles } from '../../../hooks';\nimport PoweredBy from '../../../PoweredBy';\nimport Text from '../../../Text';\nimport { useComboboxContext } from '../../context';\nimport { ResultItem } from '../../types';\nimport DropdownItem from '../DropdownItem';\nimport DropdownResult from '../DropdownResult';\n\nconst Dropdown = () => {\n  const {\n    mode,\n    open,\n    items = [],\n    inputValue,\n    highlightedIndex,\n    getMenuProps,\n    showDropdownTips,\n    showPoweredBy,\n    renderItem,\n    itemToString,\n    getItemProps,\n    disableDefaultStyles = false,\n    customClassNames: { dropdownClassName, dropdownListClassName, dropdownFooterClassName },\n  } = useComboboxContext();\n  const shown = (mode === 'results' || mode === 'suggestions') && open && items.length > 0;\n  const styles = getStylesObject(useDropdownStyles({ shown }), disableDefaultStyles);\n  const label = mode === 'results' ? 'Results' : 'Suggestions';\n  let listRender: React.ReactNode = null;\n\n  if (renderItem) {\n    listRender = items.map((item, index) => {\n      const selected = highlightedIndex === index;\n      const stringItem = itemToString(item);\n      const highlight = inputValue.length > 0 && stringItem.startsWith(inputValue);\n\n      return (\n        <React.Fragment key={`${stringItem}-${index}`}>\n          {renderItem({ item, highlight, selected, getItemProps, index })}\n        </React.Fragment>\n      );\n    });\n  } else if (mode === 'results') {\n    listRender = (items as ResultItem[]).map((item, index) => {\n      const selected = highlightedIndex === index;\n\n      return <DropdownResult value={item} selected={selected} index={index} key={`${item.title}-${index}`} />;\n    });\n  } else {\n    listRender = (items as string[]).map((item, index) => {\n      const selected = highlightedIndex === index;\n      const stringItem = itemToString(item);\n      const highlight = inputValue.length > 0 && stringItem.startsWith(inputValue);\n\n      return (\n        <DropdownItem\n          value={item}\n          highlight={highlight}\n          selected={selected}\n          index={index}\n          key={`${stringItem}-${index}`}\n        />\n      );\n    });\n  }\n\n  return (\n    <Box css={styles.container} className={dropdownClassName}>\n      <Text as=\"h6\" css={styles.heading}>\n        {label}\n      </Text>\n\n      <ul {...getMenuProps()} css={styles.items} className={dropdownListClassName}>\n        {listRender}\n      </ul>\n\n      {(showDropdownTips || showPoweredBy) && (\n        <Box as=\"footer\" css={styles.footer} className={dropdownFooterClassName}>\n          {showDropdownTips && (\n            <Box as=\"span\" css={styles.footerItems}>\n              <Box as=\"span\" css={styles.footerItem}>\n                <IconUpKey css={styles.footerIcon} />\n                <IconDownKey css={styles.footerIcon} />\n                to navigate\n              </Box>\n\n              <Box as=\"span\" css={styles.footerItem}>\n                <IconEnterKey css={styles.footerIcon} />\n                to select\n              </Box>\n\n              <Box as=\"span\" css={styles.footerItem}>\n                <Box as=\"span\" css={styles.footerEscHint}>\n                  esc\n                </Box>\n                to dismiss\n              </Box>\n            </Box>\n          )}\n\n          {showPoweredBy && <PoweredBy css={styles.poweredBy} />}\n        </Box>\n      )}\n    </Box>\n  );\n};\n\nexport default Dropdown;\n"],"names":["Dropdown","useComboboxContext","mode","open","items","inputValue","highlightedIndex","getMenuProps","showDropdownTips","showPoweredBy","renderItem","itemToString","getItemProps","disableDefaultStyles","customClassNames","dropdownClassName","dropdownListClassName","dropdownFooterClassName","shown","length","styles","getStylesObject","useDropdownStyles","label","listRender","map","item","index","selected","stringItem","highlight","startsWith","_jsx","React.Fragment","title","_jsxs","container","heading","footer","footerItems","footerItem","footerIcon","footerEscHint","poweredBy"],"mappings":"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"}